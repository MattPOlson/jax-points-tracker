import{w as i}from"./CxhJIY_L.js";import{s as t}from"./CCM_4jRA.js";const f=!0,c=f,r=i(null),a=i(!1);let l=0;const d=1e4;async function p(n=!1){if(!(!n&&Date.now()-l<d)){a.set(!0);try{const{data:{user:e},error:o}=await t.auth.getUser();if(o||!e){console.error("User not logged in or failed to retrieve auth user:",o),r.set(null);return}const{data:u,error:s}=await t.from("members").select("*").eq("id",e.id).single();s?(console.error("Failed to load user profile:",s),r.set(null)):c&&setTimeout(()=>{r.set(u),l=Date.now()},0)}catch(e){console.error("‚ùå Failed to load user profile:",e),r.set(null)}finally{a.set(!1)}}}export{a as i,p as l,r as u};
