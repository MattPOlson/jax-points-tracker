import{s as Lt,n as je,d as c,i as H,b as l,q as a,c as n,e as f,v as T,g as b,h as i,j as C,w as Mt,x as wt,r as Vt,a as j,B as we,p as Be,f as y,t as S}from"../chunks/DOvoZ9Ia.js";import{S as Ut,i as Ht}from"../chunks/DZMW2zPD.js";import{s as jt}from"../chunks/CCM_4jRA.js";import{u as Pt}from"../chunks/DP1yl1qp.js";import{t as Ue}from"../chunks/Dw9rTOIL.js";function Bt(s){let e,t='<div class="empty-icon svelte-8vlkh3">üîí</div> <h3 class="svelte-8vlkh3">Not Logged In</h3> <p class="svelte-8vlkh3">Please log in to view your profile information.</p> <a href="/login" class="login-button svelte-8vlkh3">Sign In</a>';return{c(){e=i("div"),e.innerHTML=t,this.h()},l(r){e=n(r,"DIV",{class:!0,"data-svelte-h":!0}),T(e)!=="svelte-1thlc7n"&&(e.innerHTML=t),this.h()},h(){a(e,"class","empty-state svelte-8vlkh3")},m(r,o){H(r,e,o)},p:je,d(r){r&&c(e)}}}function Ft(s){let e,t,r,o,h=(s[0].name||"U")[0].toUpperCase()+"",d,p,v,u,_=(s[0].name||"Member")+"",k,D,L,B,g=He(s[0].join_date)+"",ae,ne,Fe,U,K,rt="‚úèÔ∏è Edit Information",Ze,F,ie,Z,Q,ot="Full Name *",qe,V,xe,re,q,W,ct="Phone Number",Oe,M,ze,Re,x,X,vt="üìã Account Details",Je,I,O,Y,ut="Email Address",Ge,oe,de=s[0].email+"",be,Ke,z,$,ft="Member ID",Qe,ee,pe=s[0].id.slice(0,8)+"",Ce,We,Xe,R,te,ht="Join Date",Ye,ce,_e=He(s[0].join_date)+"",Ee,$e,J,le,dt="Last Login",et,ve,me=Tt(s[0].last_login_at)+"",ge,tt,G,se,pt="Account Status",lt,ue,ke=s[0].active?"‚úÖ Active":"‚ùå Inactive",Ie,st,at,_t,A=s[0].is_officer&&At(),N=s[5]&&yt(s),P=s[0].points!==void 0&&St(s);return{c(){e=i("div"),t=i("div"),r=i("div"),o=i("span"),d=S(h),p=C(),v=i("div"),u=i("h2"),k=S(_),D=C(),L=i("p"),B=S("Member since "),ae=S(g),ne=C(),A&&A.c(),Fe=C(),U=i("div"),K=i("h3"),K.textContent=rt,Ze=C(),F=i("div"),ie=i("div"),Z=i("label"),Q=i("span"),Q.textContent=ot,qe=C(),V=i("input"),xe=C(),re=i("div"),q=i("label"),W=i("span"),W.textContent=ct,Oe=C(),M=i("input"),ze=C(),N&&N.c(),Re=C(),x=i("div"),X=i("h3"),X.textContent=vt,Je=C(),I=i("div"),O=i("div"),Y=i("span"),Y.textContent=ut,Ge=C(),oe=i("span"),be=S(de),Ke=C(),z=i("div"),$=i("span"),$.textContent=ft,Qe=C(),ee=i("span"),Ce=S(pe),We=S("..."),Xe=C(),R=i("div"),te=i("span"),te.textContent=ht,Ye=C(),ce=i("span"),Ee=S(_e),$e=C(),J=i("div"),le=i("span"),le.textContent=dt,et=C(),ve=i("span"),ge=S(me),tt=C(),G=i("div"),se=i("span"),se.textContent=pt,lt=C(),ue=i("span"),Ie=S(ke),st=C(),P&&P.c(),this.h()},l(m){e=n(m,"DIV",{class:!0});var E=f(e);t=n(E,"DIV",{class:!0});var De=f(t);r=n(De,"DIV",{class:!0});var mt=f(r);o=n(mt,"SPAN",{class:!0});var kt=f(o);d=y(kt,h),kt.forEach(c),mt.forEach(c),p=b(De),v=n(De,"DIV",{class:!0});var fe=f(v);u=n(fe,"H2",{class:!0});var bt=f(u);k=y(bt,_),bt.forEach(c),D=b(fe),L=n(fe,"P",{class:!0});var nt=f(L);B=y(nt,"Member since "),ae=y(nt,g),nt.forEach(c),ne=b(fe),A&&A.l(fe),fe.forEach(c),De.forEach(c),Fe=b(E),U=n(E,"DIV",{class:!0});var he=f(U);K=n(he,"H3",{class:!0,"data-svelte-h":!0}),T(K)!=="svelte-1s4nm9i"&&(K.textContent=rt),Ze=b(he),F=n(he,"DIV",{class:!0});var Ne=f(F);ie=n(Ne,"DIV",{class:!0});var Ct=f(ie);Z=n(Ct,"LABEL",{for:!0});var Pe=f(Z);Q=n(Pe,"SPAN",{class:!0,"data-svelte-h":!0}),T(Q)!=="svelte-lzi76h"&&(Q.textContent=ot),qe=b(Pe),V=n(Pe,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),Pe.forEach(c),Ct.forEach(c),xe=b(Ne),re=n(Ne,"DIV",{class:!0});var Et=f(re);q=n(Et,"LABEL",{for:!0});var Ae=f(q);W=n(Ae,"SPAN",{class:!0,"data-svelte-h":!0}),T(W)!=="svelte-1vzifgs"&&(W.textContent=ct),Oe=b(Ae),M=n(Ae,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),Ae.forEach(c),Et.forEach(c),Ne.forEach(c),ze=b(he),N&&N.l(he),he.forEach(c),Re=b(E),x=n(E,"DIV",{class:!0});var ye=f(x);X=n(ye,"H3",{class:!0,"data-svelte-h":!0}),T(X)!=="svelte-1wd9hoh"&&(X.textContent=vt),Je=b(ye),I=n(ye,"DIV",{class:!0});var w=f(I);O=n(w,"DIV",{class:!0});var Se=f(O);Y=n(Se,"SPAN",{class:!0,"data-svelte-h":!0}),T(Y)!=="svelte-1xckbhw"&&(Y.textContent=ut),Ge=b(Se),oe=n(Se,"SPAN",{class:!0});var gt=f(oe);be=y(gt,de),gt.forEach(c),Se.forEach(c),Ke=b(w),z=n(w,"DIV",{class:!0});var Te=f(z);$=n(Te,"SPAN",{class:!0,"data-svelte-h":!0}),T($)!=="svelte-1uyws8f"&&($.textContent=ft),Qe=b(Te),ee=n(Te,"SPAN",{class:!0});var it=f(ee);Ce=y(it,pe),We=y(it,"..."),it.forEach(c),Te.forEach(c),Xe=b(w),R=n(w,"DIV",{class:!0});var Ve=f(R);te=n(Ve,"SPAN",{class:!0,"data-svelte-h":!0}),T(te)!=="svelte-1a4w3tk"&&(te.textContent=ht),Ye=b(Ve),ce=n(Ve,"SPAN",{class:!0});var It=f(ce);Ee=y(It,_e),It.forEach(c),Ve.forEach(c),$e=b(w),J=n(w,"DIV",{class:!0});var Le=f(J);le=n(Le,"SPAN",{class:!0,"data-svelte-h":!0}),T(le)!=="svelte-rhbxyb"&&(le.textContent=dt),et=b(Le),ve=n(Le,"SPAN",{class:!0});var Dt=f(ve);ge=y(Dt,me),Dt.forEach(c),Le.forEach(c),tt=b(w),G=n(w,"DIV",{class:!0});var Me=f(G);se=n(Me,"SPAN",{class:!0,"data-svelte-h":!0}),T(se)!=="svelte-nykmbp"&&(se.textContent=pt),lt=b(Me),ue=n(Me,"SPAN",{class:!0});var Nt=f(ue);Ie=y(Nt,ke),Nt.forEach(c),Me.forEach(c),st=b(w),P&&P.l(w),w.forEach(c),ye.forEach(c),E.forEach(c),this.h()},h(){a(o,"class","avatar-text"),a(r,"class","avatar svelte-8vlkh3"),a(u,"class","svelte-8vlkh3"),a(L,"class","member-since svelte-8vlkh3"),a(v,"class","header-info svelte-8vlkh3"),a(t,"class","profile-header svelte-8vlkh3"),a(K,"class","svelte-8vlkh3"),a(Q,"class","label-text svelte-8vlkh3"),a(V,"id","name"),a(V,"type","text"),a(V,"placeholder","Enter your full name"),V.disabled=s[4],a(V,"class","svelte-8vlkh3"),a(Z,"for","name"),a(ie,"class","input-group svelte-8vlkh3"),a(W,"class","label-text svelte-8vlkh3"),a(M,"id","phone"),a(M,"type","tel"),a(M,"placeholder","(555) 123-4567"),M.disabled=s[4],a(M,"class","svelte-8vlkh3"),a(q,"for","phone"),a(re,"class","input-group svelte-8vlkh3"),a(F,"class","form-grid svelte-8vlkh3"),a(U,"class","form-section svelte-8vlkh3"),a(X,"class","svelte-8vlkh3"),a(Y,"class","info-label svelte-8vlkh3"),a(oe,"class","info-value svelte-8vlkh3"),a(O,"class","info-item svelte-8vlkh3"),a($,"class","info-label svelte-8vlkh3"),a(ee,"class","info-value svelte-8vlkh3"),a(z,"class","info-item svelte-8vlkh3"),a(te,"class","info-label svelte-8vlkh3"),a(ce,"class","info-value svelte-8vlkh3"),a(R,"class","info-item svelte-8vlkh3"),a(le,"class","info-label svelte-8vlkh3"),a(ve,"class","info-value svelte-8vlkh3"),a(J,"class","info-item svelte-8vlkh3"),a(se,"class","info-label svelte-8vlkh3"),a(ue,"class","info-value status-active svelte-8vlkh3"),a(G,"class","info-item svelte-8vlkh3"),a(I,"class","info-grid svelte-8vlkh3"),a(x,"class","info-section svelte-8vlkh3"),a(e,"class","profile-container svelte-8vlkh3")},m(m,E){H(m,e,E),l(e,t),l(t,r),l(r,o),l(o,d),l(t,p),l(t,v),l(v,u),l(u,k),l(v,D),l(v,L),l(L,B),l(L,ae),l(v,ne),A&&A.m(v,null),l(e,Fe),l(e,U),l(U,K),l(U,Ze),l(U,F),l(F,ie),l(ie,Z),l(Z,Q),l(Z,qe),l(Z,V),we(V,s[1]),l(F,xe),l(F,re),l(re,q),l(q,W),l(q,Oe),l(q,M),we(M,s[2]),l(U,ze),N&&N.m(U,null),l(e,Re),l(e,x),l(x,X),l(x,Je),l(x,I),l(I,O),l(O,Y),l(O,Ge),l(O,oe),l(oe,be),l(I,Ke),l(I,z),l(z,$),l(z,Qe),l(z,ee),l(ee,Ce),l(ee,We),l(I,Xe),l(I,R),l(R,te),l(R,Ye),l(R,ce),l(ce,Ee),l(I,$e),l(I,J),l(J,le),l(J,et),l(J,ve),l(ve,ge),l(I,tt),l(I,G),l(G,se),l(G,lt),l(G,ue),l(ue,Ie),l(I,st),P&&P.m(I,null),at||(_t=[Be(V,"input",s[8]),Be(M,"input",s[9])],at=!0)},p(m,E){E&1&&h!==(h=(m[0].name||"U")[0].toUpperCase()+"")&&j(d,h),E&1&&_!==(_=(m[0].name||"Member")+"")&&j(k,_),E&1&&g!==(g=He(m[0].join_date)+"")&&j(ae,g),m[0].is_officer?A||(A=At(),A.c(),A.m(v,null)):A&&(A.d(1),A=null),E&16&&(V.disabled=m[4]),E&2&&V.value!==m[1]&&we(V,m[1]),E&16&&(M.disabled=m[4]),E&4&&we(M,m[2]),m[5]?N?N.p(m,E):(N=yt(m),N.c(),N.m(U,null)):N&&(N.d(1),N=null),E&1&&de!==(de=m[0].email+"")&&j(be,de),E&1&&pe!==(pe=m[0].id.slice(0,8)+"")&&j(Ce,pe),E&1&&_e!==(_e=He(m[0].join_date)+"")&&j(Ee,_e),E&1&&me!==(me=Tt(m[0].last_login_at)+"")&&j(ge,me),E&1&&ke!==(ke=m[0].active?"‚úÖ Active":"‚ùå Inactive")&&j(Ie,ke),m[0].points!==void 0?P?P.p(m,E):(P=St(m),P.c(),P.m(I,null)):P&&(P.d(1),P=null)},d(m){m&&c(e),A&&A.d(),N&&N.d(),P&&P.d(),at=!1,Vt(_t)}}}function Zt(s){let e,t='<div class="spinner svelte-8vlkh3"></div> <p>Loading your profile...</p>';return{c(){e=i("div"),e.innerHTML=t,this.h()},l(r){e=n(r,"DIV",{class:!0,"data-svelte-h":!0}),T(e)!=="svelte-1334i5j"&&(e.innerHTML=t),this.h()},h(){a(e,"class","loading-state svelte-8vlkh3")},m(r,o){H(r,e,o)},p:je,d(r){r&&c(e)}}}function At(s){let e,t="üèÖ Officer";return{c(){e=i("span"),e.textContent=t,this.h()},l(r){e=n(r,"SPAN",{class:!0,"data-svelte-h":!0}),T(e)!=="svelte-1me08f8"&&(e.textContent=t),this.h()},h(){a(e,"class","officer-badge svelte-8vlkh3")},m(r,o){H(r,e,o)},d(r){r&&c(e)}}}function yt(s){let e,t,r,o,h,d,p;function v(k,D){return k[4]?xt:qt}let u=v(s),_=u(s);return{c(){e=i("div"),t=i("button"),_.c(),r=C(),o=i("button"),h=S("‚Ü∂ Reset"),this.h()},l(k){e=n(k,"DIV",{class:!0});var D=f(e);t=n(D,"BUTTON",{class:!0});var L=f(t);_.l(L),L.forEach(c),r=b(D),o=n(D,"BUTTON",{class:!0});var B=f(o);h=y(B,"‚Ü∂ Reset"),B.forEach(c),D.forEach(c),this.h()},h(){a(t,"class","save-button svelte-8vlkh3"),t.disabled=s[4],a(o,"class","reset-button svelte-8vlkh3"),o.disabled=s[4],a(e,"class","form-actions svelte-8vlkh3")},m(k,D){H(k,e,D),l(e,t),_.m(t,null),l(e,r),l(e,o),l(o,h),d||(p=[Be(t,"click",s[6]),Be(o,"click",s[7])],d=!0)},p(k,D){u!==(u=v(k))&&(_.d(1),_=u(k),_&&(_.c(),_.m(t,null))),D&16&&(t.disabled=k[4]),D&16&&(o.disabled=k[4])},d(k){k&&c(e),_.d(),d=!1,Vt(p)}}}function qt(s){let e;return{c(){e=S("üíæ Save Changes")},l(t){e=y(t,"üíæ Save Changes")},m(t,r){H(t,e,r)},d(t){t&&c(e)}}}function xt(s){let e,t;return{c(){e=i("span"),t=S(`
                Saving...`),this.h()},l(r){e=n(r,"SPAN",{class:!0}),f(e).forEach(c),t=y(r,`
                Saving...`),this.h()},h(){a(e,"class","button-spinner svelte-8vlkh3")},m(r,o){H(r,e,o),H(r,t,o)},d(r){r&&(c(e),c(t))}}}function St(s){var v;let e,t,r="Total Points",o,h,d=(((v=s[0].points)==null?void 0:v.toLocaleString())||0)+"",p;return{c(){e=i("div"),t=i("span"),t.textContent=r,o=C(),h=i("span"),p=S(d),this.h()},l(u){e=n(u,"DIV",{class:!0});var _=f(e);t=n(_,"SPAN",{class:!0,"data-svelte-h":!0}),T(t)!=="svelte-18snck7"&&(t.textContent=r),o=b(_),h=n(_,"SPAN",{class:!0});var k=f(h);p=y(k,d),k.forEach(c),_.forEach(c),this.h()},h(){a(t,"class","info-label svelte-8vlkh3"),a(h,"class","info-value points-value svelte-8vlkh3"),a(e,"class","info-item points-item svelte-8vlkh3")},m(u,_){H(u,e,_),l(e,t),l(e,o),l(e,h),l(h,p)},p(u,_){var k;_&1&&d!==(d=(((k=u[0].points)==null?void 0:k.toLocaleString())||0)+"")&&j(p,d)},d(u){u&&c(e)}}}function Ot(s){let e,t,r='<h1 class="svelte-8vlkh3">üë§ My Profile</h1> <p class="subtitle svelte-8vlkh3">Manage your account information</p>',o;function h(v,u){return v[3]?Zt:v[0]?Ft:Bt}let d=h(s),p=d(s);return{c(){e=i("main"),t=i("div"),t.innerHTML=r,o=C(),p.c(),this.h()},l(v){e=n(v,"MAIN",{class:!0});var u=f(e);t=n(u,"DIV",{class:!0,"data-svelte-h":!0}),T(t)!=="svelte-vlg9f1"&&(t.innerHTML=r),o=b(u),p.l(u),u.forEach(c),this.h()},h(){a(t,"class","hero-section svelte-8vlkh3"),a(e,"class","svelte-8vlkh3")},m(v,u){H(v,e,u),l(e,t),l(e,o),p.m(e,null)},p(v,[u]){d===(d=h(v))&&p?p.p(v,u):(p.d(1),p=d(v),p&&(p.c(),p.m(e,null)))},i:je,o:je,d(v){v&&c(e),p.d()}}}function zt(){return()=>{}}function He(s){if(!s)return"N/A";try{let e=s;s.includes(" ")&&!s.includes("T")&&(e=s.replace(" ","T"),!e.includes("+")&&!e.includes("Z")&&(e+="Z"));const t=new Date(e);return isNaN(t.getTime())?(console.warn("Invalid date after parsing:",s,"->",e),"Invalid Date"):t.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch{return"Invalid Date"}}function Tt(s){if(!s)return"N/A";try{let e=s;s.includes(" ")&&!s.includes("T")&&(e=s.replace(" ","T"),!e.includes("+")&&!e.includes("Z")&&(e+="Z"));const t=new Date(e);return isNaN(t.getTime())?(console.warn("Invalid datetime after parsing:",s,"->",e),"Invalid Date"):t.toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Invalid Date"}}function Rt(s,e,t){let r,o=null,h="",d="",p=!0,v=!1,u=[];const _=Pt.subscribe(g=>{g?(t(0,o=g),t(1,h=g.name??""),t(2,d=g.phone??""),t(3,p=!1)):(t(0,o=null),t(1,h=""),t(2,d=""),t(3,p=!1))});async function k(){if(!(!o||v)){if(!h.trim()){Ue.error("Name cannot be empty");return}t(4,v=!0);try{const g={name:h.trim(),phone:d.trim()||null},{data:ae,error:ne}=await jt.from("members").update(g).eq("id",o.id).select().single();if(ne)throw ne;Ue.success("‚úÖ Profile updated successfully!"),Pt.set(ae)}catch(g){console.error("Failed to update profile:",g),Ue.error("Failed to update profile. Please try again.")}finally{t(4,v=!1)}}}function D(){o&&(t(1,h=o.name??""),t(2,d=o.phone??""),Ue.success("Changes reset"))}Mt(()=>{const g=zt();u.push(g)}),wt(()=>{_(),u.forEach(g=>g())});function L(){h=this.value,t(1,h)}function B(){d=this.value,t(2,d)}return s.$$.update=()=>{s.$$.dirty&7&&t(5,r=o&&(h!==(o.name??"")||d!==(o.phone??"")))},[o,h,d,p,v,r,k,D,L,B]}class Xt extends Ut{constructor(e){super(),Ht(this,e,Rt,Ot,Lt,{})}}export{Xt as component};
