import{s as He,k as he,C as Me,d as u,i as P,g as O,G as Je,j as V,I as Le,n as _e,a as W,q as k,b as d,c as j,e as B,f as M,h as E,t as q,F as Ve,E as ue,M as de,x as Ce,r as qe,J as je,K as ce,L as ye}from"../chunks/DpwROyu6.js";import{S as ze,i as Ke,d as ne,t as H,a as R,m as re,b as oe,e as ae,g as ve,c as be}from"../chunks/BHIxbS5H.js";import{e as we}from"../chunks/CurIhP_1.js";import{g as De}from"../chunks/BPUUyVED.js";import{p as Xe}from"../chunks/9YNtkGAc.js";import{u as Qe}from"../chunks/CN8V5uJw.js";import{c as Ee,J as fe,j as We,d as Ye,e as Ze}from"../chunks/CdVdk_PO.js";import{s as Ae}from"../chunks/CCM_4jRA.js";import{H as xe}from"../chunks/D4n3Zs5P.js";import{C as et}from"../chunks/XUMP8LP7.js";import{L as Fe}from"../chunks/BWGxyfTN.js";import{E as tt}from"../chunks/CZ9EVN-i.js";import{B as me}from"../chunks/28GNhQ-J.js";function Ie(l,e,s){const t=l.slice();return t[26]=e[s],t}function Ue(l,e,s){const t=l.slice();return t[29]=e[s],t}function st(l){let e,s,t=l[0].name+"",n,r,i,b,h=l[0].results_published?"Results Published":new Date>new Date(l[0].entry_deadline)?"Judging Phase":"Entry Phase",g,a,p,_,v,T,F,C,te,I,Y,G,$,z,se,Q=l[7].length+"",U,N,y,D,c,A,Z,X,x;v=new me({props:{variant:"success",disabled:l[1].length===0,$$slots:{default:[nt]},$$scope:{ctx:l}}}),v.$on("click",l[17]);let w=l[0].competition_type==="intraclub"&&l[1].length>0&&Se(l);C=new me({props:{variant:"secondary",disabled:l[4],title:"Refresh the list of available judges",$$slots:{default:[ot]},$$scope:{ctx:l}}}),C.$on("click",l[13]),I=new me({props:{variant:"secondary",$$slots:{default:[at]},$$scope:{ctx:l}}}),I.$on("click",l[18]);const K=[ft,ut,it],f=[];function L(o,m){return o[8]?0:o[7].length===0?1:2}D=L(l),c=f[D]=K[D](l);let J=l[5]&&Ge(l),S=l[9]&&Re(l);return{c(){e=E("div"),s=E("h2"),n=q(t),r=V(),i=E("p"),b=E("span"),g=q(h),p=V(),_=E("div"),ae(v.$$.fragment),T=V(),w&&w.c(),F=V(),ae(C.$$.fragment),te=V(),ae(I.$$.fragment),Y=V(),G=E("div"),$=E("div"),z=E("h3"),se=q("Assigned Judges ("),U=q(Q),N=q(")"),y=V(),c.c(),A=V(),J&&J.c(),Z=V(),S&&S.c(),X=Je(),this.h()},l(o){e=j(o,"DIV",{class:!0});var m=B(e);s=j(m,"H2",{class:!0});var le=B(s);n=M(le,t),le.forEach(u),r=O(m),i=j(m,"P",{});var ie=B(i);b=j(ie,"SPAN",{class:!0});var pe=B(b);g=M(pe,h),pe.forEach(u),ie.forEach(u),m.forEach(u),p=O(o),_=j(o,"DIV",{class:!0});var ee=B(_);oe(v.$$.fragment,ee),T=O(ee),w&&w.l(ee),F=O(ee),oe(C.$$.fragment,ee),te=O(ee),oe(I.$$.fragment,ee),ee.forEach(u),Y=O(o),G=j(o,"DIV",{class:!0});var ge=B(G);$=j(ge,"DIV",{class:!0});var Pe=B($);z=j(Pe,"H3",{});var $e=B(z);se=M($e,"Assigned Judges ("),U=M($e,Q),N=M($e,")"),$e.forEach(u),Pe.forEach(u),y=O(ge),c.l(ge),A=O(ge),J&&J.l(ge),ge.forEach(u),Z=O(o),S&&S.l(o),X=Je(),this.h()},h(){k(s,"class","svelte-1bifhvp"),k(b,"class",a="status-badge "+Oe(l[0])+" svelte-1bifhvp"),k(e,"class","competition-info svelte-1bifhvp"),k(_,"class","controls svelte-1bifhvp"),k($,"class","section-header svelte-1bifhvp"),k(G,"class","judges-section svelte-1bifhvp")},m(o,m){P(o,e,m),d(e,s),d(s,n),d(e,r),d(e,i),d(i,b),d(b,g),P(o,p,m),P(o,_,m),re(v,_,null),d(_,T),w&&w.m(_,null),d(_,F),re(C,_,null),d(_,te),re(I,_,null),P(o,Y,m),P(o,G,m),d(G,$),d($,z),d(z,se),d(z,U),d(z,N),d(G,y),f[D].m(G,null),d(G,A),J&&J.m(G,null),P(o,Z,m),S&&S.m(o,m),P(o,X,m),x=!0},p(o,m){(!x||m[0]&1)&&t!==(t=o[0].name+"")&&W(n,t),(!x||m[0]&1)&&h!==(h=o[0].results_published?"Results Published":new Date>new Date(o[0].entry_deadline)?"Judging Phase":"Entry Phase")&&W(g,h),(!x||m[0]&1&&a!==(a="status-badge "+Oe(o[0])+" svelte-1bifhvp"))&&k(b,"class",a);const le={};m[0]&2&&(le.disabled=o[1].length===0),m[0]&32|m[1]&2&&(le.$$scope={dirty:m,ctx:o}),v.$set(le),o[0].competition_type==="intraclub"&&o[1].length>0?w?(w.p(o,m),m[0]&3&&R(w,1)):(w=Se(o),w.c(),R(w,1),w.m(_,F)):w&&(ve(),H(w,1,1,()=>{w=null}),be());const ie={};m[0]&16&&(ie.disabled=o[4]),m[0]&16|m[1]&2&&(ie.$$scope={dirty:m,ctx:o}),C.$set(ie);const pe={};m[1]&2&&(pe.$$scope={dirty:m,ctx:o}),I.$set(pe),(!x||m[0]&128)&&Q!==(Q=o[7].length+"")&&W(U,Q);let ee=D;D=L(o),D===ee?f[D].p(o,m):(ve(),H(f[ee],1,1,()=>{f[ee]=null}),be(),c=f[D],c?c.p(o,m):(c=f[D]=K[D](o),c.c()),R(c,1),c.m(G,A)),o[5]?J?(J.p(o,m),m[0]&32&&R(J,1)):(J=Ge(o),J.c(),R(J,1),J.m(G,null)):J&&(ve(),H(J,1,1,()=>{J=null}),be()),o[9]?S?S.p(o,m):(S=Re(o),S.c(),S.m(X.parentNode,X)):S&&(S.d(1),S=null)},i(o){x||(R(v.$$.fragment,o),R(w),R(C.$$.fragment,o),R(I.$$.fragment,o),R(c),R(J),x=!0)},o(o){H(v.$$.fragment,o),H(w),H(C.$$.fragment,o),H(I.$$.fragment,o),H(c),H(J),x=!1},d(o){o&&(u(e),u(p),u(_),u(Y),u(G),u(Z),u(X)),ne(v),w&&w.d(),ne(C),ne(I),f[D].d(),J&&J.d(),S&&S.d(o)}}}function lt(l){let e,s;return e=new Fe({props:{message:"Loading competition data..."}}),{c(){ae(e.$$.fragment)},l(t){oe(e.$$.fragment,t)},m(t,n){re(e,t,n),s=!0},p:_e,i(t){s||(R(e.$$.fragment,t),s=!0)},o(t){H(e.$$.fragment,t),s=!1},d(t){ne(e,t)}}}function nt(l){let e=l[5]?"Cancel":"Add Judge",s;return{c(){s=q(e)},l(t){s=M(t,e)},m(t,n){P(t,s,n)},p(t,n){n[0]&32&&e!==(e=t[5]?"Cancel":"Add Judge")&&W(s,e)},d(t){t&&u(s)}}}function Se(l){let e,s;return e=new me({props:{variant:"primary",disabled:l[3],$$slots:{default:[rt]},$$scope:{ctx:l}}}),e.$on("click",l[12]),{c(){ae(e.$$.fragment)},l(t){oe(e.$$.fragment,t)},m(t,n){re(e,t,n),s=!0},p(t,n){const r={};n[0]&8&&(r.disabled=t[3]),n[0]&10|n[1]&2&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){s||(R(e.$$.fragment,t),s=!0)},o(t){H(e.$$.fragment,t),s=!1},d(t){ne(e,t)}}}function rt(l){let e=l[3]?"Assigning...":`Assign All Members (${l[1].length})`,s;return{c(){s=q(e)},l(t){s=M(t,e)},m(t,n){P(t,s,n)},p(t,n){n[0]&10&&e!==(e=t[3]?"Assigning...":`Assign All Members (${t[1].length})`)&&W(s,e)},d(t){t&&u(s)}}}function ot(l){let e=l[4]?"Refreshing...":"Refresh Judges",s;return{c(){s=q(e)},l(t){s=M(t,e)},m(t,n){P(t,s,n)},p(t,n){n[0]&16&&e!==(e=t[4]?"Refreshing...":"Refresh Judges")&&W(s,e)},d(t){t&&u(s)}}}function at(l){let e;return{c(){e=q("Back to Competitions")},l(s){e=M(s,"Back to Competitions")},m(s,t){P(s,e,t)},d(s){s&&u(e)}}}function it(l){let e,s=we(l[7]),t=[];for(let n=0;n<s.length;n+=1)t[n]=Te(Ue(l,s,n));return{c(){e=E("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){e=j(n,"DIV",{class:!0});var r=B(e);for(let i=0;i<t.length;i+=1)t[i].l(r);r.forEach(u),this.h()},h(){k(e,"class","judges-list svelte-1bifhvp")},m(n,r){P(n,e,r);for(let i=0;i<t.length;i+=1)t[i]&&t[i].m(e,null)},p(n,r){if(r[0]&18560){s=we(n[7]);let i;for(i=0;i<s.length;i+=1){const b=Ue(n,s,i);t[i]?t[i].p(b,r):(t[i]=Te(b),t[i].c(),t[i].m(e,null))}for(;i<t.length;i+=1)t[i].d(1);t.length=s.length}},i:_e,o:_e,d(n){n&&u(e),Ve(t,n)}}}function ut(l){let e,s;return e=new tt({props:{icon:"ðŸ‘©â€âš–ï¸",title:"No judges assigned yet",message:"Add judges to start the judging process"}}),{c(){ae(e.$$.fragment)},l(t){oe(e.$$.fragment,t)},m(t,n){re(e,t,n),s=!0},p:_e,i(t){s||(R(e.$$.fragment,t),s=!0)},o(t){H(e.$$.fragment,t),s=!1},d(t){ne(e,t)}}}function ft(l){let e,s;return e=new Fe({props:{message:"Loading judges..."}}),{c(){ae(e.$$.fragment)},l(t){oe(e.$$.fragment,t)},m(t,n){re(e,t,n),s=!0},p:_e,i(t){s||(R(e.$$.fragment,t),s=!0)},o(t){H(e.$$.fragment,t),s=!1},d(t){ne(e,t)}}}function Be(l){let e,s=l[29].assignment_notes+"",t;return{c(){e=E("p"),t=q(s),this.h()},l(n){e=j(n,"P",{style:!0,class:!0});var r=B(e);t=M(r,s),r.forEach(u),this.h()},h(){de(e,"margin-top","0.5rem"),de(e,"font-style","italic"),k(e,"class","svelte-1bifhvp")},m(n,r){P(n,e,r),d(e,t)},p(n,r){r[0]&128&&s!==(s=n[29].assignment_notes+"")&&W(t,s)},d(n){n&&u(e)}}}function Te(l){var se,Q;let e,s,t,n=(((se=l[29].judge)==null?void 0:se.name)||"Unknown Judge")+"",r,i,b,h=((Q=l[29].judge)==null?void 0:Q.email)+"",g,a,p,_=l[14](l[29].judge_role)+"",v,T,F,C,te="Remove",I,Y,G,$=l[29].assignment_notes&&Be(l);function z(){return l[19](l[29])}return{c(){e=E("div"),s=E("div"),t=E("h4"),r=q(n),i=V(),b=E("p"),g=q(h),a=V(),p=E("span"),v=q(_),T=V(),$&&$.c(),F=V(),C=E("button"),C.textContent=te,I=V(),this.h()},l(U){e=j(U,"DIV",{class:!0});var N=B(e);s=j(N,"DIV",{class:!0});var y=B(s);t=j(y,"H4",{class:!0});var D=B(t);r=M(D,n),D.forEach(u),i=O(y),b=j(y,"P",{class:!0});var c=B(b);g=M(c,h),c.forEach(u),a=O(y),p=j(y,"SPAN",{class:!0});var A=B(p);v=M(A,_),A.forEach(u),T=O(y),$&&$.l(y),y.forEach(u),F=O(N),C=j(N,"BUTTON",{class:!0,style:!0,"data-svelte-h":!0}),ue(C)!=="svelte-19anezd"&&(C.textContent=te),I=O(N),N.forEach(u),this.h()},h(){k(t,"class","svelte-1bifhvp"),k(b,"class","svelte-1bifhvp"),k(p,"class","role-badge svelte-1bifhvp"),k(s,"class","judge-info svelte-1bifhvp"),k(C,"class","btn btn-secondary svelte-1bifhvp"),de(C,"padding","0.5rem 1rem"),k(e,"class","judge-card svelte-1bifhvp")},m(U,N){P(U,e,N),d(e,s),d(s,t),d(t,r),d(s,i),d(s,b),d(b,g),d(s,a),d(s,p),d(p,v),d(s,T),$&&$.m(s,null),d(e,F),d(e,C),d(e,I),Y||(G=Ce(C,"click",z),Y=!0)},p(U,N){var y,D;l=U,N[0]&128&&n!==(n=(((y=l[29].judge)==null?void 0:y.name)||"Unknown Judge")+"")&&W(r,n),N[0]&128&&h!==(h=((D=l[29].judge)==null?void 0:D.email)+"")&&W(g,h),N[0]&128&&_!==(_=l[14](l[29].judge_role)+"")&&W(v,_),l[29].assignment_notes?$?$.p(l,N):($=Be(l),$.c(),$.m(s,null)):$&&($.d(1),$=null)},d(U){U&&u(e),$&&$.d(),Y=!1,G()}}}function Ge(l){let e,s,t="Add New Judge",n,r,i,b;const h=[dt,ct],g=[];function a(p,_){return p[1].length===0?0:1}return r=a(l),i=g[r]=h[r](l),{c(){e=E("div"),s=E("h4"),s.textContent=t,n=V(),i.c(),this.h()},l(p){e=j(p,"DIV",{class:!0});var _=B(e);s=j(_,"H4",{"data-svelte-h":!0}),ue(s)!=="svelte-1sjcv40"&&(s.textContent=t),n=O(_),i.l(_),_.forEach(u),this.h()},h(){k(e,"class","add-judge-form svelte-1bifhvp")},m(p,_){P(p,e,_),d(e,s),d(e,n),g[r].m(e,null),b=!0},p(p,_){let v=r;r=a(p),r===v?g[r].p(p,_):(ve(),H(g[v],1,1,()=>{g[v]=null}),be(),i=g[r],i?i.p(p,_):(i=g[r]=h[r](p),i.c()),R(i,1),i.m(e,null))},i(p){b||(R(i),b=!0)},o(p){H(i),b=!1},d(p){p&&u(e),g[r].d()}}}function ct(l){let e,s,t="Select Judge",n,r,i,b="Choose a judge...",h,g,a,p="Judge Role",_,v,T,F="Club Judge",C,te="BJCP Certified Judge",I,Y="Guest Judge",G,$,z,se="Assignment Notes (Optional)",Q,U,N,y,D,c,A,Z,X,x,w=we(l[1]),K=[];for(let f=0;f<w.length;f+=1)K[f]=Ne(Ie(l,w,f));return D=new me({props:{variant:"success",disabled:l[3]||!l[6].judge_id,$$slots:{default:[_t]},$$scope:{ctx:l}}}),D.$on("click",l[10]),A=new me({props:{variant:"secondary",disabled:l[3],$$slots:{default:[gt]},$$scope:{ctx:l}}}),A.$on("click",l[23]),{c(){e=E("div"),s=E("label"),s.textContent=t,n=V(),r=E("select"),i=E("option"),i.textContent=b;for(let f=0;f<K.length;f+=1)K[f].c();h=V(),g=E("div"),a=E("label"),a.textContent=p,_=V(),v=E("select"),T=E("option"),T.textContent=F,C=E("option"),C.textContent=te,I=E("option"),I.textContent=Y,G=V(),$=E("div"),z=E("label"),z.textContent=se,Q=V(),U=E("textarea"),N=V(),y=E("div"),ae(D.$$.fragment),c=V(),ae(A.$$.fragment),this.h()},l(f){e=j(f,"DIV",{class:!0});var L=B(e);s=j(L,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ue(s)!=="svelte-5apbzf"&&(s.textContent=t),n=O(L),r=j(L,"SELECT",{id:!0,class:!0});var J=B(r);i=j(J,"OPTION",{"data-svelte-h":!0}),ue(i)!=="svelte-1m860wh"&&(i.textContent=b);for(let ie=0;ie<K.length;ie+=1)K[ie].l(J);J.forEach(u),L.forEach(u),h=O(f),g=j(f,"DIV",{class:!0});var S=B(g);a=j(S,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ue(a)!=="svelte-rx7pol"&&(a.textContent=p),_=O(S),v=j(S,"SELECT",{id:!0,class:!0});var o=B(v);T=j(o,"OPTION",{"data-svelte-h":!0}),ue(T)!=="svelte-12ge0d8"&&(T.textContent=F),C=j(o,"OPTION",{"data-svelte-h":!0}),ue(C)!=="svelte-1j85d13"&&(C.textContent=te),I=j(o,"OPTION",{"data-svelte-h":!0}),ue(I)!=="svelte-18n1o3m"&&(I.textContent=Y),o.forEach(u),S.forEach(u),G=O(f),$=j(f,"DIV",{class:!0});var m=B($);z=j(m,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ue(z)!=="svelte-lwcqxi"&&(z.textContent=se),Q=O(m),U=j(m,"TEXTAREA",{id:!0,class:!0,rows:!0,placeholder:!0}),B(U).forEach(u),m.forEach(u),N=O(f),y=j(f,"DIV",{class:!0});var le=B(y);oe(D.$$.fragment,le),c=O(le),oe(A.$$.fragment,le),le.forEach(u),this.h()},h(){k(s,"for","judge-select"),k(s,"class","svelte-1bifhvp"),i.__value="",ce(i,i.__value),k(r,"id","judge-select"),k(r,"class","form-control svelte-1bifhvp"),l[6].judge_id===void 0&&ye(()=>l[20].call(r)),k(e,"class","form-group svelte-1bifhvp"),k(a,"for","judge-role"),k(a,"class","svelte-1bifhvp"),T.__value=fe.CLUB_JUDGE,ce(T,T.__value),C.__value=fe.BJCP_JUDGE,ce(C,C.__value),I.__value=fe.GUEST_JUDGE,ce(I,I.__value),k(v,"id","judge-role"),k(v,"class","form-control svelte-1bifhvp"),l[6].judge_role===void 0&&ye(()=>l[21].call(v)),k(g,"class","form-group svelte-1bifhvp"),k(z,"for","assignment-notes"),k(z,"class","svelte-1bifhvp"),k(U,"id","assignment-notes"),k(U,"class","form-control svelte-1bifhvp"),k(U,"rows","2"),k(U,"placeholder","Any special instructions or notes for this judge assignment..."),k($,"class","form-group svelte-1bifhvp"),k(y,"class","form-actions svelte-1bifhvp")},m(f,L){P(f,e,L),d(e,s),d(e,n),d(e,r),d(r,i);for(let J=0;J<K.length;J+=1)K[J]&&K[J].m(r,null);je(r,l[6].judge_id,!0),P(f,h,L),P(f,g,L),d(g,a),d(g,_),d(g,v),d(v,T),d(v,C),d(v,I),je(v,l[6].judge_role,!0),P(f,G,L),P(f,$,L),d($,z),d($,Q),d($,U),ce(U,l[6].assignment_notes),P(f,N,L),P(f,y,L),re(D,y,null),d(y,c),re(A,y,null),Z=!0,X||(x=[Ce(r,"change",l[20]),Ce(v,"change",l[21]),Ce(U,"input",l[22])],X=!0)},p(f,L){if(L[0]&2){w=we(f[1]);let o;for(o=0;o<w.length;o+=1){const m=Ie(f,w,o);K[o]?K[o].p(m,L):(K[o]=Ne(m),K[o].c(),K[o].m(r,null))}for(;o<K.length;o+=1)K[o].d(1);K.length=w.length}L[0]&66&&je(r,f[6].judge_id),L[0]&66&&je(v,f[6].judge_role),L[0]&66&&ce(U,f[6].assignment_notes);const J={};L[0]&72&&(J.disabled=f[3]||!f[6].judge_id),L[0]&8|L[1]&2&&(J.$$scope={dirty:L,ctx:f}),D.$set(J);const S={};L[0]&8&&(S.disabled=f[3]),L[1]&2&&(S.$$scope={dirty:L,ctx:f}),A.$set(S)},i(f){Z||(R(D.$$.fragment,f),R(A.$$.fragment,f),Z=!0)},o(f){H(D.$$.fragment,f),H(A.$$.fragment,f),Z=!1},d(f){f&&(u(e),u(h),u(g),u(G),u($),u(N),u(y)),Ve(K,f),ne(D),ne(A),X=!1,qe(x)}}}function dt(l){let e,s="All members are already assigned as judges for this competition.";return{c(){e=E("p"),e.textContent=s},l(t){e=j(t,"P",{"data-svelte-h":!0}),ue(e)!=="svelte-yiqdcy"&&(e.textContent=s)},m(t,n){P(t,e,n)},p:_e,i:_e,o:_e,d(t){t&&u(e)}}}function Ne(l){let e,s=l[26].name+"",t,n,r=l[26].email+"",i,b,h;return{c(){e=E("option"),t=q(s),n=q(" ("),i=q(r),b=q(")"),this.h()},l(g){e=j(g,"OPTION",{});var a=B(e);t=M(a,s),n=M(a," ("),i=M(a,r),b=M(a,")"),a.forEach(u),this.h()},h(){e.__value=h=l[26].id,ce(e,e.__value)},m(g,a){P(g,e,a),d(e,t),d(e,n),d(e,i),d(e,b)},p(g,a){a[0]&2&&s!==(s=g[26].name+"")&&W(t,s),a[0]&2&&r!==(r=g[26].email+"")&&W(i,r),a[0]&2&&h!==(h=g[26].id)&&(e.__value=h,ce(e,e.__value))},d(g){g&&u(e)}}}function _t(l){let e=l[3]?"Adding...":"Add Judge",s;return{c(){s=q(e)},l(t){s=M(t,e)},m(t,n){P(t,s,n)},p(t,n){n[0]&8&&e!==(e=t[3]?"Adding...":"Add Judge")&&W(s,e)},d(t){t&&u(s)}}}function gt(l){let e;return{c(){e=q("Cancel")},l(s){e=M(s,"Cancel")},m(s,t){P(s,e,t)},d(s){s&&u(e)}}}function Re(l){let e,s,t;return{c(){e=E("div"),s=q("Error: "),t=q(l[9]),this.h()},l(n){e=j(n,"DIV",{style:!0});var r=B(e);s=M(r,"Error: "),t=M(r,l[9]),r.forEach(u),this.h()},h(){de(e,"background","#fecaca"),de(e,"color","#dc2626"),de(e,"padding","1rem"),de(e,"border-radius","4px"),de(e,"margin-top","1rem")},m(n,r){P(n,e,r),d(e,s),d(e,t)},p(n,r){r[0]&512&&W(t,n[9])},d(n){n&&u(e)}}}function mt(l){let e,s,t,n,r,i;e=new xe({props:{title:"Manage Judges",subtitle:"Assign judges to competition",icon:"ðŸ‘©â€âš–ï¸",center:!0}});const b=[lt,st],h=[];function g(a,p){return a[2]?0:a[0]?1:-1}return~(t=g(l))&&(n=h[t]=b[t](l)),{c(){ae(e.$$.fragment),s=V(),n&&n.c(),r=Je()},l(a){oe(e.$$.fragment,a),s=O(a),n&&n.l(a),r=Je()},m(a,p){re(e,a,p),P(a,s,p),~t&&h[t].m(a,p),P(a,r,p),i=!0},p(a,p){let _=t;t=g(a),t===_?~t&&h[t].p(a,p):(n&&(ve(),H(h[_],1,1,()=>{h[_]=null}),be()),~t?(n=h[t],n?n.p(a,p):(n=h[t]=b[t](a),n.c()),R(n,1),n.m(r.parentNode,r)):n=null)},i(a){i||(R(e.$$.fragment,a),R(n),i=!0)},o(a){H(e.$$.fragment,a),H(n),i=!1},d(a){a&&(u(s),u(r)),ne(e,a),~t&&h[t].d(a)}}}function pt(l){let e,s;return e=new et({props:{size:"lg",$$slots:{default:[mt]},$$scope:{ctx:l}}}),{c(){ae(e.$$.fragment)},l(t){oe(e.$$.fragment,t)},m(t,n){re(e,t,n),s=!0},p(t,n){const r={};n[0]&1023|n[1]&2&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){s||(R(e.$$.fragment,t),s=!0)},o(t){H(e.$$.fragment,t),s=!1},d(t){ne(e,t)}}}function Oe(l){const e=new Date,s=new Date(l.entry_deadline),t=new Date(l.judging_date);return l.results_published?"status-completed":e>s&&e<=t?"status-judging":e<=s?"status-open":"status-judging"}function ke(l,e="info"){const s=document.createElement("div");s.textContent=l,s.style.cssText=`
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 1rem 1.5rem;
      border-radius: 6px;
      color: white;
      font-weight: 500;
      z-index: 1000;
      background: ${e==="success"?"#059669":e==="error"?"#dc2626":"#6b7280"};
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    `,document.body.appendChild(s),setTimeout(()=>document.body.removeChild(s),3e3)}function ht(l,e,s){let t,n,r,i,b,h;he(l,We,c=>s(7,n=c)),he(l,Qe,c=>s(15,r=c)),he(l,Xe,c=>s(16,i=c)),he(l,Ye,c=>s(8,b=c)),he(l,Ze,c=>s(9,h=c));let g=null,a=[],p=!0,_=!1,v=!1,T=!1,F={judge_id:"",judge_role:fe.CLUB_JUDGE,assignment_notes:""};Me(()=>{C()});async function C(){s(2,p=!0);try{const{data:c,error:A}=await Ae.from("competitions").select("*").eq("id",t).single();if(A)throw A;s(0,g=c),await Ee.loadJudges(t);const{data:Z,error:X}=await Ae.from("members").select("id, name, email, phone").order("name");if(X)throw X;const x=new Set(n.map(w=>w.judge_id));s(1,a=Z.filter(w=>!x.has(w.id)))}catch(c){console.error("Error loading data:",c),alert("Failed to load competition data"),De("/officers/manage-competitions")}finally{s(2,p=!1)}}async function te(){if(!F.judge_id){alert("Please select a judge");return}try{s(3,_=!0),await Ee.assignJudge(t,{...F,assigned_by:r.id}),s(6,F={judge_id:"",judge_role:fe.CLUB_JUDGE,assignment_notes:""}),s(5,T=!1);const c=new Set(n.map(A=>A.judge_id));s(1,a=a.filter(A=>!c.has(A.id))),ke("Judge assigned successfully","success")}catch(c){console.error("Error adding judge:",c),alert("Failed to assign judge")}finally{s(3,_=!1)}}async function I(c){if(confirm("Are you sure you want to remove this judge assignment?"))try{await Ee.removeJudge(c),await C(),ke("Judge removed successfully","success")}catch(A){console.error("Error removing judge:",A),alert("Failed to remove judge")}}async function Y(){if(confirm(`Are you sure you want to assign all ${a.length} available members as club judges for this intraclub competition?`))try{s(3,_=!0);for(const c of a)await Ee.assignJudge(t,{judge_id:c.id,judge_role:fe.CLUB_JUDGE,assignment_notes:"Auto-assigned for intraclub competition",assigned_by:r.id});await C(),ke(`Successfully assigned ${a.length} judges`,"success")}catch(c){console.error("Error assigning all judges:",c),alert("Failed to assign all judges")}finally{s(3,_=!1)}}async function G(){try{s(4,v=!0);const{data:c,error:A}=await Ae.from("members").select("id, name, email, phone").order("name");if(A)throw A;const Z=new Set(n.map(X=>X.judge_id));s(1,a=c.filter(X=>!Z.has(X.id))),ke(`Refreshed judges list - ${a.length} available`,"success")}catch(c){console.error("Error refreshing judges:",c),alert("Failed to refresh judges list")}finally{s(4,v=!1)}}function $(c){switch(c){case fe.BJCP_JUDGE:return"BJCP Certified Judge";case fe.CLUB_JUDGE:return"Club Judge";case fe.GUEST_JUDGE:return"Guest Judge";default:return c}}const z=()=>s(5,T=!T),se=()=>De("/officers/manage-competitions"),Q=c=>I(c.id);function U(){F.judge_id=Le(this),s(6,F),s(1,a)}function N(){F.judge_role=Le(this),s(6,F),s(1,a)}function y(){F.assignment_notes=this.value,s(6,F),s(1,a)}const D=()=>s(5,T=!1);return l.$$.update=()=>{l.$$.dirty[0]&32768&&r&&!r.is_officer&&De("/"),l.$$.dirty[0]&65536&&(t=i.params.id)},[g,a,p,_,v,T,F,n,b,h,te,I,Y,G,$,r,i,z,se,Q,U,N,y,D]}class yt extends ze{constructor(e){super(),Ke(this,e,ht,pt,He,{},null,[-1,-1])}}export{yt as component};
