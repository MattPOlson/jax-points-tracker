import{l as ht,s as nl,d as f,i as je,g,G as rt,j,k as Qe,C as rl,D as ol,r as bt,a as ne,q as n,b as a,x as ye,K as Lt,c as o,e as u,E as K,f as U,h as c,t as B,I as Be,F as Vt,H as pt,J as St,y as At,L as Pt,n as vt}from"../chunks/Bx0R1g88.js";import{S as cl,i as fl,d as xe,t as qe,a as Ze,m as et,b as tt,e as lt,g as Rt,c as Ut}from"../chunks/_AnIDkJ3.js";import{e as it}from"../chunks/l-8CJCCV.js";import{g as dl}from"../chunks/CYbiMPvF.js";import{u as yt}from"../chunks/C-vsV_nH.js";import{d as Bt,w as _t}from"../chunks/CxhJIY_L.js";import{s as mt}from"../chunks/CCM_4jRA.js";import{B as il}from"../chunks/CG3TnIEO.js";import{C as ul}from"../chunks/DbzRvOP7.js";import{H as vl}from"../chunks/CUZ1d4QS.js";import{L as _l}from"../chunks/B0YUnpmw.js";import{E as Nt}from"../chunks/3Wd5E0Px.js";const at=_t([]),ut=_t(!1),st=_t(null),Ot=_t(null),Tt=_t(""),wt=_t("all"),Mt=_t("all"),pl=Bt([at,Tt,wt,Mt],([s,e,t,l])=>{if(!s||s.length===0)return[];let i=s;if(e.trim()){const _=e.toLowerCase().trim();i=i.filter(d=>{var v,p,h;return((v=d.name)==null?void 0:v.toLowerCase().includes(_))||((p=d.email)==null?void 0:p.toLowerCase().includes(_))||((h=d.role_display)==null?void 0:h.toLowerCase().includes(_))})}if(t!=="all"&&(i=i.filter(_=>_.role===t)),l!=="all"){const _=new Date;_.setDate(_.getDate()-90),i=i.filter(d=>{const v=h=>{if(!h)return new Date(0);try{let r=h;return h.includes(" ")&&!h.includes("T")&&(r=h.replace(" ","T"),!r.includes("+")&&!r.includes("Z")&&(r+="Z")),new Date(r)}catch{return new Date(0)}},p=d.last_submission_date?v(d.last_submission_date):v(d.created_at);return l==="active"?p>=_:l==="inactive"?p<_:!0})}return i}),bl=Bt([at],([s])=>{if(!s||s.length===0)return{totalMembers:0,totalOfficers:0,activeMembers:0,inactiveMembers:0,totalPoints:0,avgPointsPerMember:0};const e=new Date;e.setDate(e.getDate()-90);const t=s.reduce((l,i)=>{l.totalMembers++,i.is_officer&&l.totalOfficers++;const _=v=>{if(!v)return new Date(0);try{let p=v;return v.includes(" ")&&!v.includes("T")&&(p=v.replace(" ","T"),!p.includes("+")&&!p.includes("Z")&&(p+="Z")),new Date(p)}catch{return new Date(0)}};return(i.last_submission_date?_(i.last_submission_date):_(i.created_at))>=e?l.activeMembers++:l.inactiveMembers++,l.totalPoints+=i.total_points||0,l},{totalMembers:0,totalOfficers:0,activeMembers:0,inactiveMembers:0,totalPoints:0});return t.avgPointsPerMember=t.totalMembers>0?Math.round(t.totalPoints/t.totalMembers):0,t}),hl=Bt([yt],([s])=>s?s.role==="president"||s.role==="vice_president":!1),We={async loadMembers(s=!1){const e=ht(at),t=ht(Ot);if(!s&&e.length>0&&t&&Date.now()-t<3e4)return e;ut.set(!0),st.set(null);try{console.log("🔄 Loading members with points...");const{data:l,error:i}=await mt.rpc("get_members_with_points");if(i)throw i;return console.log(`✅ Loaded ${(l==null?void 0:l.length)||0} members`),at.set(l||[]),Ot.set(Date.now()),l||[]}catch(l){return console.error("❌ Error loading members:",l),st.set(l.message||"Failed to load members"),[]}finally{ut.set(!1)}},async updateMemberRole(s,e){const t=ht(yt);if(!t||!["president","vice_president"].includes(t.role))throw new Error("Insufficient permissions to manage member roles");if(t.id===s&&t.role==="president"&&e!=="president")throw new Error("Presidents cannot demote themselves");if(e==="president"&&t.role!=="president")throw new Error("Only presidents can promote members to president");ut.set(!0),st.set(null);try{console.log(`🔄 Updating member ${s} role to ${e}...`);const i=["officer","competition_director","vice_president","president"].includes(e),{data:_,error:d}=await mt.from("members").update({role:e,is_officer:i}).eq("id",s).select();if(d)throw d;return console.log("✅ Member role updated successfully"),await this.loadMembers(!0),_}catch(l){throw console.error("❌ Error updating member role:",l),st.set(l.message||"Failed to update member role"),l}finally{ut.set(!1)}},async getMemberDetails(s){ut.set(!0),st.set(null);try{console.log(`🔄 Loading details for member ${s}...`);const{data:e,error:t}=await mt.from("members").select(`
          *,
          join_date
        `).eq("id",s).single();if(t)throw t;const{data:l,error:i}=await mt.from("point_submissions").select(`
          *,
          submitted_at
        `).eq("member_id",s).order("submitted_at",{ascending:!1}).limit(10);if(i)throw i;return console.log(`✅ Loaded member details with ${(l==null?void 0:l.length)||0} recent submissions`),{member:e,recentSubmissions:l||[]}}catch(e){throw console.error("❌ Error loading member details:",e),st.set(e.message||"Failed to load member details"),e}finally{ut.set(!1)}},async exportMembersData(){return ht(at).length===0&&await this.loadMembers(),ht(at).map(t=>({name:t.name,email:t.email,role:t.role_display,totalPoints:t.total_points,monthlyPoints:t.monthly_points,joinDate:(()=>{if(!t.created_at)return"N/A";try{let l=t.created_at;return t.created_at.includes(" ")&&!t.created_at.includes("T")&&(l=t.created_at.replace(" ","T"),!l.includes("+")&&!l.includes("Z")&&(l+="Z")),new Date(l).toLocaleDateString()}catch{return"Invalid Date"}})(),lastActivity:t.last_submission_date?(()=>{try{let l=t.last_submission_date;return t.last_submission_date.includes(" ")&&!t.last_submission_date.includes("T")&&(l=t.last_submission_date.replace(" ","T"),!l.includes("+")&&!l.includes("Z")&&(l+="Z")),new Date(l).toLocaleDateString()}catch{return"Invalid Date"}})():"Never",totalSubmissions:t.total_approved_submissions}))},resetFilters(){Tt.set(""),wt.set("all"),Mt.set("all")},async refresh(){return await this.loadMembers(!0)},clear(){at.set([]),st.set(null),Ot.set(null),this.resetFilters()}};yt.subscribe(s=>{s!=null&&s.is_officer?We.loadMembers():We.clear()});function Zt(s,e,t){const l=s.slice();return l[62]=e[t],l}function zt(s,e,t){const l=s.slice();return l[65]=e[t],l}function Jt(s,e,t){const l=s.slice();return l[68]=e[t],l}function Yt(s,e,t){const l=s.slice();return l[68]=e[t],l}function ml(s){let e,t,l,i,_,d;e=new vl({props:{title:"Manage Members",subtitle:"View and manage club members, their roles, activity, and point standings",icon:"👥",center:!0}});const v=[Cl,Dl,jl],p=[];function h(r,b){return r[17]&&r[18].length===0?0:r[19]?1:2}return l=h(s),i=p[l]=v[l](s),{c(){lt(e.$$.fragment),t=j(),i.c(),_=rt()},l(r){tt(e.$$.fragment,r),t=g(r),i.l(r),_=rt()},m(r,b){et(e,r,b),je(r,t,b),p[l].m(r,b),je(r,_,b),d=!0},p(r,b){let N=l;l=h(r),l===N?p[l].p(r,b):(Rt(),qe(p[N],1,1,()=>{p[N]=null}),Ut(),i=p[l],i?i.p(r,b):(i=p[l]=v[l](r),i.c()),Ze(i,1),i.m(_.parentNode,_))},i(r){d||(Ze(e.$$.fragment,r),Ze(i),d=!0)},o(r){qe(e.$$.fragment,r),qe(i),d=!1},d(r){r&&(f(t),f(_)),xe(e,r),p[l].d(r)}}}function gl(s){let e,t;return e=new Nt({props:{icon:"🔒",title:"Access Denied",message:"You need officer privileges to access this page."}}),{c(){lt(e.$$.fragment)},l(l){tt(e.$$.fragment,l)},m(l,i){et(e,l,i),t=!0},p:vt,i(l){t||(Ze(e.$$.fragment,l),t=!0)},o(l){qe(e.$$.fragment,l),t=!1},d(l){xe(e,l)}}}function jl(s){let e,t,l,i=s[20].totalMembers+"",_,d,v,p="Total Members",h,r,b,N=s[20].totalOfficers+"",I,E,L,m="Officers",T,S,Q,z=s[20].activeMembers+"",R,F,A,J="Active (90 days)",W,k,M,le=s[20].avgPointsPerMember+"",Ie,Z,P,pe="Avg Points",be,he,ve,X,re,De,G,se,Ne="🔍",Ve,oe,ae,_e,x="All Roles",H,$="Presidents",O,Ae="Vice Presidents",Ce,C="Competition Directors",Y,ke="Officers",me,V="Members",y,ge,Te,ce="All Activity",we,Se="Active (90 days)",Ee,w="Inactive (90+ days)",D,ee,ie,fe="🔄 Reset",te,q,Re="📊 Export",Ue,Pe,Oe,Fe,Me,ze,Ye;const Ge=[Il,kl,El],Le=[];function He(de,ue){return de[24].length===0&&de[18].length>0?0:de[18].length===0?1:2}return Pe=He(s),Oe=Le[Pe]=Ge[Pe](s),{c(){e=c("div"),t=c("div"),l=c("div"),_=B(i),d=j(),v=c("div"),v.textContent=p,h=j(),r=c("div"),b=c("div"),I=B(N),E=j(),L=c("div"),L.textContent=m,T=j(),S=c("div"),Q=c("div"),R=B(z),F=j(),A=c("div"),A.textContent=J,W=j(),k=c("div"),M=c("div"),Ie=B(le),Z=j(),P=c("div"),P.textContent=pe,be=j(),he=c("div"),ve=c("div"),X=c("div"),re=c("div"),De=c("input"),G=j(),se=c("span"),se.textContent=Ne,Ve=j(),oe=c("div"),ae=c("select"),_e=c("option"),_e.textContent=x,H=c("option"),H.textContent=$,O=c("option"),O.textContent=Ae,Ce=c("option"),Ce.textContent=C,Y=c("option"),Y.textContent=ke,me=c("option"),me.textContent=V,y=j(),ge=c("select"),Te=c("option"),Te.textContent=ce,we=c("option"),we.textContent=Se,Ee=c("option"),Ee.textContent=w,D=j(),ee=c("div"),ie=c("button"),ie.textContent=fe,te=j(),q=c("button"),q.textContent=Re,Ue=j(),Oe.c(),Fe=rt(),this.h()},l(de){e=o(de,"DIV",{class:!0});var ue=u(e);t=o(ue,"DIV",{class:!0});var Je=u(t);l=o(Je,"DIV",{class:!0});var Ke=u(l);_=U(Ke,i),Ke.forEach(f),d=g(Je),v=o(Je,"DIV",{class:!0,"data-svelte-h":!0}),K(v)!=="svelte-1hibunz"&&(v.textContent=p),Je.forEach(f),h=g(ue),r=o(ue,"DIV",{class:!0});var ot=u(r);b=o(ot,"DIV",{class:!0});var ct=u(b);I=U(ct,N),ct.forEach(f),E=g(ot),L=o(ot,"DIV",{class:!0,"data-svelte-h":!0}),K(L)!=="svelte-f5o8l1"&&(L.textContent=m),ot.forEach(f),T=g(ue),S=o(ue,"DIV",{class:!0});var ft=u(S);Q=o(ft,"DIV",{class:!0});var Ft=u(Q);R=U(Ft,z),Ft.forEach(f),F=g(ft),A=o(ft,"DIV",{class:!0,"data-svelte-h":!0}),K(A)!=="svelte-tr0ren"&&(A.textContent=J),ft.forEach(f),W=g(ue),k=o(ue,"DIV",{class:!0});var gt=u(k);M=o(gt,"DIV",{class:!0});var Ht=u(M);Ie=U(Ht,le),Ht.forEach(f),Z=g(gt),P=o(gt,"DIV",{class:!0,"data-svelte-h":!0}),K(P)!=="svelte-17bwv35"&&(P.textContent=pe),gt.forEach(f),ue.forEach(f),be=g(de),he=o(de,"DIV",{class:!0});var qt=u(he);ve=o(qt,"DIV",{class:!0});var jt=u(ve);X=o(jt,"DIV",{class:!0});var Dt=u(X);re=o(Dt,"DIV",{class:!0});var Ct=u(re);De=o(Ct,"INPUT",{type:!0,placeholder:!0,class:!0}),G=g(Ct),se=o(Ct,"SPAN",{class:!0,"data-svelte-h":!0}),K(se)!=="svelte-k77c2d"&&(se.textContent=Ne),Ct.forEach(f),Ve=g(Dt),oe=o(Dt,"DIV",{class:!0});var Et=u(oe);ae=o(Et,"SELECT",{class:!0});var dt=u(ae);_e=o(dt,"OPTION",{"data-svelte-h":!0}),K(_e)!=="svelte-1yhiy9v"&&(_e.textContent=x),H=o(dt,"OPTION",{"data-svelte-h":!0}),K(H)!=="svelte-xw71ah"&&(H.textContent=$),O=o(dt,"OPTION",{"data-svelte-h":!0}),K(O)!=="svelte-1d6zxy4"&&(O.textContent=Ae),Ce=o(dt,"OPTION",{"data-svelte-h":!0}),K(Ce)!=="svelte-1396dfq"&&(Ce.textContent=C),Y=o(dt,"OPTION",{"data-svelte-h":!0}),K(Y)!=="svelte-1ilnw31"&&(Y.textContent=ke),me=o(dt,"OPTION",{"data-svelte-h":!0}),K(me)!=="svelte-1ytkx31"&&(me.textContent=V),dt.forEach(f),y=g(Et),ge=o(Et,"SELECT",{class:!0});var kt=u(ge);Te=o(kt,"OPTION",{"data-svelte-h":!0}),K(Te)!=="svelte-1owtbcz"&&(Te.textContent=ce),we=o(kt,"OPTION",{"data-svelte-h":!0}),K(we)!=="svelte-2zb8tj"&&(we.textContent=Se),Ee=o(kt,"OPTION",{"data-svelte-h":!0}),K(Ee)!=="svelte-1qfbg34"&&(Ee.textContent=w),kt.forEach(f),Et.forEach(f),Dt.forEach(f),D=g(jt),ee=o(jt,"DIV",{class:!0});var It=u(ee);ie=o(It,"BUTTON",{class:!0,"data-svelte-h":!0}),K(ie)!=="svelte-1jwpt44"&&(ie.textContent=fe),te=g(It),q=o(It,"BUTTON",{class:!0,"data-svelte-h":!0}),K(q)!=="svelte-1gs4miv"&&(q.textContent=Re),It.forEach(f),jt.forEach(f),qt.forEach(f),Ue=g(de),Oe.l(de),Fe=rt(),this.h()},h(){n(l,"class","stat-value svelte-jfip4b"),n(v,"class","stat-label svelte-jfip4b"),n(t,"class","stat-card orange svelte-jfip4b"),n(b,"class","stat-value svelte-jfip4b"),n(L,"class","stat-label svelte-jfip4b"),n(r,"class","stat-card blue svelte-jfip4b"),n(Q,"class","stat-value svelte-jfip4b"),n(A,"class","stat-label svelte-jfip4b"),n(S,"class","stat-card green svelte-jfip4b"),n(M,"class","stat-value svelte-jfip4b"),n(P,"class","stat-label svelte-jfip4b"),n(k,"class","stat-card red svelte-jfip4b"),n(e,"class","stats-grid svelte-jfip4b"),n(De,"type","text"),n(De,"placeholder","Search members..."),n(De,"class","svelte-jfip4b"),n(se,"class","search-icon svelte-jfip4b"),n(re,"class","search-box svelte-jfip4b"),_e.__value="all",Be(_e,_e.__value),H.__value="president",Be(H,H.__value),O.__value="vice_president",Be(O,O.__value),Ce.__value="competition_director",Be(Ce,Ce.__value),Y.__value="officer",Be(Y,Y.__value),me.__value="member",Be(me,me.__value),n(ae,"class","filter-select svelte-jfip4b"),s[22]===void 0&&St(()=>s[37].call(ae)),Te.__value="all",Be(Te,Te.__value),we.__value="active",Be(we,we.__value),Ee.__value="inactive",Be(Ee,Ee.__value),n(ge,"class","filter-select svelte-jfip4b"),s[23]===void 0&&St(()=>s[38].call(ge)),n(oe,"class","filters-row svelte-jfip4b"),n(X,"class","filters-group svelte-jfip4b"),n(ie,"class","reset-button svelte-jfip4b"),n(q,"class","export-button svelte-jfip4b"),n(ee,"class","action-buttons svelte-jfip4b"),n(ve,"class","controls-container svelte-jfip4b"),n(he,"class","controls-section svelte-jfip4b")},m(de,ue){je(de,e,ue),a(e,t),a(t,l),a(l,_),a(t,d),a(t,v),a(e,h),a(e,r),a(r,b),a(b,I),a(r,E),a(r,L),a(e,T),a(e,S),a(S,Q),a(Q,R),a(S,F),a(S,A),a(e,W),a(e,k),a(k,M),a(M,Ie),a(k,Z),a(k,P),je(de,be,ue),je(de,he,ue),a(he,ve),a(ve,X),a(X,re),a(re,De),Be(De,s[21]),a(re,G),a(re,se),a(X,Ve),a(X,oe),a(oe,ae),a(ae,_e),a(ae,H),a(ae,O),a(ae,Ce),a(ae,Y),a(ae,me),pt(ae,s[22],!0),a(oe,y),a(oe,ge),a(ge,Te),a(ge,we),a(ge,Ee),pt(ge,s[23],!0),a(ve,D),a(ve,ee),a(ee,ie),a(ee,te),a(ee,q),je(de,Ue,ue),Le[Pe].m(de,ue),je(de,Fe,ue),Me=!0,ze||(Ye=[ye(De,"input",s[36]),ye(ae,"change",s[37]),ye(ge,"change",s[38]),ye(ie,"click",s[39]),ye(q,"click",s[30])],ze=!0)},p(de,ue){(!Me||ue[0]&1048576)&&i!==(i=de[20].totalMembers+"")&&ne(_,i),(!Me||ue[0]&1048576)&&N!==(N=de[20].totalOfficers+"")&&ne(I,N),(!Me||ue[0]&1048576)&&z!==(z=de[20].activeMembers+"")&&ne(R,z),(!Me||ue[0]&1048576)&&le!==(le=de[20].avgPointsPerMember+"")&&ne(Ie,le),ue[0]&2097152&&De.value!==de[21]&&Be(De,de[21]),ue[0]&4194304&&pt(ae,de[22]),ue[0]&8388608&&pt(ge,de[23]);let Je=Pe;Pe=He(de),Pe===Je?Le[Pe].p(de,ue):(Rt(),qe(Le[Je],1,1,()=>{Le[Je]=null}),Ut(),Oe=Le[Pe],Oe?Oe.p(de,ue):(Oe=Le[Pe]=Ge[Pe](de),Oe.c()),Ze(Oe,1),Oe.m(Fe.parentNode,Fe))},i(de){Me||(Ze(Oe),Me=!0)},o(de){qe(Oe),Me=!1},d(de){de&&(f(e),f(be),f(he),f(Ue),f(Fe)),Le[Pe].d(de),ze=!1,bt(Ye)}}}function Dl(s){let e,t;return e=new Nt({props:{icon:"❌",title:"Error loading members",message:s[19],$$slots:{default:[Ml]},$$scope:{ctx:s}}}),{c(){lt(e.$$.fragment)},l(l){tt(e.$$.fragment,l)},m(l,i){et(e,l,i),t=!0},p(l,i){const _={};i[0]&524288&&(_.message=l[19]),i[2]&2048&&(_.$$scope={dirty:i,ctx:l}),e.$set(_)},i(l){t||(Ze(e.$$.fragment,l),t=!0)},o(l){qe(e.$$.fragment,l),t=!1},d(l){xe(e,l)}}}function Cl(s){let e,t;return e=new _l({props:{message:"Loading members..."}}),{c(){lt(e.$$.fragment)},l(l){tt(e.$$.fragment,l)},m(l,i){et(e,l,i),t=!0},p:vt,i(l){t||(Ze(e.$$.fragment,l),t=!0)},o(l){qe(e.$$.fragment,l),t=!1},d(l){xe(e,l)}}}function El(s){let e,t,l,i,_='<tr class="svelte-jfip4b"><th class="svelte-jfip4b">Member</th> <th class="svelte-jfip4b">Role</th> <th class="svelte-jfip4b">Points</th> <th class="svelte-jfip4b">Activity</th> <th class="svelte-jfip4b">Joined</th> <th class="svelte-jfip4b">Actions</th></tr>',d,v,p,h,r=it(s[24]),b=[];for(let E=0;E<r.length;E+=1)b[E]=Kt(Yt(s,r,E));let N=it(s[24]),I=[];for(let E=0;E<N.length;E+=1)I[E]=Wt(Jt(s,N,E));return{c(){e=c("div"),t=c("div"),l=c("table"),i=c("thead"),i.innerHTML=_,d=j(),v=c("tbody");for(let E=0;E<b.length;E+=1)b[E].c();p=j(),h=c("div");for(let E=0;E<I.length;E+=1)I[E].c();this.h()},l(E){e=o(E,"DIV",{class:!0});var L=u(e);t=o(L,"DIV",{class:!0});var m=u(t);l=o(m,"TABLE",{class:!0});var T=u(l);i=o(T,"THEAD",{"data-svelte-h":!0}),K(i)!=="svelte-lp0521"&&(i.innerHTML=_),d=g(T),v=o(T,"TBODY",{});var S=u(v);for(let z=0;z<b.length;z+=1)b[z].l(S);S.forEach(f),T.forEach(f),m.forEach(f),p=g(L),h=o(L,"DIV",{class:!0});var Q=u(h);for(let z=0;z<I.length;z+=1)I[z].l(Q);Q.forEach(f),L.forEach(f),this.h()},h(){n(l,"class","members-table svelte-jfip4b"),n(t,"class","desktop-table svelte-jfip4b"),n(h,"class","mobile-cards svelte-jfip4b"),n(e,"class","members-container svelte-jfip4b")},m(E,L){je(E,e,L),a(e,t),a(t,l),a(l,i),a(l,d),a(l,v);for(let m=0;m<b.length;m+=1)b[m]&&b[m].m(v,null);a(e,p),a(e,h);for(let m=0;m<I.length;m+=1)I[m]&&I[m].m(h,null)},p(E,L){if(L[0]&251691009){r=it(E[24]);let m;for(m=0;m<r.length;m+=1){const T=Yt(E,r,m);b[m]?b[m].p(T,L):(b[m]=Kt(T),b[m].c(),b[m].m(v,null))}for(;m<b.length;m+=1)b[m].d(1);b.length=r.length}if(L[0]&251691009){N=it(E[24]);let m;for(m=0;m<N.length;m+=1){const T=Jt(E,N,m);I[m]?I[m].p(T,L):(I[m]=Wt(T),I[m].c(),I[m].m(h,null))}for(;m<I.length;m+=1)I[m].d(1);I.length=N.length}},i:vt,o:vt,d(E){E&&f(e),Vt(b,E),Vt(I,E)}}}function kl(s){let e,t;return e=new Nt({props:{icon:"👥",title:"No members yet",message:"Members will appear here once they join the club"}}),{c(){lt(e.$$.fragment)},l(l){tt(e.$$.fragment,l)},m(l,i){et(e,l,i),t=!0},p:vt,i(l){t||(Ze(e.$$.fragment,l),t=!0)},o(l){qe(e.$$.fragment,l),t=!1},d(l){xe(e,l)}}}function Il(s){let e,t;return e=new Nt({props:{icon:"🔍",title:"No members found",message:"Try adjusting your search or filter criteria",$$slots:{default:[Tl]},$$scope:{ctx:s}}}),{c(){lt(e.$$.fragment)},l(l){tt(e.$$.fragment,l)},m(l,i){et(e,l,i),t=!0},p(l,i){const _={};i[2]&2048&&(_.$$scope={dirty:i,ctx:l}),e.$set(_)},i(l){t||(Ze(e.$$.fragment,l),t=!0)},o(l){qe(e.$$.fragment,l),t=!1},d(l){xe(e,l)}}}function Gt(s){let e,t="✏️ Edit",l,i,_="⚡ Manage Role",d,v;function p(){return s[42](s[68])}function h(){return s[43](s[68])}return{c(){e=c("button"),e.textContent=t,l=j(),i=c("button"),i.textContent=_,this.h()},l(r){e=o(r,"BUTTON",{class:!0,"data-svelte-h":!0}),K(e)!=="svelte-xmamfm"&&(e.textContent=t),l=g(r),i=o(r,"BUTTON",{class:!0,"data-svelte-h":!0}),K(i)!=="svelte-1c3vnl5"&&(i.textContent=_),this.h()},h(){n(e,"class","edit-button svelte-jfip4b"),n(i,"class","manage-button svelte-jfip4b")},m(r,b){je(r,e,b),je(r,l,b),je(r,i,b),d||(v=[ye(e,"click",p),ye(i,"click",h)],d=!0)},p(r,b){s=r},d(r){r&&(f(e),f(l),f(i)),d=!1,bt(v)}}}function Kt(s){var we,Se;let e,t,l,i,_=(((we=s[68].name)==null?void 0:we.charAt(0))||"?")+"",d,v,p,h,r=s[68].name+"",b,N,I,E=s[68].email+"",L,m,T,S,Q=$e(s[68].role)+"",z,R,F,A,J,W,k=s[68].total_points+"",M,le,Ie,Z,P=s[68].monthly_points+"",pe,be,he,ve,X,re,De=nt(s[68])==="active"?"✅ Active":"💤 Inactive",G,se,Ne,Ve,oe,ae=Xe(s[68].last_submission_date)+"",_e,x,H,$=Xe(s[68].join_date)+"",O,Ae,Ce,C,Y,ke="👁️ View",me,V,y,ge;function Te(){return s[41](s[68])}let ce=s[15]&&s[68].id!==((Se=s[0])==null?void 0:Se.id)&&Gt(s);return{c(){e=c("tr"),t=c("td"),l=c("div"),i=c("div"),d=B(_),v=j(),p=c("div"),h=c("div"),b=B(r),N=j(),I=c("div"),L=B(E),m=j(),T=c("td"),S=c("span"),z=B(Q),F=j(),A=c("td"),J=c("div"),W=c("div"),M=B(k),le=B(" total"),Ie=j(),Z=c("div"),pe=B(P),be=B(" this month"),he=j(),ve=c("td"),X=c("div"),re=c("span"),G=B(De),Ne=j(),Ve=c("div"),oe=B("Last: "),_e=B(ae),x=j(),H=c("td"),O=B($),Ae=j(),Ce=c("td"),C=c("div"),Y=c("button"),Y.textContent=ke,me=j(),ce&&ce.c(),V=j(),this.h()},l(Ee){e=o(Ee,"TR",{class:!0});var w=u(e);t=o(w,"TD",{class:!0});var D=u(t);l=o(D,"DIV",{class:!0});var ee=u(l);i=o(ee,"DIV",{class:!0});var ie=u(i);d=U(ie,_),ie.forEach(f),v=g(ee),p=o(ee,"DIV",{class:!0});var fe=u(p);h=o(fe,"DIV",{class:!0});var te=u(h);b=U(te,r),te.forEach(f),N=g(fe),I=o(fe,"DIV",{class:!0});var q=u(I);L=U(q,E),q.forEach(f),fe.forEach(f),ee.forEach(f),D.forEach(f),m=g(w),T=o(w,"TD",{class:!0});var Re=u(T);S=o(Re,"SPAN",{class:!0});var Ue=u(S);z=U(Ue,Q),Ue.forEach(f),Re.forEach(f),F=g(w),A=o(w,"TD",{class:!0});var Pe=u(A);J=o(Pe,"DIV",{class:!0});var Oe=u(J);W=o(Oe,"DIV",{class:!0});var Fe=u(W);M=U(Fe,k),le=U(Fe," total"),Fe.forEach(f),Ie=g(Oe),Z=o(Oe,"DIV",{class:!0});var Me=u(Z);pe=U(Me,P),be=U(Me," this month"),Me.forEach(f),Oe.forEach(f),Pe.forEach(f),he=g(w),ve=o(w,"TD",{class:!0});var ze=u(ve);X=o(ze,"DIV",{class:!0});var Ye=u(X);re=o(Ye,"SPAN",{class:!0});var Ge=u(re);G=U(Ge,De),Ge.forEach(f),Ne=g(Ye),Ve=o(Ye,"DIV",{class:!0});var Le=u(Ve);oe=U(Le,"Last: "),_e=U(Le,ae),Le.forEach(f),Ye.forEach(f),ze.forEach(f),x=g(w),H=o(w,"TD",{class:!0});var He=u(H);O=U(He,$),He.forEach(f),Ae=g(w),Ce=o(w,"TD",{class:!0});var de=u(Ce);C=o(de,"DIV",{class:!0});var ue=u(C);Y=o(ue,"BUTTON",{class:!0,"data-svelte-h":!0}),K(Y)!=="svelte-1sz26si"&&(Y.textContent=ke),me=g(ue),ce&&ce.l(ue),ue.forEach(f),de.forEach(f),V=g(w),w.forEach(f),this.h()},h(){n(i,"class","member-avatar svelte-jfip4b"),n(h,"class","member-name svelte-jfip4b"),n(I,"class","member-email svelte-jfip4b"),n(p,"class","member-details svelte-jfip4b"),n(l,"class","member-info svelte-jfip4b"),n(t,"class","svelte-jfip4b"),n(S,"class",R="role-badge "+s[68].role+" svelte-jfip4b"),n(T,"class","svelte-jfip4b"),n(W,"class","total-points svelte-jfip4b"),n(Z,"class","monthly-points svelte-jfip4b"),n(J,"class","points-info svelte-jfip4b"),n(A,"class","svelte-jfip4b"),n(re,"class",se="activity-badge "+nt(s[68])+" svelte-jfip4b"),n(Ve,"class","last-activity svelte-jfip4b"),n(X,"class","activity-info svelte-jfip4b"),n(ve,"class","svelte-jfip4b"),n(H,"class","join-date svelte-jfip4b"),n(Y,"class","view-button svelte-jfip4b"),n(C,"class","action-buttons-cell svelte-jfip4b"),n(Ce,"class","svelte-jfip4b"),n(e,"class","svelte-jfip4b")},m(Ee,w){je(Ee,e,w),a(e,t),a(t,l),a(l,i),a(i,d),a(l,v),a(l,p),a(p,h),a(h,b),a(p,N),a(p,I),a(I,L),a(e,m),a(e,T),a(T,S),a(S,z),a(e,F),a(e,A),a(A,J),a(J,W),a(W,M),a(W,le),a(J,Ie),a(J,Z),a(Z,pe),a(Z,be),a(e,he),a(e,ve),a(ve,X),a(X,re),a(re,G),a(X,Ne),a(X,Ve),a(Ve,oe),a(Ve,_e),a(e,x),a(e,H),a(H,O),a(e,Ae),a(e,Ce),a(Ce,C),a(C,Y),a(C,me),ce&&ce.m(C,null),a(e,V),y||(ge=ye(Y,"click",Te),y=!0)},p(Ee,w){var D,ee;s=Ee,w[0]&16777216&&_!==(_=(((D=s[68].name)==null?void 0:D.charAt(0))||"?")+"")&&ne(d,_),w[0]&16777216&&r!==(r=s[68].name+"")&&ne(b,r),w[0]&16777216&&E!==(E=s[68].email+"")&&ne(L,E),w[0]&16777216&&Q!==(Q=$e(s[68].role)+"")&&ne(z,Q),w[0]&16777216&&R!==(R="role-badge "+s[68].role+" svelte-jfip4b")&&n(S,"class",R),w[0]&16777216&&k!==(k=s[68].total_points+"")&&ne(M,k),w[0]&16777216&&P!==(P=s[68].monthly_points+"")&&ne(pe,P),w[0]&16777216&&De!==(De=nt(s[68])==="active"?"✅ Active":"💤 Inactive")&&ne(G,De),w[0]&16777216&&se!==(se="activity-badge "+nt(s[68])+" svelte-jfip4b")&&n(re,"class",se),w[0]&16777216&&ae!==(ae=Xe(s[68].last_submission_date)+"")&&ne(_e,ae),w[0]&16777216&&$!==($=Xe(s[68].join_date)+"")&&ne(O,$),s[15]&&s[68].id!==((ee=s[0])==null?void 0:ee.id)?ce?ce.p(s,w):(ce=Gt(s),ce.c(),ce.m(C,null)):ce&&(ce.d(1),ce=null)},d(Ee){Ee&&f(e),ce&&ce.d(),y=!1,ge()}}}function Qt(s){let e,t="✏️ Edit",l,i,_="⚡ Manage Role",d,v;function p(){return s[45](s[68])}function h(){return s[46](s[68])}return{c(){e=c("button"),e.textContent=t,l=j(),i=c("button"),i.textContent=_,this.h()},l(r){e=o(r,"BUTTON",{class:!0,"data-svelte-h":!0}),K(e)!=="svelte-16diln"&&(e.textContent=t),l=g(r),i=o(r,"BUTTON",{class:!0,"data-svelte-h":!0}),K(i)!=="svelte-13uun4"&&(i.textContent=_),this.h()},h(){n(e,"class","edit-button-mobile svelte-jfip4b"),n(i,"class","manage-button-mobile svelte-jfip4b")},m(r,b){je(r,e,b),je(r,l,b),je(r,i,b),d||(v=[ye(e,"click",p),ye(i,"click",h)],d=!0)},p(r,b){s=r},d(r){r&&(f(e),f(l),f(i)),d=!1,bt(v)}}}function Wt(s){var D,ee;let e,t,l,i,_=(((D=s[68].name)==null?void 0:D.charAt(0))||"?")+"",d,v,p,h,r=s[68].name+"",b,N,I,E=s[68].email+"",L,m,T,S=$e(s[68].role)+"",Q,z,R,F,A,J,W="Total Points",k,M,le=s[68].total_points+"",Ie,Z,P,pe,be="Monthly Points",he,ve,X=s[68].monthly_points+"",re,De,G,se,Ne="Activity",Ve,oe,ae=nt(s[68])==="active"?"✅ Active":"💤 Inactive",_e,x,H,$,O,Ae="Joined",Ce,C,Y=Xe(s[68].join_date)+"",ke,me,V,y,ge="👁️ View Details",Te,ce,we,Se;function Ee(){return s[44](s[68])}let w=s[15]&&s[68].id!==((ee=s[0])==null?void 0:ee.id)&&Qt(s);return{c(){e=c("div"),t=c("div"),l=c("div"),i=c("div"),d=B(_),v=j(),p=c("div"),h=c("div"),b=B(r),N=j(),I=c("div"),L=B(E),m=j(),T=c("span"),Q=B(S),R=j(),F=c("div"),A=c("div"),J=c("span"),J.textContent=W,k=j(),M=c("span"),Ie=B(le),Z=j(),P=c("div"),pe=c("span"),pe.textContent=be,he=j(),ve=c("span"),re=B(X),De=j(),G=c("div"),se=c("span"),se.textContent=Ne,Ve=j(),oe=c("span"),_e=B(ae),H=j(),$=c("div"),O=c("span"),O.textContent=Ae,Ce=j(),C=c("span"),ke=B(Y),me=j(),V=c("div"),y=c("button"),y.textContent=ge,Te=j(),w&&w.c(),ce=j(),this.h()},l(ie){e=o(ie,"DIV",{class:!0});var fe=u(e);t=o(fe,"DIV",{class:!0});var te=u(t);l=o(te,"DIV",{class:!0});var q=u(l);i=o(q,"DIV",{class:!0});var Re=u(i);d=U(Re,_),Re.forEach(f),v=g(q),p=o(q,"DIV",{class:!0});var Ue=u(p);h=o(Ue,"DIV",{class:!0});var Pe=u(h);b=U(Pe,r),Pe.forEach(f),N=g(Ue),I=o(Ue,"DIV",{class:!0});var Oe=u(I);L=U(Oe,E),Oe.forEach(f),Ue.forEach(f),q.forEach(f),m=g(te),T=o(te,"SPAN",{class:!0});var Fe=u(T);Q=U(Fe,S),Fe.forEach(f),te.forEach(f),R=g(fe),F=o(fe,"DIV",{class:!0});var Me=u(F);A=o(Me,"DIV",{class:!0});var ze=u(A);J=o(ze,"SPAN",{class:!0,"data-svelte-h":!0}),K(J)!=="svelte-1a7g9it"&&(J.textContent=W),k=g(ze),M=o(ze,"SPAN",{class:!0});var Ye=u(M);Ie=U(Ye,le),Ye.forEach(f),ze.forEach(f),Z=g(Me),P=o(Me,"DIV",{class:!0});var Ge=u(P);pe=o(Ge,"SPAN",{class:!0,"data-svelte-h":!0}),K(pe)!=="svelte-1sei53m"&&(pe.textContent=be),he=g(Ge),ve=o(Ge,"SPAN",{class:!0});var Le=u(ve);re=U(Le,X),Le.forEach(f),Ge.forEach(f),De=g(Me),G=o(Me,"DIV",{class:!0});var He=u(G);se=o(He,"SPAN",{class:!0,"data-svelte-h":!0}),K(se)!=="svelte-1uiknbp"&&(se.textContent=Ne),Ve=g(He),oe=o(He,"SPAN",{class:!0});var de=u(oe);_e=U(de,ae),de.forEach(f),He.forEach(f),H=g(Me),$=o(Me,"DIV",{class:!0});var ue=u($);O=o(ue,"SPAN",{class:!0,"data-svelte-h":!0}),K(O)!=="svelte-5capsd"&&(O.textContent=Ae),Ce=g(ue),C=o(ue,"SPAN",{class:!0});var Je=u(C);ke=U(Je,Y),Je.forEach(f),ue.forEach(f),Me.forEach(f),me=g(fe),V=o(fe,"DIV",{class:!0});var Ke=u(V);y=o(Ke,"BUTTON",{class:!0,"data-svelte-h":!0}),K(y)!=="svelte-ytkdkd"&&(y.textContent=ge),Te=g(Ke),w&&w.l(Ke),Ke.forEach(f),ce=g(fe),fe.forEach(f),this.h()},h(){n(i,"class","member-avatar svelte-jfip4b"),n(h,"class","member-name svelte-jfip4b"),n(I,"class","member-email svelte-jfip4b"),n(p,"class","member-details svelte-jfip4b"),n(l,"class","member-info svelte-jfip4b"),n(T,"class",z="role-badge "+s[68].role+" svelte-jfip4b"),n(t,"class","card-header svelte-jfip4b"),n(J,"class","stat-label svelte-jfip4b"),n(M,"class","stat-value svelte-jfip4b"),n(A,"class","stat-item svelte-jfip4b"),n(pe,"class","stat-label svelte-jfip4b"),n(ve,"class","stat-value svelte-jfip4b"),n(P,"class","stat-item svelte-jfip4b"),n(se,"class","stat-label svelte-jfip4b"),n(oe,"class",x="activity-badge "+nt(s[68])+" svelte-jfip4b"),n(G,"class","stat-item svelte-jfip4b"),n(O,"class","stat-label svelte-jfip4b"),n(C,"class","stat-value svelte-jfip4b"),n($,"class","stat-item svelte-jfip4b"),n(F,"class","card-stats svelte-jfip4b"),n(y,"class","view-button-mobile svelte-jfip4b"),n(V,"class","card-actions svelte-jfip4b"),n(e,"class","member-card svelte-jfip4b")},m(ie,fe){je(ie,e,fe),a(e,t),a(t,l),a(l,i),a(i,d),a(l,v),a(l,p),a(p,h),a(h,b),a(p,N),a(p,I),a(I,L),a(t,m),a(t,T),a(T,Q),a(e,R),a(e,F),a(F,A),a(A,J),a(A,k),a(A,M),a(M,Ie),a(F,Z),a(F,P),a(P,pe),a(P,he),a(P,ve),a(ve,re),a(F,De),a(F,G),a(G,se),a(G,Ve),a(G,oe),a(oe,_e),a(F,H),a(F,$),a($,O),a($,Ce),a($,C),a(C,ke),a(e,me),a(e,V),a(V,y),a(V,Te),w&&w.m(V,null),a(e,ce),we||(Se=ye(y,"click",Ee),we=!0)},p(ie,fe){var te,q;s=ie,fe[0]&16777216&&_!==(_=(((te=s[68].name)==null?void 0:te.charAt(0))||"?")+"")&&ne(d,_),fe[0]&16777216&&r!==(r=s[68].name+"")&&ne(b,r),fe[0]&16777216&&E!==(E=s[68].email+"")&&ne(L,E),fe[0]&16777216&&S!==(S=$e(s[68].role)+"")&&ne(Q,S),fe[0]&16777216&&z!==(z="role-badge "+s[68].role+" svelte-jfip4b")&&n(T,"class",z),fe[0]&16777216&&le!==(le=s[68].total_points+"")&&ne(Ie,le),fe[0]&16777216&&X!==(X=s[68].monthly_points+"")&&ne(re,X),fe[0]&16777216&&ae!==(ae=nt(s[68])==="active"?"✅ Active":"💤 Inactive")&&ne(_e,ae),fe[0]&16777216&&x!==(x="activity-badge "+nt(s[68])+" svelte-jfip4b")&&n(oe,"class",x),fe[0]&16777216&&Y!==(Y=Xe(s[68].join_date)+"")&&ne(ke,Y),s[15]&&s[68].id!==((q=s[0])==null?void 0:q.id)?w?w.p(s,fe):(w=Qt(s),w.c(),w.m(V,null)):w&&(w.d(1),w=null)},d(ie){ie&&f(e),w&&w.d(),we=!1,Se()}}}function Vl(s){let e;return{c(){e=B("Clear Filters")},l(t){e=U(t,"Clear Filters")},m(t,l){je(t,e,l)},d(t){t&&f(e)}}}function Tl(s){let e,t;return e=new il({props:{variant:"secondary",$$slots:{default:[Vl]},$$scope:{ctx:s}}}),e.$on("click",s[40]),{c(){lt(e.$$.fragment)},l(l){tt(e.$$.fragment,l)},m(l,i){et(e,l,i),t=!0},p(l,i){const _={};i[2]&2048&&(_.$$scope={dirty:i,ctx:l}),e.$set(_)},i(l){t||(Ze(e.$$.fragment,l),t=!0)},o(l){qe(e.$$.fragment,l),t=!1},d(l){xe(e,l)}}}function wl(s){let e;return{c(){e=B("🔄 Try Again")},l(t){e=U(t,"🔄 Try Again")},m(t,l){je(t,e,l)},d(t){t&&f(e)}}}function Ml(s){let e,t;return e=new il({props:{variant:"secondary",$$slots:{default:[wl]},$$scope:{ctx:s}}}),e.$on("click",s[35]),{c(){lt(e.$$.fragment)},l(l){tt(e.$$.fragment,l)},m(l,i){et(e,l,i),t=!0},p(l,i){const _={};i[2]&2048&&(_.$$scope={dirty:i,ctx:l}),e.$set(_)},i(l){t||(Ze(e.$$.fragment,l),t=!0)},o(l){qe(e.$$.fragment,l),t=!1},d(l){xe(e,l)}}}function yl(s){let e,t,l,i;const _=[gl,ml],d=[];function v(p,h){return p[14]?1:0}return e=v(s),t=d[e]=_[e](s),{c(){t.c(),l=rt()},l(p){t.l(p),l=rt()},m(p,h){d[e].m(p,h),je(p,l,h),i=!0},p(p,h){let r=e;e=v(p),e===r?d[e].p(p,h):(Rt(),qe(d[r],1,1,()=>{d[r]=null}),Ut(),t=d[e],t?t.p(p,h):(t=d[e]=_[e](p),t.c()),Ze(t,1),t.m(l.parentNode,l))},i(p){i||(Ze(t),i=!0)},o(p){qe(t),i=!1},d(p){p&&f(l),d[e].d(p)}}}function Xt(s){var fe;let e,t,l,i,_="Member Details",d,v,p="✕",h,r,b,N,I=(((fe=s[1].name)==null?void 0:fe.charAt(0))||"?")+"",E,L,m,T,S=s[1].name+"",Q,z,R,F=s[1].email+"",A,J,W,k=$e(s[1].role)+"",M,le,Ie,Z,P,pe,be=s[1].total_points+"",he,ve,X,re="Total Points",De,G,se,Ne=s[1].monthly_points+"",Ve,oe,ae,_e="Monthly Points",x,H,$,O=s[1].total_approved_submissions+"",Ae,Ce,C,Y="Submissions",ke,me,V,y=Xe(s[1].last_submission_date).split(",")[0]+"",ge,Te,ce,we="Last Activity",Se,Ee,w;function D(te,q){var Re;if(te[12])return Al;if((Re=te[11])!=null&&Re.recentSubmissions)return Nl}let ee=D(s),ie=ee&&ee(s);return{c(){e=c("div"),t=c("div"),l=c("div"),i=c("h2"),i.textContent=_,d=j(),v=c("button"),v.textContent=p,h=j(),r=c("div"),b=c("div"),N=c("div"),E=B(I),L=j(),m=c("div"),T=c("h3"),Q=B(S),z=j(),R=c("p"),A=B(F),J=j(),W=c("span"),M=B(k),Ie=j(),Z=c("div"),P=c("div"),pe=c("div"),he=B(be),ve=j(),X=c("div"),X.textContent=re,De=j(),G=c("div"),se=c("div"),Ve=B(Ne),oe=j(),ae=c("div"),ae.textContent=_e,x=j(),H=c("div"),$=c("div"),Ae=B(O),Ce=j(),C=c("div"),C.textContent=Y,ke=j(),me=c("div"),V=c("div"),ge=B(y),Te=j(),ce=c("div"),ce.textContent=we,Se=j(),ie&&ie.c(),this.h()},l(te){e=o(te,"DIV",{class:!0});var q=u(e);t=o(q,"DIV",{class:!0});var Re=u(t);l=o(Re,"DIV",{class:!0});var Ue=u(l);i=o(Ue,"H2",{class:!0,"data-svelte-h":!0}),K(i)!=="svelte-hvtium"&&(i.textContent=_),d=g(Ue),v=o(Ue,"BUTTON",{class:!0,"data-svelte-h":!0}),K(v)!=="svelte-bqjhf3"&&(v.textContent=p),Ue.forEach(f),h=g(Re),r=o(Re,"DIV",{class:!0});var Pe=u(r);b=o(Pe,"DIV",{class:!0});var Oe=u(b);N=o(Oe,"DIV",{class:!0});var Fe=u(N);E=U(Fe,I),Fe.forEach(f),L=g(Oe),m=o(Oe,"DIV",{class:!0});var Me=u(m);T=o(Me,"H3",{class:!0});var ze=u(T);Q=U(ze,S),ze.forEach(f),z=g(Me),R=o(Me,"P",{class:!0});var Ye=u(R);A=U(Ye,F),Ye.forEach(f),J=g(Me),W=o(Me,"SPAN",{class:!0});var Ge=u(W);M=U(Ge,k),Ge.forEach(f),Me.forEach(f),Oe.forEach(f),Ie=g(Pe),Z=o(Pe,"DIV",{class:!0});var Le=u(Z);P=o(Le,"DIV",{class:!0});var He=u(P);pe=o(He,"DIV",{class:!0});var de=u(pe);he=U(de,be),de.forEach(f),ve=g(He),X=o(He,"DIV",{class:!0,"data-svelte-h":!0}),K(X)!=="svelte-tth6u3"&&(X.textContent=re),He.forEach(f),De=g(Le),G=o(Le,"DIV",{class:!0});var ue=u(G);se=o(ue,"DIV",{class:!0});var Je=u(se);Ve=U(Je,Ne),Je.forEach(f),oe=g(ue),ae=o(ue,"DIV",{class:!0,"data-svelte-h":!0}),K(ae)!=="svelte-idraae"&&(ae.textContent=_e),ue.forEach(f),x=g(Le),H=o(Le,"DIV",{class:!0});var Ke=u(H);$=o(Ke,"DIV",{class:!0});var ot=u($);Ae=U(ot,O),ot.forEach(f),Ce=g(Ke),C=o(Ke,"DIV",{class:!0,"data-svelte-h":!0}),K(C)!=="svelte-uqs8r"&&(C.textContent=Y),Ke.forEach(f),ke=g(Le),me=o(Le,"DIV",{class:!0});var ct=u(me);V=o(ct,"DIV",{class:!0});var ft=u(V);ge=U(ft,y),ft.forEach(f),Te=g(ct),ce=o(ct,"DIV",{class:!0,"data-svelte-h":!0}),K(ce)!=="svelte-jwipnv"&&(ce.textContent=we),ct.forEach(f),Le.forEach(f),Se=g(Pe),ie&&ie.l(Pe),Pe.forEach(f),Re.forEach(f),q.forEach(f),this.h()},h(){n(i,"class","svelte-jfip4b"),n(v,"class","close-button svelte-jfip4b"),n(l,"class","modal-header svelte-jfip4b"),n(N,"class","profile-avatar svelte-jfip4b"),n(T,"class","svelte-jfip4b"),n(R,"class","svelte-jfip4b"),n(W,"class",le="role-badge "+s[1].role+" svelte-jfip4b"),n(m,"class","profile-info svelte-jfip4b"),n(b,"class","member-profile svelte-jfip4b"),n(pe,"class","stat-value orange svelte-jfip4b"),n(X,"class","stat-label svelte-jfip4b"),n(P,"class","stat-item svelte-jfip4b"),n(se,"class","stat-value blue svelte-jfip4b"),n(ae,"class","stat-label svelte-jfip4b"),n(G,"class","stat-item svelte-jfip4b"),n($,"class","stat-value green svelte-jfip4b"),n(C,"class","stat-label svelte-jfip4b"),n(H,"class","stat-item svelte-jfip4b"),n(V,"class","stat-value red svelte-jfip4b"),n(ce,"class","stat-label svelte-jfip4b"),n(me,"class","stat-item svelte-jfip4b"),n(Z,"class","member-stats svelte-jfip4b"),n(r,"class","modal-body svelte-jfip4b"),n(t,"class","modal-content svelte-jfip4b"),n(e,"class","modal-backdrop svelte-jfip4b")},m(te,q){je(te,e,q),a(e,t),a(t,l),a(l,i),a(l,d),a(l,v),a(t,h),a(t,r),a(r,b),a(b,N),a(N,E),a(b,L),a(b,m),a(m,T),a(T,Q),a(m,z),a(m,R),a(R,A),a(m,J),a(m,W),a(W,M),a(r,Ie),a(r,Z),a(Z,P),a(P,pe),a(pe,he),a(P,ve),a(P,X),a(Z,De),a(Z,G),a(G,se),a(se,Ve),a(G,oe),a(G,ae),a(Z,x),a(Z,H),a(H,$),a($,Ae),a(H,Ce),a(H,C),a(Z,ke),a(Z,me),a(me,V),a(V,ge),a(me,Te),a(me,ce),a(r,Se),ie&&ie.m(r,null),Ee||(w=[ye(v,"click",s[47]),ye(t,"click",Lt(s[34])),ye(e,"click",s[48])],Ee=!0)},p(te,q){var Re;q[0]&2&&I!==(I=(((Re=te[1].name)==null?void 0:Re.charAt(0))||"?")+"")&&ne(E,I),q[0]&2&&S!==(S=te[1].name+"")&&ne(Q,S),q[0]&2&&F!==(F=te[1].email+"")&&ne(A,F),q[0]&2&&k!==(k=$e(te[1].role)+"")&&ne(M,k),q[0]&2&&le!==(le="role-badge "+te[1].role+" svelte-jfip4b")&&n(W,"class",le),q[0]&2&&be!==(be=te[1].total_points+"")&&ne(he,be),q[0]&2&&Ne!==(Ne=te[1].monthly_points+"")&&ne(Ve,Ne),q[0]&2&&O!==(O=te[1].total_approved_submissions+"")&&ne(Ae,O),q[0]&2&&y!==(y=Xe(te[1].last_submission_date).split(",")[0]+"")&&ne(ge,y),ee===(ee=D(te))&&ie?ie.p(te,q):(ie&&ie.d(1),ie=ee&&ee(te),ie&&(ie.c(),ie.m(r,null)))},d(te){te&&f(e),ie&&ie.d(),Ee=!1,bt(w)}}}function Nl(s){let e,t,l="Recent Submissions",i;function _(p,h){return p[11].recentSubmissions.length===0?Ol:Pl}let d=_(s),v=d(s);return{c(){e=c("div"),t=c("h4"),t.textContent=l,i=j(),v.c(),this.h()},l(p){e=o(p,"DIV",{class:!0});var h=u(e);t=o(h,"H4",{class:!0,"data-svelte-h":!0}),K(t)!=="svelte-99qph0"&&(t.textContent=l),i=g(h),v.l(h),h.forEach(f),this.h()},h(){n(t,"class","svelte-jfip4b"),n(e,"class","submissions-section svelte-jfip4b")},m(p,h){je(p,e,h),a(e,t),a(e,i),v.m(e,null)},p(p,h){d===(d=_(p))&&v?v.p(p,h):(v.d(1),v=d(p),v&&(v.c(),v.m(e,null)))},d(p){p&&f(e),v.d()}}}function Al(s){let e,t='<div class="spinner"></div> <p>Loading details...</p>';return{c(){e=c("div"),e.innerHTML=t,this.h()},l(l){e=o(l,"DIV",{class:!0,"data-svelte-h":!0}),K(e)!=="svelte-1c3xner"&&(e.innerHTML=t),this.h()},h(){n(e,"class","loading-state")},m(l,i){je(l,e,i)},p:vt,d(l){l&&f(e)}}}function Pl(s){let e,t=it(s[11].recentSubmissions),l=[];for(let i=0;i<t.length;i+=1)l[i]=$t(zt(s,t,i));return{c(){e=c("div");for(let i=0;i<l.length;i+=1)l[i].c();this.h()},l(i){e=o(i,"DIV",{class:!0});var _=u(e);for(let d=0;d<l.length;d+=1)l[d].l(_);_.forEach(f),this.h()},h(){n(e,"class","submissions-list svelte-jfip4b")},m(i,_){je(i,e,_);for(let d=0;d<l.length;d+=1)l[d]&&l[d].m(e,null)},p(i,_){if(_[0]&2048){t=it(i[11].recentSubmissions);let d;for(d=0;d<t.length;d+=1){const v=zt(i,t,d);l[d]?l[d].p(v,_):(l[d]=$t(v),l[d].c(),l[d].m(e,null))}for(;d<l.length;d+=1)l[d].d(1);l.length=t.length}},d(i){i&&f(e),Vt(l,i)}}}function Ol(s){let e,t="No submissions yet";return{c(){e=c("p"),e.textContent=t,this.h()},l(l){e=o(l,"P",{class:!0,"data-svelte-h":!0}),K(e)!=="svelte-1g20zqq"&&(e.textContent=t),this.h()},h(){n(e,"class","no-submissions svelte-jfip4b")},m(l,i){je(l,e,i)},p:vt,d(l){l&&f(e)}}}function $t(s){let e,t,l,i=s[65].category+"",_,d,v,p=(s[65].description||"No description")+"",h,r,b,N=Xe(s[65].submitted_at)+"",I,E,L,m,T=s[65].points+"",S,Q,z,R,F=s[65].approved?"✅ Approved":s[65].approved===!1?"❌ Rejected":"⏳ Pending",A,J,W;return{c(){e=c("div"),t=c("div"),l=c("div"),_=B(i),d=j(),v=c("div"),h=B(p),r=j(),b=c("div"),I=B(N),E=j(),L=c("div"),m=c("div"),S=B(T),Q=B(" pts"),z=j(),R=c("span"),A=B(F),W=j(),this.h()},l(k){e=o(k,"DIV",{class:!0});var M=u(e);t=o(M,"DIV",{class:!0});var le=u(t);l=o(le,"DIV",{class:!0});var Ie=u(l);_=U(Ie,i),Ie.forEach(f),d=g(le),v=o(le,"DIV",{class:!0});var Z=u(v);h=U(Z,p),Z.forEach(f),r=g(le),b=o(le,"DIV",{class:!0});var P=u(b);I=U(P,N),P.forEach(f),le.forEach(f),E=g(M),L=o(M,"DIV",{class:!0});var pe=u(L);m=o(pe,"DIV",{class:!0});var be=u(m);S=U(be,T),Q=U(be," pts"),be.forEach(f),z=g(pe),R=o(pe,"SPAN",{class:!0});var he=u(R);A=U(he,F),he.forEach(f),pe.forEach(f),W=g(M),M.forEach(f),this.h()},h(){n(l,"class","submission-category svelte-jfip4b"),n(v,"class","submission-description svelte-jfip4b"),n(b,"class","submission-date svelte-jfip4b"),n(t,"class","submission-info"),n(m,"class","submission-points svelte-jfip4b"),n(R,"class",J="status-badge "+(s[65].approved?"approved":s[65].approved===!1?"rejected":"pending")+" svelte-jfip4b"),n(L,"class","submission-status svelte-jfip4b"),n(e,"class","submission-item svelte-jfip4b")},m(k,M){je(k,e,M),a(e,t),a(t,l),a(l,_),a(t,d),a(t,v),a(v,h),a(t,r),a(t,b),a(b,I),a(e,E),a(e,L),a(L,m),a(m,S),a(m,Q),a(L,z),a(L,R),a(R,A),a(e,W)},p(k,M){M[0]&2048&&i!==(i=k[65].category+"")&&ne(_,i),M[0]&2048&&p!==(p=(k[65].description||"No description")+"")&&ne(h,p),M[0]&2048&&N!==(N=Xe(k[65].submitted_at)+"")&&ne(I,N),M[0]&2048&&T!==(T=k[65].points+"")&&ne(S,T),M[0]&2048&&F!==(F=k[65].approved?"✅ Approved":k[65].approved===!1?"❌ Rejected":"⏳ Pending")&&ne(A,F),M[0]&2048&&J!==(J="status-badge "+(k[65].approved?"approved":k[65].approved===!1?"rejected":"pending")+" svelte-jfip4b")&&n(R,"class",J)},d(k){k&&f(e)}}}function xt(s){var me;let e,t,l,i,_="Edit Member Information",d,v,p="✕",h,r,b,N,I=(((me=s[6].name)==null?void 0:me.charAt(0))||"?")+"",E,L,m,T,S=s[6].name+"",Q,z,R,F,A=$e(s[6].role)+"",J,W,k,M,le,Ie="Full Name *",Z,P,pe,be,he,ve="Email Address *",X,re,De,G,se,Ne="Phone Number",Ve,oe,ae,_e,x,H,$,O,Ae=s[13]?"⏳ Saving...":"💾 Save Changes",Ce,C,Y,ke;return{c(){e=c("div"),t=c("div"),l=c("div"),i=c("h2"),i.textContent=_,d=j(),v=c("button"),v.textContent=p,h=j(),r=c("div"),b=c("div"),N=c("div"),E=B(I),L=j(),m=c("div"),T=c("div"),Q=B(S),z=j(),R=c("div"),F=B("Currently: "),J=B(A),W=j(),k=c("div"),M=c("div"),le=c("label"),le.textContent=Ie,Z=j(),P=c("input"),pe=j(),be=c("div"),he=c("label"),he.textContent=ve,X=j(),re=c("input"),De=j(),G=c("div"),se=c("label"),se.textContent=Ne,Ve=j(),oe=c("input"),ae=j(),_e=c("div"),x=c("button"),H=B("Cancel"),$=j(),O=c("button"),Ce=B(Ae),this.h()},l(V){e=o(V,"DIV",{class:!0});var y=u(e);t=o(y,"DIV",{class:!0});var ge=u(t);l=o(ge,"DIV",{class:!0});var Te=u(l);i=o(Te,"H2",{class:!0,"data-svelte-h":!0}),K(i)!=="svelte-1lz285m"&&(i.textContent=_),d=g(Te),v=o(Te,"BUTTON",{class:!0,"data-svelte-h":!0}),K(v)!=="svelte-xne7a4"&&(v.textContent=p),Te.forEach(f),h=g(ge),r=o(ge,"DIV",{class:!0});var ce=u(r);b=o(ce,"DIV",{class:!0});var we=u(b);N=o(we,"DIV",{class:!0});var Se=u(N);E=U(Se,I),Se.forEach(f),L=g(we),m=o(we,"DIV",{class:!0});var Ee=u(m);T=o(Ee,"DIV",{class:!0});var w=u(T);Q=U(w,S),w.forEach(f),z=g(Ee),R=o(Ee,"DIV",{class:!0});var D=u(R);F=U(D,"Currently: "),J=U(D,A),D.forEach(f),Ee.forEach(f),we.forEach(f),W=g(ce),k=o(ce,"DIV",{class:!0});var ee=u(k);M=o(ee,"DIV",{class:!0});var ie=u(M);le=o(ie,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),K(le)!=="svelte-tqqy4r"&&(le.textContent=Ie),Z=g(ie),P=o(ie,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),ie.forEach(f),pe=g(ee),be=o(ee,"DIV",{class:!0});var fe=u(be);he=o(fe,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),K(he)!=="svelte-1hqh4o"&&(he.textContent=ve),X=g(fe),re=o(fe,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),fe.forEach(f),De=g(ee),G=o(ee,"DIV",{class:!0});var te=u(G);se=o(te,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),K(se)!=="svelte-1ylu5u5"&&(se.textContent=Ne),Ve=g(te),oe=o(te,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),te.forEach(f),ee.forEach(f),ae=g(ce),_e=o(ce,"DIV",{class:!0});var q=u(_e);x=o(q,"BUTTON",{class:!0});var Re=u(x);H=U(Re,"Cancel"),Re.forEach(f),$=g(q),O=o(q,"BUTTON",{class:!0});var Ue=u(O);Ce=U(Ue,Ae),Ue.forEach(f),q.forEach(f),ce.forEach(f),ge.forEach(f),y.forEach(f),this.h()},h(){n(i,"class","svelte-jfip4b"),n(v,"class","close-button svelte-jfip4b"),n(l,"class","modal-header svelte-jfip4b"),n(N,"class","member-avatar small svelte-jfip4b"),n(T,"class","member-name svelte-jfip4b"),n(R,"class","current-role svelte-jfip4b"),n(m,"class","member-info svelte-jfip4b"),n(b,"class","edit-member-header svelte-jfip4b"),n(le,"for","editName"),n(le,"class","svelte-jfip4b"),n(P,"id","editName"),n(P,"type","text"),n(P,"placeholder","Enter full name"),P.disabled=s[13],n(P,"class","svelte-jfip4b"),n(M,"class","form-group svelte-jfip4b"),n(he,"for","editEmail"),n(he,"class","svelte-jfip4b"),n(re,"id","editEmail"),n(re,"type","email"),n(re,"placeholder","Enter email address"),re.disabled=s[13],n(re,"class","svelte-jfip4b"),n(be,"class","form-group svelte-jfip4b"),n(se,"for","editPhone"),n(se,"class","svelte-jfip4b"),n(oe,"id","editPhone"),n(oe,"type","tel"),n(oe,"placeholder","(555) 123-4567"),oe.disabled=s[13],n(oe,"class","svelte-jfip4b"),n(G,"class","form-group svelte-jfip4b"),n(k,"class","edit-form svelte-jfip4b"),n(x,"class","cancel-button svelte-jfip4b"),x.disabled=s[13],n(O,"class","save-button svelte-jfip4b"),O.disabled=C=s[13]||!s[8].trim()||!s[10].trim(),n(_e,"class","modal-actions svelte-jfip4b"),n(r,"class","modal-body svelte-jfip4b"),n(t,"class","modal-content small svelte-jfip4b"),n(e,"class","modal-backdrop svelte-jfip4b")},m(V,y){je(V,e,y),a(e,t),a(t,l),a(l,i),a(l,d),a(l,v),a(t,h),a(t,r),a(r,b),a(b,N),a(N,E),a(b,L),a(b,m),a(m,T),a(T,Q),a(m,z),a(m,R),a(R,F),a(R,J),a(r,W),a(r,k),a(k,M),a(M,le),a(M,Z),a(M,P),Be(P,s[8]),a(k,pe),a(k,be),a(be,he),a(be,X),a(be,re),Be(re,s[10]),a(k,De),a(k,G),a(G,se),a(G,Ve),a(G,oe),Be(oe,s[9]),a(r,ae),a(r,_e),a(_e,x),a(x,H),a(_e,$),a(_e,O),a(O,Ce),Y||(ke=[ye(v,"click",s[49]),ye(P,"input",s[50]),ye(re,"input",s[51]),ye(oe,"input",s[52]),ye(x,"click",s[53]),ye(O,"click",s[29]),ye(t,"click",Lt(s[33])),ye(e,"click",s[54])],Y=!0)},p(V,y){var ge;y[0]&64&&I!==(I=(((ge=V[6].name)==null?void 0:ge.charAt(0))||"?")+"")&&ne(E,I),y[0]&64&&S!==(S=V[6].name+"")&&ne(Q,S),y[0]&64&&A!==(A=$e(V[6].role)+"")&&ne(J,A),y[0]&8192&&(P.disabled=V[13]),y[0]&256&&P.value!==V[8]&&Be(P,V[8]),y[0]&8192&&(re.disabled=V[13]),y[0]&1024&&re.value!==V[10]&&Be(re,V[10]),y[0]&8192&&(oe.disabled=V[13]),y[0]&512&&Be(oe,V[9]),y[0]&8192&&(x.disabled=V[13]),y[0]&8192&&Ae!==(Ae=V[13]?"⏳ Saving...":"💾 Save Changes")&&ne(Ce,Ae),y[0]&9472&&C!==(C=V[13]||!V[8].trim()||!V[10].trim())&&(O.disabled=C)},d(V){V&&f(e),Y=!1,bt(ke)}}}function el(s){var Ae,Ce;let e,t,l,i,_="Change Member Role",d,v,p="✕",h,r,b,N,I=(((Ae=s[5].name)==null?void 0:Ae.charAt(0))||"?")+"",E,L,m,T,S=s[5].name+"",Q,z,R,F,A=$e(s[5].role)+"",J,W,k,M,le="New Role",Ie,Z,P,pe,be,he,ve,X,re="Cancel",De,G,se=s[17]?"⏳ Updating...":"✅ Update Role",Ne,Ve,oe,ae,_e=it(s[16]),x=[];for(let C=0;C<_e.length;C+=1)x[C]=tl(Zt(s,_e,C));let H=s[7]&&ll(s),$=s[7]===s[5].role&&sl(),O=s[7]==="president"&&((Ce=s[0])==null?void 0:Ce.role)!=="president"&&al();return{c(){e=c("div"),t=c("div"),l=c("div"),i=c("h2"),i.textContent=_,d=j(),v=c("button"),v.textContent=p,h=j(),r=c("div"),b=c("div"),N=c("div"),E=B(I),L=j(),m=c("div"),T=c("div"),Q=B(S),z=j(),R=c("div"),F=B("Current: "),J=B(A),W=j(),k=c("div"),M=c("label"),M.textContent=le,Ie=j(),Z=c("select");for(let C=0;C<x.length;C+=1)x[C].c();P=j(),H&&H.c(),pe=j(),$&&$.c(),be=j(),O&&O.c(),he=j(),ve=c("div"),X=c("button"),X.textContent=re,De=j(),G=c("button"),Ne=B(se),this.h()},l(C){e=o(C,"DIV",{class:!0});var Y=u(e);t=o(Y,"DIV",{class:!0});var ke=u(t);l=o(ke,"DIV",{class:!0});var me=u(l);i=o(me,"H2",{class:!0,"data-svelte-h":!0}),K(i)!=="svelte-15jjhlg"&&(i.textContent=_),d=g(me),v=o(me,"BUTTON",{class:!0,"data-svelte-h":!0}),K(v)!=="svelte-1pait0e"&&(v.textContent=p),me.forEach(f),h=g(ke),r=o(ke,"DIV",{class:!0});var V=u(r);b=o(V,"DIV",{class:!0});var y=u(b);N=o(y,"DIV",{class:!0});var ge=u(N);E=U(ge,I),ge.forEach(f),L=g(y),m=o(y,"DIV",{class:!0});var Te=u(m);T=o(Te,"DIV",{class:!0});var ce=u(T);Q=U(ce,S),ce.forEach(f),z=g(Te),R=o(Te,"DIV",{class:!0});var we=u(R);F=U(we,"Current: "),J=U(we,A),we.forEach(f),Te.forEach(f),y.forEach(f),W=g(V),k=o(V,"DIV",{class:!0});var Se=u(k);M=o(Se,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),K(M)!=="svelte-epq0r6"&&(M.textContent=le),Ie=g(Se),Z=o(Se,"SELECT",{id:!0,class:!0});var Ee=u(Z);for(let ee=0;ee<x.length;ee+=1)x[ee].l(Ee);Ee.forEach(f),P=g(Se),H&&H.l(Se),Se.forEach(f),pe=g(V),$&&$.l(V),be=g(V),O&&O.l(V),he=g(V),ve=o(V,"DIV",{class:!0});var w=u(ve);X=o(w,"BUTTON",{class:!0,"data-svelte-h":!0}),K(X)!=="svelte-1hpcdgn"&&(X.textContent=re),De=g(w),G=o(w,"BUTTON",{class:!0});var D=u(G);Ne=U(D,se),D.forEach(f),w.forEach(f),V.forEach(f),ke.forEach(f),Y.forEach(f),this.h()},h(){var C;n(i,"class","svelte-jfip4b"),n(v,"class","close-button svelte-jfip4b"),n(l,"class","modal-header svelte-jfip4b"),n(N,"class","member-avatar small svelte-jfip4b"),n(T,"class","member-name svelte-jfip4b"),n(R,"class","current-role svelte-jfip4b"),n(m,"class","member-info svelte-jfip4b"),n(b,"class","role-change-member svelte-jfip4b"),n(M,"for","newRole"),n(M,"class","svelte-jfip4b"),n(Z,"id","newRole"),n(Z,"class","svelte-jfip4b"),s[7]===void 0&&St(()=>s[56].call(Z)),n(k,"class","role-selection svelte-jfip4b"),n(X,"class","cancel-button svelte-jfip4b"),n(G,"class","save-button svelte-jfip4b"),G.disabled=Ve=s[7]===s[5].role||s[7]==="president"&&((C=s[0])==null?void 0:C.role)!=="president"||s[17],n(ve,"class","modal-actions svelte-jfip4b"),n(r,"class","modal-body svelte-jfip4b"),n(t,"class","modal-content small svelte-jfip4b"),n(e,"class","modal-backdrop svelte-jfip4b")},m(C,Y){je(C,e,Y),a(e,t),a(t,l),a(l,i),a(l,d),a(l,v),a(t,h),a(t,r),a(r,b),a(b,N),a(N,E),a(b,L),a(b,m),a(m,T),a(T,Q),a(m,z),a(m,R),a(R,F),a(R,J),a(r,W),a(r,k),a(k,M),a(k,Ie),a(k,Z);for(let ke=0;ke<x.length;ke+=1)x[ke]&&x[ke].m(Z,null);pt(Z,s[7],!0),a(k,P),H&&H.m(k,null),a(r,pe),$&&$.m(r,null),a(r,be),O&&O.m(r,null),a(r,he),a(r,ve),a(ve,X),a(ve,De),a(ve,G),a(G,Ne),oe||(ae=[ye(v,"click",s[55]),ye(Z,"change",s[56]),ye(X,"click",s[58]),ye(G,"click",s[28]),ye(t,"click",Lt(s[32])),ye(e,"click",s[59])],oe=!0)},p(C,Y){var ke,me,V;if(Y[0]&32&&I!==(I=(((ke=C[5].name)==null?void 0:ke.charAt(0))||"?")+"")&&ne(E,I),Y[0]&32&&S!==(S=C[5].name+"")&&ne(Q,S),Y[0]&32&&A!==(A=$e(C[5].role)+"")&&ne(J,A),Y[0]&65536){_e=it(C[16]);let y;for(y=0;y<_e.length;y+=1){const ge=Zt(C,_e,y);x[y]?x[y].p(ge,Y):(x[y]=tl(ge),x[y].c(),x[y].m(Z,null))}for(;y<x.length;y+=1)x[y].d(1);x.length=_e.length}Y[0]&65664&&pt(Z,C[7]),C[7]?H?H.p(C,Y):(H=ll(C),H.c(),H.m(k,null)):H&&(H.d(1),H=null),C[7]===C[5].role?$||($=sl(),$.c(),$.m(r,be)):$&&($.d(1),$=null),C[7]==="president"&&((me=C[0])==null?void 0:me.role)!=="president"?O||(O=al(),O.c(),O.m(r,he)):O&&(O.d(1),O=null),Y[0]&131072&&se!==(se=C[17]?"⏳ Updating...":"✅ Update Role")&&ne(Ne,se),Y[0]&196769&&Ve!==(Ve=C[7]===C[5].role||C[7]==="president"&&((V=C[0])==null?void 0:V.role)!=="president"||C[17])&&(G.disabled=Ve)},d(C){C&&f(e),Vt(x,C),H&&H.d(),$&&$.d(),O&&O.d(),oe=!1,bt(ae)}}}function tl(s){let e,t=s[62].label+"",l,i;return{c(){e=c("option"),l=B(t),this.h()},l(_){e=o(_,"OPTION",{});var d=u(e);l=U(d,t),d.forEach(f),this.h()},h(){e.__value=i=s[62].value,Be(e,e.__value)},m(_,d){je(_,e,d),a(e,l)},p(_,d){d[0]&65536&&t!==(t=_[62].label+"")&&ne(l,t),d[0]&65536&&i!==(i=_[62].value)&&(e.__value=i,Be(e,e.__value))},d(_){_&&f(e)}}}function ll(s){var i;let e,t=((i=s[16].find(s[57]))==null?void 0:i.description)+"",l;return{c(){e=c("p"),l=B(t),this.h()},l(_){e=o(_,"P",{class:!0});var d=u(e);l=U(d,t),d.forEach(f),this.h()},h(){n(e,"class","role-description svelte-jfip4b")},m(_,d){je(_,e,d),a(e,l)},p(_,d){var v;d[0]&65664&&t!==(t=((v=_[16].find(_[57]))==null?void 0:v.description)+"")&&ne(l,t)},d(_){_&&f(e)}}}function sl(s){let e,t='<p class="svelte-jfip4b">⚠️ This member already has this role</p>';return{c(){e=c("div"),e.innerHTML=t,this.h()},l(l){e=o(l,"DIV",{class:!0,"data-svelte-h":!0}),K(e)!=="svelte-1cubtib"&&(e.innerHTML=t),this.h()},h(){n(e,"class","warning-message svelte-jfip4b")},m(l,i){je(l,e,i)},d(l){l&&f(e)}}}function al(s){let e,t='<p class="svelte-jfip4b">❌ Only presidents can promote members to president</p>';return{c(){e=c("div"),e.innerHTML=t,this.h()},l(l){e=o(l,"DIV",{class:!0,"data-svelte-h":!0}),K(e)!=="svelte-172t6px"&&(e.innerHTML=t),this.h()},h(){n(e,"class","error-message svelte-jfip4b")},m(l,i){je(l,e,i)},d(l){l&&f(e)}}}function Sl(s){let e,t,l,i,_,d;e=new ul({props:{size:"xl",$$slots:{default:[yl]},$$scope:{ctx:s}}});let v=s[2]&&s[1]&&Xt(s),p=s[4]&&s[6]&&xt(s),h=s[3]&&s[5]&&el(s);return{c(){lt(e.$$.fragment),t=j(),v&&v.c(),l=j(),p&&p.c(),i=j(),h&&h.c(),_=rt()},l(r){tt(e.$$.fragment,r),t=g(r),v&&v.l(r),l=g(r),p&&p.l(r),i=g(r),h&&h.l(r),_=rt()},m(r,b){et(e,r,b),je(r,t,b),v&&v.m(r,b),je(r,l,b),p&&p.m(r,b),je(r,i,b),h&&h.m(r,b),je(r,_,b),d=!0},p(r,b){const N={};b[0]&33472513|b[2]&2048&&(N.$$scope={dirty:b,ctx:r}),e.$set(N),r[2]&&r[1]?v?v.p(r,b):(v=Xt(r),v.c(),v.m(l.parentNode,l)):v&&(v.d(1),v=null),r[4]&&r[6]?p?p.p(r,b):(p=xt(r),p.c(),p.m(i.parentNode,i)):p&&(p.d(1),p=null),r[3]&&r[5]?h?h.p(r,b):(h=el(r),h.c(),h.m(_.parentNode,_)):h&&(h.d(1),h=null)},i(r){d||(Ze(e.$$.fragment,r),d=!0)},o(r){qe(e.$$.fragment,r),d=!1},d(r){r&&(f(t),f(l),f(i),f(_)),xe(e,r),v&&v.d(r),p&&p.d(r),h&&h.d(r)}}}function Ll(){return()=>{}}function $e(s){return{member:"Member",officer:"Officer",competition_director:"Competition Director",vice_president:"Vice President",president:"President"}[s]||"Unknown"}function Xe(s){if(!s)return"Never";try{let e=s;s.includes(" ")&&!s.includes("T")&&(e=s.replace(" ","T"),!e.includes("+")&&!e.includes("Z")&&(e+="Z"));const t=new Date(e);return isNaN(t.getTime())?(console.warn("Invalid date after parsing:",s,"->",e),"Invalid Date"):t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch(e){return console.warn("Error formatting date:",s,e),"Invalid Date"}}function nt(s){if(!s.last_submission_date)return"inactive";const e=new Date;return e.setDate(e.getDate()-90),new Date(s.last_submission_date)>=e?"active":"inactive"}function Rl(s,e,t){let l,i,_,d,v,p,h,r,b,N,I,E,L;Qe(s,yt,D=>t(0,d=D)),Qe(s,hl,D=>t(31,v=D)),Qe(s,ut,D=>t(17,p=D)),Qe(s,at,D=>t(18,h=D)),Qe(s,st,D=>t(19,r=D)),Qe(s,bl,D=>t(20,b=D)),Qe(s,Tt,D=>t(21,N=D)),Qe(s,wt,D=>t(22,I=D)),Qe(s,Mt,D=>t(23,E=D)),Qe(s,pl,D=>t(24,L=D));let m=null,T=!1,S=!1,Q=!1,z=null,R=null,F="",A="",J="",W="",k=null,M=!1,le=!1,Ie=null;const Z=[{value:"member",label:"Member",description:"Standard member privileges"},{value:"officer",label:"Officer",description:"Can approve submissions and access officer tools"},{value:"competition_director",label:"Competition Director",description:"Can manage competition entries and see brewer names"},{value:"vice_president",label:"Vice President",description:"Can manage officers and access all tools"},{value:"president",label:"President",description:"Full administrative access"}];async function P(D){t(1,m=D),t(2,T=!0),t(12,M=!0),t(11,k=null);try{t(11,k=await We.getMemberDetails(D.id))}catch(ee){console.error("Failed to load member details:",ee)}finally{t(12,M=!1)}}function pe(D){i&&(t(5,z=D),t(7,F=D.role),t(3,S=!0))}function be(D){i&&(t(6,R=D),t(8,A=D.name||""),t(9,J=D.phone||""),t(10,W=D.email||""),t(4,Q=!0))}async function he(){if(!(!z||!F))try{await We.updateMemberRole(z.id,F),t(3,S=!1),t(5,z=null),t(7,F=""),console.log("✅ Role updated successfully")}catch(D){console.error("❌ Failed to update role:",D)}}async function ve(){if(!R||le)return;if(!A.trim()){alert("Name cannot be empty");return}if(W&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(W)){alert("Please enter a valid email address");return}t(13,le=!0);try{const ee={name:A.trim(),phone:J.trim()||null,email:W.trim()||null},{data:ie,error:fe}=await mt.from("members").update(ee).eq("id",R.id).select();if(fe)throw fe;console.log("✅ Member updated successfully"),t(4,Q=!1),t(6,R=null),t(8,A=""),t(9,J=""),t(10,W=""),await We.loadMembers(!0)}catch(ee){console.error("❌ Failed to update member:",ee),alert("Failed to update member. Please try again.")}finally{t(13,le=!1)}}async function X(){try{const D=await We.exportMembersData(),ee=[["Name","Email","Role","Total Points","Monthly Points","Join Date","Last Activity","Total Submissions"],...D.map(q=>[q.name,q.email,q.role,q.totalPoints,q.monthlyPoints,q.joinDate,q.lastActivity,q.totalSubmissions])].map(q=>q.join(",")).join(`
`),ie=new Blob([ee],{type:"text/csv"}),fe=window.URL.createObjectURL(ie),te=document.createElement("a");te.href=fe,te.download=`jax-members-roster-${new Date().toISOString().split("T")[0]}.csv`,te.click(),window.URL.revokeObjectURL(fe)}catch(D){console.error("Failed to export data:",D)}}rl(async()=>{if(Ie=Ll(),!l){dl("/");return}await We.loadMembers()}),ol(()=>{Ie&&Ie()});function re(D){At.call(this,s,D)}function De(D){At.call(this,s,D)}function G(D){At.call(this,s,D)}const se=()=>We.refresh();function Ne(){N=this.value,Tt.set(N)}function Ve(){I=Pt(this),wt.set(I)}function oe(){E=Pt(this),Mt.set(E)}const ae=()=>We.resetFilters(),_e=()=>We.resetFilters(),x=D=>P(D),H=D=>be(D),$=D=>pe(D),O=D=>P(D),Ae=D=>be(D),Ce=D=>pe(D),C=()=>{t(2,T=!1),t(1,m=null),t(11,k=null)},Y=()=>{t(2,T=!1),t(1,m=null),t(11,k=null)},ke=()=>{t(4,Q=!1),t(6,R=null),t(8,A=""),t(9,J=""),t(10,W="")};function me(){A=this.value,t(8,A)}function V(){W=this.value,t(10,W)}function y(){J=this.value,t(9,J)}const ge=()=>{t(4,Q=!1),t(6,R=null),t(8,A=""),t(9,J=""),t(10,W="")},Te=()=>{t(4,Q=!1),t(6,R=null),t(8,A=""),t(9,J=""),t(10,W="")},ce=()=>{t(3,S=!1),t(5,z=null),t(7,F="")};function we(){F=Pt(this),t(7,F),t(16,_),t(0,d)}const Se=D=>D.value===F,Ee=()=>{t(3,S=!1),t(5,z=null),t(7,F="")},w=()=>{t(3,S=!1),t(5,z=null),t(7,F="")};return s.$$.update=()=>{s.$$.dirty[0]&1&&t(14,l=(d==null?void 0:d.is_officer)||!1),s.$$.dirty[1]&1&&t(15,i=v),s.$$.dirty[0]&1&&t(16,_=Z.filter(D=>(d==null?void 0:d.role)==="president"?!0:(d==null?void 0:d.role)==="vice_president"?D.value!=="president":!1))},[d,m,T,S,Q,z,R,F,A,J,W,k,M,le,l,i,_,p,h,r,b,N,I,E,L,P,pe,be,he,ve,X,v,re,De,G,se,Ne,Ve,oe,ae,_e,x,H,$,O,Ae,Ce,C,Y,ke,me,V,y,ge,Te,ce,we,Se,Ee,w]}class Wl extends cl{constructor(e){super(),fl(this,e,Rl,Sl,nl,{},null,[-1,-1,-1])}}export{Wl as component};
