import{s as Ne,n as le,d as v,q as p,i as B,b as i,c as E,e as I,v as W,g as R,f as H,h as w,j as G,t as M,k as ie,w as Se,a as F,p as te,y as Ie,z as ge,r as Te,G as me}from"../chunks/orW8a4RU.js";import{e as ae}from"../chunks/BYoXW1o8.js";import{S as Re,i as Ge}from"../chunks/wt4xWrh0.js";import{g as He}from"../chunks/3PQ1VwVZ.js";import{p as Me}from"../chunks/MSnXaxat.js";import{u as Je}from"../chunks/cGHQYVPU.js";import{a as Le,i as Pe,c as Ue}from"../chunks/ZR_WDyMO.js";import{s as O}from"../chunks/CCM_4jRA.js";function pe(s,e,t){const r=s.slice();return r[23]=e[t],r[25]=t,r}function ve(s,e,t){const r=s.slice();return r[26]=e[t],r}function Ae(s){let e,t,r,n=s[0].length+"",c,o,C,u,d,k,y=ae(s[0]),l=[];for(let f=0;f<y.length;f+=1)l[f]=ye(ve(s,y,f));let h=s[1]&&be(s);return{c(){e=w("div"),t=w("h2"),r=M("Select Category to Rank ("),c=M(n),o=M(" categories)"),C=G(),u=w("div");for(let f=0;f<l.length;f+=1)l[f].c();d=G(),h&&h.c(),k=ge(),this.h()},l(f){e=E(f,"DIV",{class:!0});var g=I(e);t=E(g,"H2",{});var a=I(t);r=H(a,"Select Category to Rank ("),c=H(a,n),o=H(a," categories)"),a.forEach(v),C=R(g),u=E(g,"DIV",{class:!0});var b=I(u);for(let j=0;j<l.length;j+=1)l[j].l(b);b.forEach(v),g.forEach(v),d=R(f),h&&h.l(f),k=ge(),this.h()},h(){p(u,"class","categories-grid svelte-9lhrul"),p(e,"class","categories-section svelte-9lhrul")},m(f,g){B(f,e,g),i(e,t),i(t,r),i(t,c),i(t,o),i(e,C),i(e,u);for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(u,null);B(f,d,g),h&&h.m(f,g),B(f,k,g)},p(f,g){if(g&1&&n!==(n=f[0].length+"")&&F(c,n),g&131){y=ae(f[0]);let a;for(a=0;a<y.length;a+=1){const b=ve(f,y,a);l[a]?l[a].p(b,g):(l[a]=ye(b),l[a].c(),l[a].m(u,null))}for(;a<l.length;a+=1)l[a].d(1);l.length=y.length}f[1]?h?h.p(f,g):(h=be(f),h.c(),h.m(k.parentNode,k)):h&&(h.d(1),h=null)},d(f){f&&(v(e),v(d),v(k)),Ie(l,f),h&&h.d(f)}}}function Be(s){let e,t="<h3>No Categories Found</h3> <p>No entries have been submitted for this competition yet.</p>";return{c(){e=w("div"),e.innerHTML=t,this.h()},l(r){e=E(r,"DIV",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-1c7kpl1"&&(e.innerHTML=t),this.h()},h(){p(e,"class","empty-state svelte-9lhrul")},m(r,n){B(r,e,n)},p:le,d(r){r&&v(e)}}}function Oe(s){let e,t,r="Error Loading Data",n,c,o,C,u,d="🔄 Retry",k,y;return{c(){e=w("div"),t=w("h3"),t.textContent=r,n=G(),c=w("p"),o=M(s[5]),C=G(),u=w("button"),u.textContent=d,this.h()},l(l){e=E(l,"DIV",{class:!0});var h=I(e);t=E(h,"H3",{"data-svelte-h":!0}),W(t)!=="svelte-14daeti"&&(t.textContent=r),n=R(h),c=E(h,"P",{});var f=I(c);o=H(f,s[5]),f.forEach(v),C=R(h),u=E(h,"BUTTON",{class:!0,"data-svelte-h":!0}),W(u)!=="svelte-k0kltk"&&(u.textContent=d),h.forEach(v),this.h()},h(){p(u,"class","nav-btn nav-btn-primary svelte-9lhrul"),p(e,"class","error-state svelte-9lhrul")},m(l,h){B(l,e,h),i(e,t),i(e,n),i(e,c),i(c,o),i(e,C),i(e,u),k||(y=te(u,"click",s[12]),k=!0)},p(l,h){h&32&&F(o,l[5])},d(l){l&&v(e),k=!1,y()}}}function ze(s){let e,t='<div class="spinner svelte-9lhrul"></div> <p>Loading categories and rankings...</p>';return{c(){e=w("div"),e.innerHTML=t,this.h()},l(r){e=E(r,"DIV",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-gsq85"&&(e.innerHTML=t),this.h()},h(){p(e,"class","loading svelte-9lhrul")},m(r,n){B(r,e,n)},p:le,d(r){r&&v(e)}}}function ye(s){let e,t,r=s[26].displayName+"",n,c,o,C=s[26].entryCount+"",u,d,k,y,l,h;function f(){return s[13](s[26])}return{c(){e=w("div"),t=w("div"),n=M(r),c=G(),o=w("div"),u=M(C),d=M(" entries"),k=G(),this.h()},l(g){e=E(g,"DIV",{class:!0,role:!0,tabindex:!0});var a=I(e);t=E(a,"DIV",{class:!0});var b=I(t);n=H(b,r),b.forEach(v),c=R(a),o=E(a,"DIV",{class:!0});var j=I(o);u=H(j,C),d=H(j," entries"),j.forEach(v),k=R(a),a.forEach(v),this.h()},h(){var g;p(t,"class","category-name svelte-9lhrul"),p(o,"class","category-stats svelte-9lhrul"),p(e,"class",y="category-card "+(((g=s[1])==null?void 0:g.id)===s[26].id?"selected":"")+" svelte-9lhrul"),p(e,"role","button"),p(e,"tabindex","0")},m(g,a){B(g,e,a),i(e,t),i(t,n),i(e,c),i(e,o),i(o,u),i(o,d),i(e,k),l||(h=te(e,"click",f),l=!0)},p(g,a){var b;s=g,a&1&&r!==(r=s[26].displayName+"")&&F(n,r),a&1&&C!==(C=s[26].entryCount+"")&&F(u,C),a&3&&y!==(y="category-card "+(((b=s[1])==null?void 0:b.id)===s[26].id?"selected":"")+" svelte-9lhrul")&&p(e,"class",y)},d(g){g&&v(e),l=!1,h()}}}function be(s){let e,t,r,n,c=s[1].displayName+"",o,C,u,d=s[4]?"Saving...":"Save Rankings",k,y,l,h,f;function g(j,q){return j[2].length===0?We:Fe}let a=g(s),b=a(s);return{c(){e=w("div"),t=w("div"),r=w("h2"),n=M("Rankings for "),o=M(c),C=G(),u=w("button"),k=M(d),l=G(),b.c(),this.h()},l(j){e=E(j,"DIV",{class:!0});var q=I(e);t=E(q,"DIV",{class:!0});var J=I(t);r=E(J,"H2",{class:!0});var z=I(r);n=H(z,"Rankings for "),o=H(z,c),z.forEach(v),C=R(J),u=E(J,"BUTTON",{class:!0});var Y=I(u);k=H(Y,d),Y.forEach(v),J.forEach(v),l=R(q),b.l(q),q.forEach(v),this.h()},h(){p(r,"class","svelte-9lhrul"),p(u,"class","save-btn svelte-9lhrul"),u.disabled=y=s[4]||s[2].length===0,p(t,"class","rankings-header svelte-9lhrul"),p(e,"class","rankings-section svelte-9lhrul")},m(j,q){B(j,e,q),i(e,t),i(t,r),i(r,n),i(r,o),i(t,C),i(t,u),i(u,k),i(e,l),b.m(e,null),h||(f=te(u,"click",s[10]),h=!0)},p(j,q){q&2&&c!==(c=j[1].displayName+"")&&F(o,c),q&16&&d!==(d=j[4]?"Saving...":"Save Rankings")&&F(k,d),q&20&&y!==(y=j[4]||j[2].length===0)&&(u.disabled=y),a===(a=g(j))&&b?b.p(j,q):(b.d(1),b=a(j),b&&(b.c(),b.m(e,null)))},d(j){j&&v(e),b.d(),h=!1,f()}}}function Fe(s){let e,t=ae(s[2]),r=[];for(let n=0;n<t.length;n+=1)r[n]=Ee(pe(s,t,n));return{c(){e=w("div");for(let n=0;n<r.length;n+=1)r[n].c();this.h()},l(n){e=E(n,"DIV",{class:!0});var c=I(e);for(let o=0;o<r.length;o+=1)r[o].l(c);c.forEach(v),this.h()},h(){p(e,"class","rankings-list svelte-9lhrul")},m(n,c){B(n,e,c);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(e,null)},p(n,c){if(c&774){t=ae(n[2]);let o;for(o=0;o<t.length;o+=1){const C=pe(n,t,o);r[o]?r[o].p(C,c):(r[o]=Ee(C),r[o].c(),r[o].m(e,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=t.length}},d(n){n&&v(e),Ie(r,n)}}}function We(s){let e,t,r="No Scored Entries",n,c,o="You need to score entries in this category before you can rank them.",C,u,d,k;return{c(){e=w("div"),t=w("h3"),t.textContent=r,n=G(),c=w("p"),c.textContent=o,C=G(),u=w("a"),d=M("🏆 Start Judging"),this.h()},l(y){e=E(y,"DIV",{class:!0});var l=I(e);t=E(l,"H3",{"data-svelte-h":!0}),W(t)!=="svelte-fdz8k3"&&(t.textContent=r),n=R(l),c=E(l,"P",{"data-svelte-h":!0}),W(c)!=="svelte-a9o4sh"&&(c.textContent=o),C=R(l),u=E(l,"A",{href:!0,class:!0});var h=I(u);d=H(h,"🏆 Start Judging"),h.forEach(v),l.forEach(v),this.h()},h(){p(u,"href",k="/judge/competition/"+s[6]),p(u,"class","nav-btn nav-btn-primary svelte-9lhrul"),p(e,"class","empty-state svelte-9lhrul")},m(y,l){B(y,e,l),i(e,t),i(e,n),i(e,c),i(e,C),i(e,u),i(u,d)},p(y,l){l&64&&k!==(k="/judge/competition/"+y[6])&&p(u,"href",k)},d(y){y&&v(e)}}}function ke(s){let e,t,r=s[23].entry.category_display+"",n;return{c(){e=w("div"),t=M("Category: "),n=M(r),this.h()},l(c){e=E(c,"DIV",{class:!0});var o=I(e);t=H(o,"Category: "),n=H(o,r),o.forEach(v),this.h()},h(){p(e,"class","detail-text svelte-9lhrul")},m(c,o){B(c,e,o),i(e,t),i(e,n)},p(c,o){o&4&&r!==(r=c[23].entry.category_display+"")&&F(n,r)},d(c){c&&v(e)}}}function Ce(s){let e,t="📝 Has notes";return{c(){e=w("span"),e.textContent=t,this.h()},l(r){e=E(r,"SPAN",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-15x1uhx"&&(e.textContent=t),this.h()},h(){p(e,"class","detail-text svelte-9lhrul")},m(r,n){B(r,e,n)},d(r){r&&v(e)}}}function Ee(s){var de;let e,t,r=we(s[23].rank_position)+"",n,c,o,C,u,d=s[23].entry.entry_number+"",k,y,l,h,f,g=(s[23].entry.beer_name||"No name")+"",a,b,j,q,J,z=s[23].entry.total_score+"",Y,Z,x,$,_,N,S="⬆️",A,V,D,m,T,K,re,P=((de=s[1])==null?void 0:de.isCustomGroup)&&ke(s),U=s[23].entry.judge_notes&&Ce();function qe(){return s[14](s[25])}function Ve(){return s[15](s[25])}return{c(){e=w("div"),t=w("div"),n=M(r),c=G(),o=w("div"),C=w("div"),u=M("Entry #"),k=M(d),y=G(),l=w("div"),h=w("div"),f=w("strong"),a=M(g),b=G(),P&&P.c(),j=G(),q=w("div"),J=w("span"),Y=M(z),Z=M("/50"),x=G(),U&&U.c(),$=G(),_=w("div"),N=w("button"),N.textContent=S,A=G(),V=w("button"),D=M("⬇️"),T=G(),this.h()},l(Q){e=E(Q,"DIV",{class:!0});var L=I(e);t=E(L,"DIV",{class:!0});var ee=I(t);n=H(ee,r),ee.forEach(v),c=R(L),o=E(L,"DIV",{class:!0});var X=I(o);C=E(X,"DIV",{class:!0});var ce=I(C);u=H(ce,"Entry #"),k=H(ce,d),ce.forEach(v),y=R(X),l=E(X,"DIV",{class:!0});var se=I(l);h=E(se,"DIV",{class:!0});var _e=I(h);f=E(_e,"STRONG",{});var fe=I(f);a=H(fe,g),fe.forEach(v),_e.forEach(v),b=R(se),P&&P.l(se),se.forEach(v),j=R(X),q=E(X,"DIV",{class:!0});var oe=I(q);J=E(oe,"SPAN",{class:!0,style:!0});var ue=I(J);Y=H(ue,z),Z=H(ue,"/50"),ue.forEach(v),x=R(oe),U&&U.l(oe),oe.forEach(v),X.forEach(v),$=R(L),_=E(L,"DIV",{class:!0});var ne=I(_);N=E(ne,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),W(N)!=="svelte-4hx6ed"&&(N.textContent=S),A=R(ne),V=E(ne,"BUTTON",{class:!0,title:!0});var he=I(V);D=H(he,"⬇️"),he.forEach(v),ne.forEach(v),T=R(L),L.forEach(v),this.h()},h(){p(t,"class","rank-position svelte-9lhrul"),p(C,"class","entry-number svelte-9lhrul"),p(h,"class","detail-text svelte-9lhrul"),p(l,"class","entry-details svelte-9lhrul"),p(J,"class","score-badge svelte-9lhrul"),me(J,"background",je(s[23].entry.total_score)),p(q,"class","score-display svelte-9lhrul"),p(o,"class","entry-info svelte-9lhrul"),p(N,"class","rank-btn svelte-9lhrul"),N.disabled=s[25]===0,p(N,"title","Move up"),p(V,"class","rank-btn svelte-9lhrul"),V.disabled=m=s[25]===s[2].length-1,p(V,"title","Move down"),p(_,"class","ranking-controls svelte-9lhrul"),p(e,"class","ranking-item svelte-9lhrul")},m(Q,L){B(Q,e,L),i(e,t),i(t,n),i(e,c),i(e,o),i(o,C),i(C,u),i(C,k),i(o,y),i(o,l),i(l,h),i(h,f),i(f,a),i(l,b),P&&P.m(l,null),i(o,j),i(o,q),i(q,J),i(J,Y),i(J,Z),i(q,x),U&&U.m(q,null),i(e,$),i(e,_),i(_,N),i(_,A),i(_,V),i(V,D),i(e,T),K||(re=[te(N,"click",qe),te(V,"click",Ve)],K=!0)},p(Q,L){var ee;s=Q,L&4&&r!==(r=we(s[23].rank_position)+"")&&F(n,r),L&4&&d!==(d=s[23].entry.entry_number+"")&&F(k,d),L&4&&g!==(g=(s[23].entry.beer_name||"No name")+"")&&F(a,g),(ee=s[1])!=null&&ee.isCustomGroup?P?P.p(s,L):(P=ke(s),P.c(),P.m(l,null)):P&&(P.d(1),P=null),L&4&&z!==(z=s[23].entry.total_score+"")&&F(Y,z),L&4&&me(J,"background",je(s[23].entry.total_score)),s[23].entry.judge_notes?U||(U=Ce(),U.c(),U.m(q,null)):U&&(U.d(1),U=null),L&4&&m!==(m=s[25]===s[2].length-1)&&(V.disabled=m)},d(Q){Q&&v(e),P&&P.d(),U&&U.d(),K=!1,Te(re)}}}function Ye(s){let e,t,r='<h1 class="svelte-9lhrul">🏆 Category Rankings</h1> <p class="svelte-9lhrul">Rank entries within each category based on your judging scores</p>',n,c,o,C,u,d,k,y="🏠 Judge Portal",l;function h(a,b){return a[3]?ze:a[5]?Oe:a[0].length===0?Be:Ae}let f=h(s),g=f(s);return{c(){e=w("div"),t=w("div"),t.innerHTML=r,n=G(),c=w("div"),o=w("a"),C=M("⬅️ Back to Judging"),d=G(),k=w("a"),k.textContent=y,l=G(),g.c(),this.h()},l(a){e=E(a,"DIV",{class:!0});var b=I(e);t=E(b,"DIV",{class:!0,"data-svelte-h":!0}),W(t)!=="svelte-k61t7l"&&(t.innerHTML=r),n=R(b),c=E(b,"DIV",{class:!0});var j=I(c);o=E(j,"A",{href:!0,class:!0});var q=I(o);C=H(q,"⬅️ Back to Judging"),q.forEach(v),d=R(j),k=E(j,"A",{href:!0,class:!0,"data-svelte-h":!0}),W(k)!=="svelte-wz4wfi"&&(k.textContent=y),j.forEach(v),l=R(b),g.l(b),b.forEach(v),this.h()},h(){p(t,"class","header svelte-9lhrul"),p(o,"href",u="/judge/competition/"+s[6]),p(o,"class","nav-btn svelte-9lhrul"),p(k,"href","/judge"),p(k,"class","nav-btn svelte-9lhrul"),p(c,"class","nav-buttons svelte-9lhrul"),p(e,"class","rankings-container svelte-9lhrul")},m(a,b){B(a,e,b),i(e,t),i(e,n),i(e,c),i(c,o),i(o,C),i(c,d),i(c,k),i(e,l),g.m(e,null)},p(a,[b]){b&64&&u!==(u="/judge/competition/"+a[6])&&p(o,"href",u),f===(f=h(a))&&g?g.p(a,b):(g.d(1),g=f(a),g&&(g.c(),g.m(e,null)))},i:le,o:le,d(a){a&&v(e),g.d()}}}function we(s){switch(s){case 1:return"🥇";case 2:return"🥈";case 3:return"🥉";default:return`${s}.`}}function je(s){return s>=45?"#059669":s>=38?"#0891b2":s>=30?"#eab308":s>=21?"#f59e0b":"#dc2626"}function De(s,e="info"){const t=document.createElement("div");t.textContent=s,t.style.cssText=`
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 1rem 1.5rem;
      border-radius: 6px;
      color: white;
      font-weight: 500;
      z-index: 1000;
      background: ${e==="success"?"#059669":e==="error"?"#dc2626":"#6b7280"};
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    `,document.body.appendChild(t),setTimeout(()=>document.body.removeChild(t),3e3)}function Ke(s,e,t){let r,n,c,o,C;ie(s,Je,_=>t(17,n=_)),ie(s,Le,_=>t(18,c=_)),ie(s,Pe,_=>t(19,o=_)),ie(s,Me,_=>t(11,C=_));let u=[],d=null,k=[],y=[],l=!0,h=!1,f=null;Se(async()=>{var _;if(!n){He("/auth");return}if(!o||((_=c.activeCompetition)==null?void 0:_.id)!==r)try{await Ue.startJudgingSession(r,n.id)}catch(N){console.error("Error starting judging session:",N),t(5,f="Failed to start judging session"),t(3,l=!1);return}await g()});async function g(){t(3,l=!0),t(5,f=null);try{const{data:_,error:N}=await O.from("competitions").select("category_system").eq("id",r).single();if(N)throw N;if(_.category_system==="custom"){const{data:S,error:A}=await O.from("competition_ranking_groups").select(`
            id, group_name, group_description, bjcp_category_ids, group_order
          `).eq("competition_id",r).order("group_order");if(A)throw A;const V=[];for(const D of S||[]){const m=D.bjcp_category_ids,{data:T,error:K}=await O.from("competition_entries").select("id, bjcp_category_id").eq("competition_id",r).in("bjcp_category_id",m);if(K)throw K;T&&T.length>0&&V.push({...D,isCustomGroup:!0,entryCount:T.length,displayName:D.group_name})}t(0,u=V)}else{const{data:S,error:A}=await O.from("competition_entries").select(`
            bjcp_category_id,
            bjcp_categories(
              id, category_number, subcategory_letter, 
              subcategory_name, category_name
            )
          `).eq("competition_id",r);if(A)throw A;const V=new Map;S.forEach(D=>{const m=D.bjcp_categories;if(m){const T=m.id;V.has(T)?V.get(T).entryCount++:V.set(T,{...m,isCustomGroup:!1,entryCount:1,displayName:`${m.category_number}${m.subcategory_letter||""} - ${m.category_name}${m.subcategory_name?` (${m.subcategory_name})`:""}`})}}),t(0,u=Array.from(V.values()).sort((D,m)=>D.category_number.localeCompare(m.category_number)))}u.length>0&&(t(1,d=u[0]),await a())}catch(_){console.error("Error loading categories:",_),t(5,f=_.message)}finally{t(3,l=!1)}}async function a(){if(d)try{let _;if(d.isCustomGroup){const{data:D,error:m}=await O.from("competition_entries").select(`
            id, entry_number, beer_name, beer_notes, bjcp_category_id,
            members!competition_entries_member_id_fkey(name),
            bjcp_categories!competition_entries_bjcp_category_id_fkey(
              category_number, subcategory_letter, subcategory_name, category_name
            )
          `).eq("competition_id",r).in("bjcp_category_id",d.bjcp_category_ids).order("entry_number");if(m)throw m;_=D}else{const{data:D,error:m}=await O.from("competition_entries").select(`
            id, entry_number, beer_name, beer_notes, bjcp_category_id,
            members!competition_entries_member_id_fkey(name),
            bjcp_categories!competition_entries_bjcp_category_id_fkey(
              category_number, subcategory_letter, subcategory_name, category_name
            )
          `).eq("competition_id",r).eq("bjcp_category_id",d.id).order("entry_number");if(m)throw m;_=D}if(!_)throw new Error("No entries data loaded");const N=_.map(D=>D.id),{data:S,error:A}=await O.from("competition_judging_sessions").select("entry_id, total_score, judge_notes").eq("competition_id",r).eq("judge_id",n.id).in("entry_id",N);A&&console.warn("No judging data found:",A);let V=[];if(d.isCustomGroup){const{data:D,error:m}=await O.from("competition_rankings").select("*").eq("competition_id",r).eq("judge_id",n.id).eq("ranking_group_id",d.id).order("rank_position");m?console.warn("No existing group rankings found:",m):V=D}else{const{data:D,error:m}=await O.from("competition_rankings").select("*").eq("competition_id",r).eq("judge_id",n.id).eq("bjcp_category_id",d.id).order("rank_position");m?console.warn("No existing category rankings found:",m):V=D}if(k=_.map(D=>{var K;const m=S==null?void 0:S.find(re=>re.entry_id===D.id),T=D.bjcp_categories;return{...D,member_name:((K=D.members)==null?void 0:K.name)||"Unknown",total_score:(m==null?void 0:m.total_score)||0,judge_notes:(m==null?void 0:m.judge_notes)||"",hasScore:!!(m!=null&&m.total_score),category_display:T?`${T.category_number}${T.subcategory_letter||""} - ${T.subcategory_name||T.category_name}`:"Unknown Category"}}),V&&V.length>0)t(2,y=V.map(D=>{const m=k.find(T=>T.id===D.entry_id);return{...D,entry:m}}));else{const D=k.filter(m=>m.hasScore).sort((m,T)=>T.total_score-m.total_score);t(2,y=D.map((m,T)=>({id:null,competition_id:r,judge_id:n.id,bjcp_category_id:d.isCustomGroup?null:d.id,ranking_group_id:d.isCustomGroup?d.id:null,entry_id:m.id,rank_position:T+1,ranking_notes:"",entry:m})))}}catch(_){console.error("Error loading category entries:",_),t(5,f=_.message)}}async function b(_){t(1,d=_),await a()}function j(_,N){if(_===N||N<0||N>=y.length)return;const S=[...y],[A]=S.splice(_,1);S.splice(N,0,A),S.forEach((V,D)=>{V.rank_position=D+1}),t(2,y=S)}function q(_){j(_,_-1)}function J(_){j(_,_+1)}async function z(){if(!(!d||y.length===0)){t(4,h=!0);try{if(d.isCustomGroup){const{error:S}=await O.from("competition_rankings").delete().eq("competition_id",r).eq("judge_id",n.id).eq("ranking_group_id",d.id);if(S)throw S}else{const{error:S}=await O.from("competition_rankings").delete().eq("competition_id",r).eq("judge_id",n.id).eq("bjcp_category_id",d.id);if(S)throw S}const _=y.map(S=>({competition_id:r,judge_id:n.id,bjcp_category_id:d.isCustomGroup?null:d.id,ranking_group_id:d.isCustomGroup?d.id:null,entry_id:S.entry_id,rank_position:S.rank_position,ranking_notes:S.ranking_notes||null})),{error:N}=await O.from("competition_rankings").insert(_);if(N)throw N;De("Rankings saved successfully!","success")}catch(_){console.error("Error saving rankings:",_),De("Failed to save rankings","error")}finally{t(4,h=!1)}}}const Y=()=>window.location.reload(),Z=_=>b(_),x=_=>q(_),$=_=>J(_);return s.$$.update=()=>{s.$$.dirty&2048&&t(6,r=C.params.id)},[u,d,y,l,h,f,r,b,q,J,z,C,Y,Z,x,$]}class st extends Re{constructor(e){super(),Ge(this,e,Ke,Ye,Ne,{})}}export{st as component};
