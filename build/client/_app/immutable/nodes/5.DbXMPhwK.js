import{s as Ve,n as le,d as f,i as H,b as c,p as Ne,q as k,c as m,e as C,v as z,g as V,h as p,j as L,w as Le,x as Se,a as F,f as M,t as A,y as ve,A as ge,B as pe,z as de,G as ce}from"../chunks/DOvoZ9Ia.js";import{e as _e}from"../chunks/DJwZhPfI.js";import{S as Me,i as Ae}from"../chunks/DZMW2zPD.js";import{g as He}from"../chunks/5KGppEzW.js";import{s as ie}from"../chunks/CCM_4jRA.js";function be(r,e,l){const t=r.slice();return t[12]=e[l][0],t[13]=e[l][1],t}function ke(r,e,l){const t=r.slice();return t[16]=e[l],t}function ye(r,e,l){const t=r.slice();return t[19]=e[l],t}function Ee(r){let e,l;return{c(){e=p("div"),l=A(r[6]),this.h()},l(t){e=m(t,"DIV",{class:!0});var n=C(e);l=M(n,r[6]),n.forEach(f),this.h()},h(){k(e,"class","error svelte-1n450du")},m(t,n){H(t,e,n),c(e,l)},p(t,n){n&64&&F(l,t[6])},d(t){t&&f(e)}}}function Re(r){let e,l,t="Select Competition to View Results:",n,s,o,a="Choose a competition...",_,h,g,D,E,w=_e(r[2]),v=[];for(let i=0;i<w.length;i+=1)v[i]=Ce(ye(r,w,i));let u=r[3]&&De(r);return{c(){e=p("div"),l=p("div"),l.textContent=t,n=L(),s=p("select"),o=p("option"),o.textContent=a;for(let i=0;i<v.length;i+=1)v[i].c();h=L(),u&&u.c(),g=de(),this.h()},l(i){e=m(i,"DIV",{class:!0});var d=C(e);l=m(d,"DIV",{class:!0,"data-svelte-h":!0}),z(l)!=="svelte-6famh2"&&(l.textContent=t),n=V(d),s=m(d,"SELECT",{class:!0});var T=C(s);o=m(T,"OPTION",{"data-svelte-h":!0}),z(o)!=="svelte-1urbt8h"&&(o.textContent=a);for(let P=0;P<v.length;P+=1)v[P].l(T);T.forEach(f),d.forEach(f),h=V(i),u&&u.l(i),g=de(),this.h()},h(){k(l,"class","selector-label svelte-1n450du"),o.__value="",pe(o,o.__value),k(s,"class","competition-select svelte-1n450du"),k(e,"class","competition-selector svelte-1n450du")},m(i,d){var T;H(i,e,d),c(e,l),c(e,n),c(e,s),c(s,o);for(let P=0;P<v.length;P+=1)v[P]&&v[P].m(s,null);ge(s,((T=r[3])==null?void 0:T.id)||""),H(i,h,d),u&&u.m(i,d),H(i,g,d),D||(E=Ne(s,"change",r[8]),D=!0)},p(i,d){var T,P;if(d&4){w=_e(i[2]);let I;for(I=0;I<w.length;I+=1){const G=ye(i,w,I);v[I]?v[I].p(G,d):(v[I]=Ce(G),v[I].c(),v[I].m(s,null))}for(;I<v.length;I+=1)v[I].d(1);v.length=w.length}d&12&&_!==(_=((T=i[3])==null?void 0:T.id)||"")&&ge(s,((P=i[3])==null?void 0:P.id)||""),i[3]?u?u.p(i,d):(u=De(i),u.c(),u.m(g.parentNode,g)):u&&(u.d(1),u=null)},d(i){i&&(f(e),f(h),f(g)),ve(v,i),u&&u.d(i),D=!1,E()}}}function Be(r){let e,l="<h3>No Results Published</h3> <p>There are currently no competition results available to view.</p> <p>Check back after competitions have been judged and results published.</p>";return{c(){e=p("div"),e.innerHTML=l,this.h()},l(t){e=m(t,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-ntmt9w"&&(e.innerHTML=l),this.h()},h(){k(e,"class","empty-state svelte-1n450du")},m(t,n){H(t,e,n)},p:le,d(t){t&&f(e)}}}function Oe(r){let e,l='<div class="spinner svelte-1n450du"></div> <p>Loading competition results...</p>';return{c(){e=p("div"),e.innerHTML=l,this.h()},l(t){e=m(t,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-1c57wy0"&&(e.innerHTML=l),this.h()},h(){k(e,"class","loading svelte-1n450du")},m(t,n){H(t,e,n)},p:le,d(t){t&&f(e)}}}function Ce(r){let e,l=r[19].name+"",t,n,s=Pe(r[19].judging_date)+"",o,a,_;return{c(){e=p("option"),t=A(l),n=A(" - Judged "),o=A(s),a=L(),this.h()},l(h){e=m(h,"OPTION",{});var g=C(e);t=M(g,l),n=M(g," - Judged "),o=M(g,s),a=V(g),g.forEach(f),this.h()},h(){e.__value=_=r[19].id,pe(e,e.__value)},m(h,g){H(h,e,g),c(e,t),c(e,n),c(e,o),c(e,a)},p(h,g){g&4&&l!==(l=h[19].name+"")&&F(t,l),g&4&&s!==(s=Pe(h[19].judging_date)+"")&&F(o,s),g&4&&_!==(_=h[19].id)&&(e.__value=_,pe(e,e.__value))},d(h){h&&f(e)}}}function De(r){let e,l,t=!r[5]&&r[0].length>0&&je(r);function n(a,_){return a[5]?Ge:a[0].length===0?Fe:qe}let s=n(r),o=s(r);return{c(){t&&t.c(),e=L(),o.c(),l=de()},l(a){t&&t.l(a),e=V(a),o.l(a),l=de()},m(a,_){t&&t.m(a,_),H(a,e,_),o.m(a,_),H(a,l,_)},p(a,_){!a[5]&&a[0].length>0?t?t.p(a,_):(t=je(a),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null),s===(s=n(a))&&o?o.p(a,_):(o.d(1),o=s(a),o&&(o.c(),o.m(l.parentNode,l)))},d(a){a&&(f(e),f(l)),t&&t.d(a),o.d(a)}}}function je(r){let e,l,t=r[3].name+"",n,s,o,a,_,h,g="Total Entries",D,E,w=r[7].totalEntries+"",v,u,i,d,T="Awards Given",P,I,G=r[7].placedEntries+"",Z,x,O,U,Y="Categories",ne,J,q=r[7].categories+"",b,W,S,B,$="Average Score",K,N,X=r[7].averageScore+"",ee;return{c(){e=p("div"),l=p("h2"),n=A(t),s=A(" - Results Summary"),o=L(),a=p("div"),_=p("div"),h=p("div"),h.textContent=g,D=L(),E=p("div"),v=A(w),u=L(),i=p("div"),d=p("div"),d.textContent=T,P=L(),I=p("div"),Z=A(G),x=L(),O=p("div"),U=p("div"),U.textContent=Y,ne=L(),J=p("div"),b=A(q),W=L(),S=p("div"),B=p("div"),B.textContent=$,K=L(),N=p("div"),ee=A(X),this.h()},l(R){e=m(R,"DIV",{class:!0});var y=C(e);l=m(y,"H2",{style:!0});var j=C(l);n=M(j,t),s=M(j," - Results Summary"),j.forEach(f),o=V(y),a=m(y,"DIV",{class:!0});var Q=C(a);_=m(Q,"DIV",{class:!0});var se=C(_);h=m(se,"DIV",{class:!0,"data-svelte-h":!0}),z(h)!=="svelte-ufm050"&&(h.textContent=g),D=V(se),E=m(se,"DIV",{class:!0});var fe=C(E);v=M(fe,w),fe.forEach(f),se.forEach(f),u=V(Q),i=m(Q,"DIV",{class:!0});var ae=C(i);d=m(ae,"DIV",{class:!0,"data-svelte-h":!0}),z(d)!=="svelte-1wthacd"&&(d.textContent=T),P=V(ae),I=m(ae,"DIV",{class:!0});var re=C(I);Z=M(re,G),re.forEach(f),ae.forEach(f),x=V(Q),O=m(Q,"DIV",{class:!0});var te=C(O);U=m(te,"DIV",{class:!0,"data-svelte-h":!0}),z(U)!=="svelte-1t4zeo0"&&(U.textContent=Y),ne=V(te),J=m(te,"DIV",{class:!0});var he=C(J);b=M(he,q),he.forEach(f),te.forEach(f),W=V(Q),S=m(Q,"DIV",{class:!0});var oe=C(S);B=m(oe,"DIV",{class:!0,"data-svelte-h":!0}),z(B)!=="svelte-r90083"&&(B.textContent=$),K=V(oe),N=m(oe,"DIV",{class:!0});var me=C(N);ee=M(me,X),me.forEach(f),oe.forEach(f),Q.forEach(f),y.forEach(f),this.h()},h(){ce(l,"margin","0 0 1.5rem 0"),ce(l,"color","#333"),k(h,"class","summary-label svelte-1n450du"),k(E,"class","summary-value svelte-1n450du"),k(_,"class","summary-item svelte-1n450du"),k(d,"class","summary-label svelte-1n450du"),k(I,"class","summary-value svelte-1n450du"),k(i,"class","summary-item svelte-1n450du"),k(U,"class","summary-label svelte-1n450du"),k(J,"class","summary-value svelte-1n450du"),k(O,"class","summary-item svelte-1n450du"),k(B,"class","summary-label svelte-1n450du"),k(N,"class","summary-value svelte-1n450du"),k(S,"class","summary-item svelte-1n450du"),k(a,"class","summary-grid svelte-1n450du"),k(e,"class","results-summary svelte-1n450du")},m(R,y){H(R,e,y),c(e,l),c(l,n),c(l,s),c(e,o),c(e,a),c(a,_),c(_,h),c(_,D),c(_,E),c(E,v),c(a,u),c(a,i),c(i,d),c(i,P),c(i,I),c(I,Z),c(a,x),c(a,O),c(O,U),c(O,ne),c(O,J),c(J,b),c(a,W),c(a,S),c(S,B),c(S,K),c(S,N),c(N,ee)},p(R,y){y&8&&t!==(t=R[3].name+"")&&F(n,t),y&128&&w!==(w=R[7].totalEntries+"")&&F(v,w),y&128&&G!==(G=R[7].placedEntries+"")&&F(Z,G),y&128&&q!==(q=R[7].categories+"")&&F(b,q),y&128&&X!==(X=R[7].averageScore+"")&&F(ee,X)},d(R){R&&f(e)}}}function qe(r){let e,l=_e(Object.entries(r[1])),t=[];for(let n=0;n<l.length;n+=1)t[n]=Te(be(r,l,n));return{c(){for(let n=0;n<t.length;n+=1)t[n].c();e=de()},l(n){for(let s=0;s<t.length;s+=1)t[s].l(n);e=de()},m(n,s){for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(n,s);H(n,e,s)},p(n,s){if(s&2){l=_e(Object.entries(n[1]));let o;for(o=0;o<l.length;o+=1){const a=be(n,l,o);t[o]?t[o].p(a,s):(t[o]=Te(a),t[o].c(),t[o].m(e.parentNode,e))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},d(n){n&&f(e),ve(t,n)}}}function Fe(r){let e,l="<h3>No Results Available</h3> <p>Results for this competition have not been entered yet.</p>";return{c(){e=p("div"),e.innerHTML=l,this.h()},l(t){e=m(t,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-5maymk"&&(e.innerHTML=l),this.h()},h(){k(e,"class","empty-state svelte-1n450du")},m(t,n){H(t,e,n)},p:le,d(t){t&&f(e)}}}function Ge(r){let e,l='<div class="spinner svelte-1n450du"></div> <p>Loading results...</p>';return{c(){e=p("div"),e.innerHTML=l,this.h()},l(t){e=m(t,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-1wd8za7"&&(e.innerHTML=l),this.h()},h(){k(e,"class","loading svelte-1n450du")},m(t,n){H(t,e,n)},p:le,d(t){t&&f(e)}}}function we(r){let e,l,t=r[16].judge_count+"",n,s,o=r[16].judge_count===1?"":"s",a;return{c(){e=p("br"),l=p("small"),n=A(t),s=A(" judge"),a=A(o),this.h()},l(_){e=m(_,"BR",{}),l=m(_,"SMALL",{style:!0});var h=C(l);n=M(h,t),s=M(h," judge"),a=M(h,o),h.forEach(f),this.h()},h(){ce(l,"color","#666")},m(_,h){H(_,e,h),H(_,l,h),c(l,n),c(l,s),c(l,a)},p(_,h){h&2&&t!==(t=_[16].judge_count+"")&&F(n,t),h&2&&o!==(o=_[16].judge_count===1?"":"s")&&F(a,o)},d(_){_&&(f(e),f(l))}}}function Ue(r){let e,l="-/50";return{c(){e=p("span"),e.textContent=l,this.h()},l(t){e=m(t,"SPAN",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-1qmajtw"&&(e.textContent=l),this.h()},h(){k(e,"class","score-badge svelte-1n450du")},m(t,n){H(t,e,n)},p:le,d(t){t&&f(e)}}}function Je(r){let e,l=r[16].score+"",t,n;return{c(){e=p("span"),t=A(l),n=A("/50"),this.h()},l(s){e=m(s,"SPAN",{class:!0});var o=C(e);t=M(o,l),n=M(o,"/50"),o.forEach(f),this.h()},h(){k(e,"class","score-badge svelte-1n450du")},m(s,o){H(s,e,o),c(e,t),c(e,n)},p(s,o){o&2&&l!==(l=s[16].score+"")&&F(t,l)},d(s){s&&f(e)}}}function ze(r){let e,l="No Placement";return{c(){e=p("span"),e.textContent=l,this.h()},l(t){e=m(t,"SPAN",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-1ngxc4k"&&(e.textContent=l),this.h()},h(){k(e,"class","placement-badge placement-none svelte-1n450du")},m(t,n){H(t,e,n)},p:le,d(t){t&&f(e)}}}function Ze(r){let e,l,t=ue(r[16].calculated_placement).medal+"",n,s,o,a=ue(r[16].calculated_placement).text+"",_,h;return{c(){e=p("span"),l=p("span"),n=A(t),s=L(),o=p("span"),_=A(a),this.h()},l(g){e=m(g,"SPAN",{class:!0});var D=C(e);l=m(D,"SPAN",{});var E=C(l);n=M(E,t),E.forEach(f),s=V(D),o=m(D,"SPAN",{});var w=C(o);_=M(w,a),w.forEach(f),D.forEach(f),this.h()},h(){k(e,"class",h="placement-badge "+ue(r[16].calculated_placement).class+" svelte-1n450du")},m(g,D){H(g,e,D),c(e,l),c(l,n),c(e,s),c(e,o),c(o,_)},p(g,D){D&2&&t!==(t=ue(g[16].calculated_placement).medal+"")&&F(n,t),D&2&&a!==(a=ue(g[16].calculated_placement).text+"")&&F(_,a),D&2&&h!==(h="placement-badge "+ue(g[16].calculated_placement).class+" svelte-1n450du")&&k(e,"class",h)},d(g){g&&f(e)}}}function Ye(r){let e,l="No notes";return{c(){e=p("span"),e.textContent=l,this.h()},l(t){e=m(t,"SPAN",{style:!0,"data-svelte-h":!0}),z(e)!=="svelte-1ylmb08"&&(e.textContent=l),this.h()},h(){ce(e,"color","#999")},m(t,n){H(t,e,n)},p:le,d(t){t&&f(e)}}}function Ke(r){let e,l=r[16].judge_notes+"",t;return{c(){e=p("div"),t=A(l),this.h()},l(n){e=m(n,"DIV",{class:!0});var s=C(e);t=M(s,l),s.forEach(f),this.h()},h(){k(e,"class","judge-notes svelte-1n450du")},m(n,s){H(n,e,s),c(e,t)},p(n,s){s&2&&l!==(l=n[16].judge_notes+"")&&F(t,l)},d(n){n&&f(e)}}}function Ie(r){let e,l,t,n=r[16].entry_number+"",s,o,a,_=r[16].member_name+"",h,g,D,E=r[16].beer_name+"",w,v,u,i,d=r[16].ranking_points+"",T,P,I=r[16].ranking_points===1?"pt":"pts",G,Z,x,O,U,Y,ne,J,q,b=r[16].judge_count>0&&we(r);function W(y,j){return y[16].score?Je:Ue}let S=W(r),B=S(r);function $(y,j){return y[16].calculated_placement?Ze:ze}let K=$(r),N=K(r);function X(y,j){return y[16].judge_notes?Ke:Ye}let ee=X(r),R=ee(r);return{c(){e=p("tr"),l=p("td"),t=p("span"),s=A(n),o=L(),a=p("td"),h=A(_),g=L(),D=p("td"),w=A(E),v=L(),u=p("td"),i=p("span"),T=A(d),P=L(),G=A(I),Z=L(),b&&b.c(),x=L(),O=p("td"),B.c(),U=L(),Y=p("td"),N.c(),ne=L(),J=p("td"),R.c(),q=L(),this.h()},l(y){e=m(y,"TR",{class:!0});var j=C(e);l=m(j,"TD",{class:!0});var Q=C(l);t=m(Q,"SPAN",{class:!0});var se=C(t);s=M(se,n),se.forEach(f),Q.forEach(f),o=V(j),a=m(j,"TD",{class:!0});var fe=C(a);h=M(fe,_),fe.forEach(f),g=V(j),D=m(j,"TD",{class:!0});var ae=C(D);w=M(ae,E),ae.forEach(f),v=V(j),u=m(j,"TD",{class:!0});var re=C(u);i=m(re,"SPAN",{style:!0});var te=C(i);T=M(te,d),P=V(te),G=M(te,I),te.forEach(f),Z=V(re),b&&b.l(re),re.forEach(f),x=V(j),O=m(j,"TD",{class:!0});var he=C(O);B.l(he),he.forEach(f),U=V(j),Y=m(j,"TD",{class:!0});var oe=C(Y);N.l(oe),oe.forEach(f),ne=V(j),J=m(j,"TD",{class:!0});var me=C(J);R.l(me),me.forEach(f),q=V(j),j.forEach(f),this.h()},h(){k(t,"class","entry-number svelte-1n450du"),k(l,"class","svelte-1n450du"),k(a,"class","svelte-1n450du"),k(D,"class","svelte-1n450du"),ce(i,"font-weight","600"),ce(i,"color",r[16].ranking_points>0?"#059669":"#666"),k(u,"class","svelte-1n450du"),k(O,"class","svelte-1n450du"),k(Y,"class","svelte-1n450du"),k(J,"class","svelte-1n450du"),k(e,"class","svelte-1n450du")},m(y,j){H(y,e,j),c(e,l),c(l,t),c(t,s),c(e,o),c(e,a),c(a,h),c(e,g),c(e,D),c(D,w),c(e,v),c(e,u),c(u,i),c(i,T),c(i,P),c(i,G),c(u,Z),b&&b.m(u,null),c(e,x),c(e,O),B.m(O,null),c(e,U),c(e,Y),N.m(Y,null),c(e,ne),c(e,J),R.m(J,null),c(e,q)},p(y,j){j&2&&n!==(n=y[16].entry_number+"")&&F(s,n),j&2&&_!==(_=y[16].member_name+"")&&F(h,_),j&2&&E!==(E=y[16].beer_name+"")&&F(w,E),j&2&&d!==(d=y[16].ranking_points+"")&&F(T,d),j&2&&I!==(I=y[16].ranking_points===1?"pt":"pts")&&F(G,I),j&2&&ce(i,"color",y[16].ranking_points>0?"#059669":"#666"),y[16].judge_count>0?b?b.p(y,j):(b=we(y),b.c(),b.m(u,null)):b&&(b.d(1),b=null),S===(S=W(y))&&B?B.p(y,j):(B.d(1),B=S(y),B&&(B.c(),B.m(O,null))),K===(K=$(y))&&N?N.p(y,j):(N.d(1),N=K(y),N&&(N.c(),N.m(Y,null))),ee===(ee=X(y))&&R?R.p(y,j):(R.d(1),R=ee(y),R&&(R.c(),R.m(J,null)))},d(y){y&&f(e),b&&b.d(),B.d(),N.d(),R.d()}}}function Te(r){let e,l,t,n=r[12]+"",s,o,a,_,h='<tr class="svelte-1n450du"><th class="svelte-1n450du">Entry</th> <th class="svelte-1n450du">Member</th> <th class="svelte-1n450du">Beer Name</th> <th class="svelte-1n450du">Ranking Points</th> <th class="svelte-1n450du">Score</th> <th class="svelte-1n450du">Placement</th> <th class="svelte-1n450du">Judge Notes</th></tr>',g,D,E,w=_e(r[13]),v=[];for(let u=0;u<w.length;u+=1)v[u]=Ie(ke(r,w,u));return{c(){e=p("div"),l=p("div"),t=p("h3"),s=A(n),o=L(),a=p("table"),_=p("thead"),_.innerHTML=h,g=L(),D=p("tbody");for(let u=0;u<v.length;u+=1)v[u].c();E=L(),this.h()},l(u){e=m(u,"DIV",{class:!0});var i=C(e);l=m(i,"DIV",{class:!0});var d=C(l);t=m(d,"H3",{class:!0});var T=C(t);s=M(T,n),T.forEach(f),d.forEach(f),o=V(i),a=m(i,"TABLE",{class:!0});var P=C(a);_=m(P,"THEAD",{"data-svelte-h":!0}),z(_)!=="svelte-hus28l"&&(_.innerHTML=h),g=V(P),D=m(P,"TBODY",{});var I=C(D);for(let G=0;G<v.length;G+=1)v[G].l(I);I.forEach(f),P.forEach(f),E=V(i),i.forEach(f),this.h()},h(){k(t,"class","category-title svelte-1n450du"),k(l,"class","category-header svelte-1n450du"),k(a,"class","results-table svelte-1n450du"),k(e,"class","category-section svelte-1n450du")},m(u,i){H(u,e,i),c(e,l),c(l,t),c(t,s),c(e,o),c(e,a),c(a,_),c(a,g),c(a,D);for(let d=0;d<v.length;d+=1)v[d]&&v[d].m(D,null);c(e,E)},p(u,i){if(i&2&&n!==(n=u[12]+"")&&F(s,n),i&2){w=_e(u[13]);let d;for(d=0;d<w.length;d+=1){const T=ke(u,w,d);v[d]?v[d].p(T,i):(v[d]=Ie(T),v[d].c(),v[d].m(D,null))}for(;d<v.length;d+=1)v[d].d(1);v.length=w.length}},d(u){u&&f(e),ve(v,u)}}}function Qe(r){let e,l,t='<h1 class="svelte-1n450du">Competition Results</h1> <p class="subtitle svelte-1n450du">View published competition results and standings</p>',n,s,o,a="Back to Competitions",_,h,g,D,E=r[6]&&Ee(r);function w(i,d){return i[4]?Oe:i[2].length===0?Be:Re}let v=w(r),u=v(r);return{c(){e=p("div"),l=p("div"),l.innerHTML=t,n=L(),s=p("div"),o=p("button"),o.textContent=a,_=L(),E&&E.c(),h=L(),u.c(),this.h()},l(i){e=m(i,"DIV",{class:!0});var d=C(e);l=m(d,"DIV",{class:!0,"data-svelte-h":!0}),z(l)!=="svelte-utbced"&&(l.innerHTML=t),n=V(d),s=m(d,"DIV",{class:!0});var T=C(s);o=m(T,"BUTTON",{class:!0,"data-svelte-h":!0}),z(o)!=="svelte-ri2cai"&&(o.textContent=a),T.forEach(f),_=V(d),E&&E.l(d),h=V(d),u.l(d),d.forEach(f),this.h()},h(){k(l,"class","hero svelte-1n450du"),k(o,"class","btn btn-secondary svelte-1n450du"),k(s,"class","controls svelte-1n450du"),k(e,"class","container svelte-1n450du")},m(i,d){H(i,e,d),c(e,l),c(e,n),c(e,s),c(s,o),c(e,_),E&&E.m(e,null),c(e,h),u.m(e,null),g||(D=Ne(o,"click",r[9]),g=!0)},p(i,[d]){i[6]?E?E.p(i,d):(E=Ee(i),E.c(),E.m(e,h)):E&&(E.d(1),E=null),v===(v=w(i))&&u?u.p(i,d):(u.d(1),u=v(i),u&&(u.c(),u.m(e,null)))},i:le,o:le,d(i){i&&f(e),E&&E.d(),u.d(),g=!1,D()}}}function We(r){switch(r){case 1:return 3;case 2:return 2;case 3:return 1;default:return 0}}function Xe(r,e,l,t){let n=[],s=null;for(const a of t){let _;try{_=Array.isArray(a.bjcp_category_ids)?a.bjcp_category_ids:JSON.parse(a.bjcp_category_ids)}catch{console.warn("Failed to parse bjcp_category_ids for group:",a.id);continue}if(_.includes(e)){s=a.id;break}}return s?n=l.filter(a=>a.entry_id===r&&a.ranking_group_id===s):n=l.filter(a=>a.entry_id===r&&a.bjcp_category_id===e),{totalPoints:n.reduce((a,_)=>a+We(_.rank_position),0),judgeCount:n.length,rankings:n}}function ue(r){switch(r){case"1":return{text:"1st Place",class:"placement-first",medal:"🥇"};case"2":return{text:"2nd Place",class:"placement-second",medal:"🥈"};case"3":return{text:"3rd Place",class:"placement-third",medal:"🥉"};case"HM":return{text:"Honorable Mention",class:"placement-hm",medal:"🏅"};default:return{text:"No Placement",class:"placement-none",medal:""}}}function xe(r){const e=r.reduce((l,t)=>{const n=t.display_group;return l[n]||(l[n]=[]),l[n].push(t),l},{});return Object.keys(e).forEach(l=>{e[l].sort((s,o)=>o.ranking_points!==s.ranking_points?o.ranking_points-s.ranking_points:(o.score||0)-(s.score||0));let t=1,n=null;e[l].forEach((s,o)=>{n!==null&&s.ranking_points<n?t=o+1:n!==null&&s.ranking_points,s.ranking_points>0?t===1?s.calculated_placement="1":t===2?s.calculated_placement="2":t===3?s.calculated_placement="3":t<=6?s.calculated_placement="HM":s.calculated_placement="":s.calculated_placement="",n=s.ranking_points})}),e}function Pe(r){if(!r)return"No date set";try{let e=r;r.includes(" ")&&!r.includes("T")&&(e=r.replace(" ","T"),!e.includes("+")&&!e.includes("Z")&&(e+="Z"));const l=new Date(e);return isNaN(l.getTime())?(console.warn("Invalid date after parsing:",r,"->",e),"Invalid Date"):l.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}catch(e){return console.warn("Error formatting date:",r,e),"Invalid Date"}}function $e(r,e,l){let t,n,s=[],o=null,a=[],_=!0,h=!1,g=null;Le(()=>{D()}),Se(()=>{});async function D(){l(4,_=!0),l(6,g=null);try{console.log("Loading published competitions...");const{data:u,error:i}=await ie.from("competitions").select("*").eq("results_published",!0).order("judging_date",{ascending:!1});if(i)throw i;l(2,s=u||[]),console.log("Loaded",s.length,"published competitions"),s.length>0&&(l(3,o=s[0]),await w(s[0]))}catch(u){console.error("Error loading competitions:",u),l(6,g=u.message||"Failed to load competitions")}finally{l(4,_=!1)}}async function E(u){const i=u.target.value;if(!i){l(3,o=null),l(0,a=[]);return}const d=s.find(T=>T.id===i);d&&(l(3,o=d),await w(d))}async function w(u){l(5,h=!0),l(6,g=null);try{console.log("Loading results for competition:",u.name);const{data:i,error:d}=await ie.from("competition_results").select("*").eq("competition_id",u.id);if(d)throw d;if(!i||i.length===0){l(0,a=[]);return}const T=i.map(q=>q.entry_id),{data:P,error:I}=await ie.from("competition_entries").select("*").in("id",T);if(I)throw I;const G=[...new Set(P.map(q=>q.member_id))],{data:Z}=await ie.from("members").select("id, name").in("id",G),x=[...new Set(P.map(q=>q.bjcp_category_id).filter(Boolean))],{data:O}=await ie.from("bjcp_categories").select("id, category_name, category_number, subcategory_letter, subcategory_name").in("id",x);let U=[];if(u.category_system==="custom"){const{data:q,error:b}=await ie.from("competition_ranking_groups").select("*").eq("competition_id",u.id).order("group_order");b||(U=q||[])}const{data:Y,error:ne}=await ie.from("competition_rankings").select(`
          *,
          entry:competition_entries!inner(id, entry_number, beer_name),
          judge:members!competition_rankings_judge_id_fkey(id, name),
          category:bjcp_categories(category_name, category_number, subcategory_letter),
          ranking_group:competition_ranking_groups(id, group_name, group_description)
        `).eq("competition_id",u.id).order("bjcp_category_id").order("rank_position"),J=Y||[];l(0,a=i.map(q=>{const b=P.find(N=>N.id===q.entry_id),W=Z==null?void 0:Z.find(N=>N.id===(b==null?void 0:b.member_id)),S=O==null?void 0:O.find(N=>N.id===(b==null?void 0:b.bjcp_category_id)),B=S?`${S.category_number}${S.subcategory_letter||""} - ${S.category_name}`:"Unknown Category";let $=null;if(U.length>0&&(b!=null&&b.bjcp_category_id)){const N=U.find(X=>X.bjcp_category_ids.includes(b.bjcp_category_id));$=(N==null?void 0:N.group_name)||null}const K=b!=null&&b.bjcp_category_id?Xe(b.id,b.bjcp_category_id,J,U):{totalPoints:0,judgeCount:0,rankings:[]};return{...q,entry_number:(b==null?void 0:b.entry_number)||"N/A",beer_name:(b==null?void 0:b.beer_name)||"Unknown Beer",member_name:(W==null?void 0:W.name)||"Unknown Member",category_display:B,ranking_group_name:$,display_group:$||B,category_number:(S==null?void 0:S.category_number)||"",subcategory_letter:(S==null?void 0:S.subcategory_letter)||"",ranking_points:K.totalPoints,judge_count:K.judgeCount}})),console.log("Loaded",a.length,"results")}catch(i){console.error("Error loading results:",i),l(6,g=i.message||"Failed to load results")}finally{l(5,h=!1)}}function v(){He("/competitions")}return r.$$.update=()=>{r.$$.dirty&1&&l(1,t=xe(a)),r.$$.dirty&3&&l(7,n={totalEntries:a.length,placedEntries:a.filter(u=>u.calculated_placement&&u.calculated_placement!=="").length,categories:Object.keys(t).length,averageScore:a.length>0?Math.round(a.reduce((u,i)=>u+(i.score||0),0)/a.length*10)/10:0})},[a,t,s,o,_,h,g,n,E,v]}class at extends Me{constructor(e){super(),Ae(this,e,$e,Qe,Ve,{})}}export{at as component};
