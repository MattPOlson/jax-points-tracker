import{x as ke,s as A,n as P,d as h,G as w,i as k,q as g,c as I,e as O,h as H,z as S,a as ne,b as j,f as re,t as ie,O as Y,a1 as X,g as U,j as z,a2 as _e,J as W,a3 as oe,a4 as le,a5 as ae,a6 as fe,w as ye,P as $e,r as Te,p as Q,k as se,v as K}from"../chunks/DOvoZ9Ia.js";import{S as q,i as G,a as b,t as v,g as V,c as B,d as D,b as E,m as L,e as M}from"../chunks/DZMW2zPD.js";import{s as F}from"../chunks/CCM_4jRA.js";import{u as J}from"../chunks/CyOYt83s.js";import{u as R}from"../chunks/DP1yl1qp.js";import{u as Ie,t as Z,a as He,e as Ce,s as De,p as we}from"../chunks/Dw9rTOIL.js";import{e as de,u as Ee,o as Le}from"../chunks/DJwZhPfI.js";import{g as x,a as ce}from"../chunks/CgU5AtxT.js";import{g as te}from"../chunks/F2-QbuOs.js";function Me(o,e,t){const{reverseOrder:s,gutter:r=8,defaultPosition:n}=t||{},i=e.filter(a=>(a.position||n)===(o.position||n)&&a.height),f=i.findIndex(a=>a.id===o.id),l=i.filter((a,c)=>c<f&&a.visible).length;return i.filter(a=>a.visible).slice(...s?[l+1]:[0,l]).reduce((a,c)=>a+(c.height||0)+r,0)}const Oe={startPause(){De(Date.now())},endPause(){Ce(Date.now())},updateHeight:(o,e)=>{He({id:o,height:e})},calculateOffset:Me};function Ne(o){const{toasts:e,pausedAt:t}=Ie(o),s=new Map;let r;const n=[t.subscribe(i=>{if(i){for(const[,f]of s)clearTimeout(f);s.clear()}r=i}),e.subscribe(i=>{if(r)return;const f=Date.now();for(const l of i){if(s.has(l.id)||l.duration===1/0)continue;const u=(l.duration||0)+l.pauseDuration-(f-l.createdAt);if(u<0)return l.visible&&Z.dismiss(l.id),null;s.set(l.id,setTimeout(()=>Z.dismiss(l.id),u))}})];return ke(()=>{for(const i of n)i()}),{toasts:e,handlers:Oe}}function Pe(o){let e;return{c(){e=H("div"),this.h()},l(t){e=I(t,"DIV",{class:!0}),O(e).forEach(h),this.h()},h(){g(e,"class","svelte-11kvm4p"),w(e,"--primary",o[0]),w(e,"--secondary",o[1])},m(t,s){k(t,e,s)},p(t,[s]){s&1&&w(e,"--primary",t[0]),s&2&&w(e,"--secondary",t[1])},i:P,o:P,d(t){t&&h(e)}}}function Se(o,e,t){let{primary:s="#61d345"}=e,{secondary:r="#fff"}=e;return o.$$set=n=>{"primary"in n&&t(0,s=n.primary),"secondary"in n&&t(1,r=n.secondary)},[s,r]}class Ve extends q{constructor(e){super(),G(this,e,Se,Pe,A,{primary:0,secondary:1})}}function Be(o){let e;return{c(){e=H("div"),this.h()},l(t){e=I(t,"DIV",{class:!0}),O(e).forEach(h),this.h()},h(){g(e,"class","svelte-1ee93ns"),w(e,"--primary",o[0]),w(e,"--secondary",o[1])},m(t,s){k(t,e,s)},p(t,[s]){s&1&&w(e,"--primary",t[0]),s&2&&w(e,"--secondary",t[1])},i:P,o:P,d(t){t&&h(e)}}}function je(o,e,t){let{primary:s="#ff4b4b"}=e,{secondary:r="#fff"}=e;return o.$$set=n=>{"primary"in n&&t(0,s=n.primary),"secondary"in n&&t(1,r=n.secondary)},[s,r]}class Ae extends q{constructor(e){super(),G(this,e,je,Be,A,{primary:0,secondary:1})}}function qe(o){let e;return{c(){e=H("div"),this.h()},l(t){e=I(t,"DIV",{class:!0}),O(e).forEach(h),this.h()},h(){g(e,"class","svelte-1j7dflg"),w(e,"--primary",o[0]),w(e,"--secondary",o[1])},m(t,s){k(t,e,s)},p(t,[s]){s&1&&w(e,"--primary",t[0]),s&2&&w(e,"--secondary",t[1])},i:P,o:P,d(t){t&&h(e)}}}function Ge(o,e,t){let{primary:s="#616161"}=e,{secondary:r="#e0e0e0"}=e;return o.$$set=n=>{"primary"in n&&t(0,s=n.primary),"secondary"in n&&t(1,r=n.secondary)},[s,r]}class Ue extends q{constructor(e){super(),G(this,e,Ge,qe,A,{primary:0,secondary:1})}}function ze(o){let e,t,s,r;const n=[o[0]];let i={};for(let l=0;l<n.length;l+=1)i=X(i,n[l]);t=new Ue({props:i});let f=o[2]!=="loading"&&me(o);return{c(){e=H("div"),E(t.$$.fragment),s=z(),f&&f.c(),this.h()},l(l){e=I(l,"DIV",{class:!0});var u=O(e);M(t.$$.fragment,u),s=U(u),f&&f.l(u),u.forEach(h),this.h()},h(){g(e,"class","indicator svelte-1kgeier")},m(l,u){k(l,e,u),L(t,e,null),j(e,s),f&&f.m(e,null),r=!0},p(l,u){const a=u&1?x(n,[ce(l[0])]):{};t.$set(a),l[2]!=="loading"?f?(f.p(l,u),u&4&&v(f,1)):(f=me(l),f.c(),v(f,1),f.m(e,null)):f&&(V(),b(f,1,1,()=>{f=null}),B())},i(l){r||(v(t.$$.fragment,l),v(f),r=!0)},o(l){b(t.$$.fragment,l),b(f),r=!1},d(l){l&&h(e),D(t),f&&f.d()}}}function Fe(o){let e,t,s;var r=o[1];function n(i,f){return{}}return r&&(e=Y(r,n())),{c(){e&&E(e.$$.fragment),t=S()},l(i){e&&M(e.$$.fragment,i),t=S()},m(i,f){e&&L(e,i,f),k(i,t,f),s=!0},p(i,f){if(f&2&&r!==(r=i[1])){if(e){V();const l=e;b(l.$$.fragment,1,0,()=>{D(l,1)}),B()}r?(e=Y(r,n()),E(e.$$.fragment),v(e.$$.fragment,1),L(e,t.parentNode,t)):e=null}},i(i){s||(e&&v(e.$$.fragment,i),s=!0)},o(i){e&&b(e.$$.fragment,i),s=!1},d(i){i&&h(t),e&&D(e,i)}}}function Re(o){let e,t;return{c(){e=H("div"),t=ie(o[1]),this.h()},l(s){e=I(s,"DIV",{class:!0});var r=O(e);t=re(r,o[1]),r.forEach(h),this.h()},h(){g(e,"class","animated svelte-1kgeier")},m(s,r){k(s,e,r),j(e,t)},p(s,r){r&2&&ne(t,s[1])},i:P,o:P,d(s){s&&h(e)}}}function me(o){let e,t,s,r;const n=[Je,Ye],i=[];function f(l,u){return l[2]==="error"?0:1}return t=f(o),s=i[t]=n[t](o),{c(){e=H("div"),s.c(),this.h()},l(l){e=I(l,"DIV",{class:!0});var u=O(e);s.l(u),u.forEach(h),this.h()},h(){g(e,"class","status svelte-1kgeier")},m(l,u){k(l,e,u),i[t].m(e,null),r=!0},p(l,u){let a=t;t=f(l),t===a?i[t].p(l,u):(V(),b(i[a],1,1,()=>{i[a]=null}),B(),s=i[t],s?s.p(l,u):(s=i[t]=n[t](l),s.c()),v(s,1),s.m(e,null))},i(l){r||(v(s),r=!0)},o(l){b(s),r=!1},d(l){l&&h(e),i[t].d()}}}function Ye(o){let e,t;const s=[o[0]];let r={};for(let n=0;n<s.length;n+=1)r=X(r,s[n]);return e=new Ve({props:r}),{c(){E(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,i){L(e,n,i),t=!0},p(n,i){const f=i&1?x(s,[ce(n[0])]):{};e.$set(f)},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){b(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Je(o){let e,t;const s=[o[0]];let r={};for(let n=0;n<s.length;n+=1)r=X(r,s[n]);return e=new Ae({props:r}),{c(){E(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,i){L(e,n,i),t=!0},p(n,i){const f=i&1?x(s,[ce(n[0])]):{};e.$set(f)},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){b(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function We(o){let e,t,s,r;const n=[Re,Fe,ze],i=[];function f(l,u){return typeof l[1]=="string"?0:typeof l[1]<"u"?1:l[2]!=="blank"?2:-1}return~(e=f(o))&&(t=i[e]=n[e](o)),{c(){t&&t.c(),s=S()},l(l){t&&t.l(l),s=S()},m(l,u){~e&&i[e].m(l,u),k(l,s,u),r=!0},p(l,[u]){let a=e;e=f(l),e===a?~e&&i[e].p(l,u):(t&&(V(),b(i[a],1,1,()=>{i[a]=null}),B()),~e?(t=i[e],t?t.p(l,u):(t=i[e]=n[e](l),t.c()),v(t,1),t.m(s.parentNode,s)):t=null)},i(l){r||(v(t),r=!0)},o(l){b(t),r=!1},d(l){l&&h(s),~e&&i[e].d(l)}}}function Ze(o,e,t){let s,r,n,{toast:i}=e;return o.$$set=f=>{"toast"in f&&t(3,i=f.toast)},o.$$.update=()=>{o.$$.dirty&8&&t(2,{type:s,icon:r,iconTheme:n}=i,s,(t(1,r),t(3,i)),(t(0,n),t(3,i)))},[n,r,s,i]}class ue extends q{constructor(e){super(),G(this,e,Ze,We,A,{toast:3})}}function Ke(o){let e,t,s;var r=o[0].message;function n(i,f){return{props:{toast:i[0]}}}return r&&(e=Y(r,n(o))),{c(){e&&E(e.$$.fragment),t=S()},l(i){e&&M(e.$$.fragment,i),t=S()},m(i,f){e&&L(e,i,f),k(i,t,f),s=!0},p(i,f){if(f&1&&r!==(r=i[0].message)){if(e){V();const l=e;b(l.$$.fragment,1,0,()=>{D(l,1)}),B()}r?(e=Y(r,n(i)),E(e.$$.fragment),v(e.$$.fragment,1),L(e,t.parentNode,t)):e=null}else if(r){const l={};f&1&&(l.toast=i[0]),e.$set(l)}},i(i){s||(e&&v(e.$$.fragment,i),s=!0)},o(i){e&&b(e.$$.fragment,i),s=!1},d(i){i&&h(t),e&&D(e,i)}}}function Qe(o){let e=o[0].message+"",t;return{c(){t=ie(e)},l(s){t=re(s,e)},m(s,r){k(s,t,r)},p(s,r){r&1&&e!==(e=s[0].message+"")&&ne(t,e)},i:P,o:P,d(s){s&&h(t)}}}function Xe(o){let e,t,s,r;const n=[Qe,Ke],i=[];function f(a,c){return typeof a[0].message=="string"?0:1}t=f(o),s=i[t]=n[t](o);let l=[{class:"message"},o[0].ariaProps],u={};for(let a=0;a<l.length;a+=1)u=X(u,l[a]);return{c(){e=H("div"),s.c(),this.h()},l(a){e=I(a,"DIV",{class:!0});var c=O(e);s.l(c),c.forEach(h),this.h()},h(){_e(e,u),W(e,"svelte-1nauejd",!0)},m(a,c){k(a,e,c),i[t].m(e,null),r=!0},p(a,[c]){let d=t;t=f(a),t===d?i[t].p(a,c):(V(),b(i[d],1,1,()=>{i[d]=null}),B(),s=i[t],s?s.p(a,c):(s=i[t]=n[t](a),s.c()),v(s,1),s.m(e,null)),_e(e,u=x(l,[{class:"message"},c&1&&a[0].ariaProps])),W(e,"svelte-1nauejd",!0)},i(a){r||(v(s),r=!0)},o(a){b(s),r=!1},d(a){a&&h(e),i[t].d()}}}function xe(o,e,t){let{toast:s}=e;return o.$$set=r=>{"toast"in r&&t(0,s=r.toast)},[s]}class ee extends q{constructor(e){super(),G(this,e,xe,Xe,A,{toast:0})}}const et=o=>({toast:o&1}),he=o=>({ToastIcon:ue,ToastMessage:ee,toast:o[0]});function tt(o){let e;const t=o[6].default,s=oe(t,o,o[7],he),r=s||nt(o);return{c(){r&&r.c()},l(n){r&&r.l(n)},m(n,i){r&&r.m(n,i),e=!0},p(n,i){s?s.p&&(!e||i&129)&&le(s,t,n,n[7],e?fe(t,n[7],i,et):ae(n[7]),he):r&&r.p&&(!e||i&1)&&r.p(n,e?i:-1)},i(n){e||(v(r,n),e=!0)},o(n){b(r,n),e=!1},d(n){r&&r.d(n)}}}function st(o){let e,t,s;var r=o[2];function n(i,f){return{props:{$$slots:{message:[it],icon:[rt]},$$scope:{ctx:i}}}}return r&&(e=Y(r,n(o))),{c(){e&&E(e.$$.fragment),t=S()},l(i){e&&M(e.$$.fragment,i),t=S()},m(i,f){e&&L(e,i,f),k(i,t,f),s=!0},p(i,f){if(f&4&&r!==(r=i[2])){if(e){V();const l=e;b(l.$$.fragment,1,0,()=>{D(l,1)}),B()}r?(e=Y(r,n(i)),E(e.$$.fragment),v(e.$$.fragment,1),L(e,t.parentNode,t)):e=null}else if(r){const l={};f&129&&(l.$$scope={dirty:f,ctx:i}),e.$set(l)}},i(i){s||(e&&v(e.$$.fragment,i),s=!0)},o(i){e&&b(e.$$.fragment,i),s=!1},d(i){i&&h(t),e&&D(e,i)}}}function nt(o){let e,t,s,r;return e=new ue({props:{toast:o[0]}}),s=new ee({props:{toast:o[0]}}),{c(){E(e.$$.fragment),t=z(),E(s.$$.fragment)},l(n){M(e.$$.fragment,n),t=U(n),M(s.$$.fragment,n)},m(n,i){L(e,n,i),k(n,t,i),L(s,n,i),r=!0},p(n,i){const f={};i&1&&(f.toast=n[0]),e.$set(f);const l={};i&1&&(l.toast=n[0]),s.$set(l)},i(n){r||(v(e.$$.fragment,n),v(s.$$.fragment,n),r=!0)},o(n){b(e.$$.fragment,n),b(s.$$.fragment,n),r=!1},d(n){n&&h(t),D(e,n),D(s,n)}}}function rt(o){let e,t;return e=new ue({props:{toast:o[0],slot:"icon"}}),{c(){E(e.$$.fragment)},l(s){M(e.$$.fragment,s)},m(s,r){L(e,s,r),t=!0},p(s,r){const n={};r&1&&(n.toast=s[0]),e.$set(n)},i(s){t||(v(e.$$.fragment,s),t=!0)},o(s){b(e.$$.fragment,s),t=!1},d(s){D(e,s)}}}function it(o){let e,t;return e=new ee({props:{toast:o[0],slot:"message"}}),{c(){E(e.$$.fragment)},l(s){M(e.$$.fragment,s)},m(s,r){L(e,s,r),t=!0},p(s,r){const n={};r&1&&(n.toast=s[0]),e.$set(n)},i(s){t||(v(e.$$.fragment,s),t=!0)},o(s){b(e.$$.fragment,s),t=!1},d(s){D(e,s)}}}function ot(o){let e,t,s,r,n,i;const f=[st,tt],l=[];function u(a,c){return a[2]?0:1}return t=u(o),s=l[t]=f[t](o),{c(){e=H("div"),s.c(),this.h()},l(a){e=I(a,"DIV",{class:!0,style:!0});var c=O(e);s.l(c),c.forEach(h),this.h()},h(){g(e,"class",r="base "+(o[0].height?o[4]:"transparent")+" "+(o[0].className||"")+" svelte-ug60r4"),g(e,"style",n=o[1]+"; "+o[0].style),w(e,"--factor",o[3])},m(a,c){k(a,e,c),l[t].m(e,null),i=!0},p(a,[c]){let d=t;t=u(a),t===d?l[t].p(a,c):(V(),b(l[d],1,1,()=>{l[d]=null}),B(),s=l[t],s?s.p(a,c):(s=l[t]=f[t](a),s.c()),v(s,1),s.m(e,null)),(!i||c&17&&r!==(r="base "+(a[0].height?a[4]:"transparent")+" "+(a[0].className||"")+" svelte-ug60r4"))&&g(e,"class",r),(!i||c&3&&n!==(n=a[1]+"; "+a[0].style))&&g(e,"style",n);const _=c&3;(c&11||_)&&w(e,"--factor",a[3])},i(a){i||(v(s),i=!0)},o(a){b(s),i=!1},d(a){a&&h(e),l[t].d()}}}function lt(o,e,t){let{$$slots:s={},$$scope:r}=e,{toast:n}=e,{position:i=void 0}=e,{style:f=""}=e,{Component:l=void 0}=e,u,a;return o.$$set=c=>{"toast"in c&&t(0,n=c.toast),"position"in c&&t(5,i=c.position),"style"in c&&t(1,f=c.style),"Component"in c&&t(2,l=c.Component),"$$scope"in c&&t(7,r=c.$$scope)},o.$$.update=()=>{if(o.$$.dirty&33){const c=(n.position||i||"top-center").includes("top");t(3,u=c?1:-1);const[d,_]=we()?["fadeIn","fadeOut"]:["enter","exit"];t(4,a=n.visible?d:_)}},[n,f,l,u,a,i,s,r]}class at extends q{constructor(e){super(),G(this,e,lt,ot,A,{toast:0,position:5,style:1,Component:2})}}const ft=o=>({toast:o&1}),pe=o=>({toast:o[0]});function ct(o){let e;const t=o[8].default,s=oe(t,o,o[7],pe),r=s||_t(o);return{c(){r&&r.c()},l(n){r&&r.l(n)},m(n,i){r&&r.m(n,i),e=!0},p(n,i){s?s.p&&(!e||i&129)&&le(s,t,n,n[7],e?fe(t,n[7],i,ft):ae(n[7]),pe):r&&r.p&&(!e||i&1)&&r.p(n,e?i:-1)},i(n){e||(v(r,n),e=!0)},o(n){b(r,n),e=!1},d(n){r&&r.d(n)}}}function ut(o){let e,t;return e=new ee({props:{toast:o[0]}}),{c(){E(e.$$.fragment)},l(s){M(e.$$.fragment,s)},m(s,r){L(e,s,r),t=!0},p(s,r){const n={};r&1&&(n.toast=s[0]),e.$set(n)},i(s){t||(v(e.$$.fragment,s),t=!0)},o(s){b(e.$$.fragment,s),t=!1},d(s){D(e,s)}}}function _t(o){let e,t;return e=new at({props:{toast:o[0],position:o[0].position}}),{c(){E(e.$$.fragment)},l(s){M(e.$$.fragment,s)},m(s,r){L(e,s,r),t=!0},p(s,r){const n={};r&1&&(n.toast=s[0]),r&1&&(n.position=s[0].position),e.$set(n)},i(s){t||(v(e.$$.fragment,s),t=!0)},o(s){b(e.$$.fragment,s),t=!1},d(s){D(e,s)}}}function dt(o){let e,t,s,r;const n=[ut,ct],i=[];function f(l,u){return l[0].type==="custom"?0:1}return t=f(o),s=i[t]=n[t](o),{c(){e=H("div"),s.c(),this.h()},l(l){e=I(l,"DIV",{class:!0});var u=O(e);s.l(u),u.forEach(h),this.h()},h(){g(e,"class","wrapper svelte-v01oml"),W(e,"active",o[0].visible),W(e,"transition",!we()),w(e,"--factor",o[3]),w(e,"--offset",o[0].offset),w(e,"top",o[5]),w(e,"bottom",o[4]),w(e,"justify-content",o[2])},m(l,u){k(l,e,u),i[t].m(e,null),o[9](e),r=!0},p(l,[u]){let a=t;t=f(l),t===a?i[t].p(l,u):(V(),b(i[a],1,1,()=>{i[a]=null}),B(),s=i[t],s?s.p(l,u):(s=i[t]=n[t](l),s.c()),v(s,1),s.m(e,null)),(!r||u&1)&&W(e,"active",l[0].visible),u&8&&w(e,"--factor",l[3]),u&1&&w(e,"--offset",l[0].offset),u&32&&w(e,"top",l[5]),u&16&&w(e,"bottom",l[4]),u&4&&w(e,"justify-content",l[2])},i(l){r||(v(s),r=!0)},o(l){b(s),r=!1},d(l){l&&h(e),i[t].d(),o[9](null)}}}function mt(o,e,t){let s,r,n,i,{$$slots:f={},$$scope:l}=e,{toast:u}=e,{setHeight:a}=e,c;ye(()=>{a(c.getBoundingClientRect().height)});function d(_){$e[_?"unshift":"push"](()=>{c=_,t(1,c)})}return o.$$set=_=>{"toast"in _&&t(0,u=_.toast),"setHeight"in _&&t(6,a=_.setHeight),"$$scope"in _&&t(7,l=_.$$scope)},o.$$.update=()=>{var _,m,T,y,N,$;o.$$.dirty&1&&t(5,s=(_=u.position)!=null&&_.includes("top")?0:null),o.$$.dirty&1&&t(4,r=(m=u.position)!=null&&m.includes("bottom")?0:null),o.$$.dirty&1&&t(3,n=(T=u.position)!=null&&T.includes("top")?1:-1),o.$$.dirty&1&&t(2,i=((y=u.position)==null?void 0:y.includes("center"))&&"center"||(((N=u.position)==null?void 0:N.includes("right"))||(($=u.position)==null?void 0:$.includes("end")))&&"flex-end"||null)},[u,c,i,n,r,s,a,l,f,d]}class ht extends q{constructor(e){super(),G(this,e,mt,dt,A,{toast:0,setHeight:6})}}function ge(o,e,t){const s=o.slice();return s[11]=e[t],s}function ve(o,e){let t,s,r;function n(...i){return e[10](e[11],...i)}return s=new ht({props:{toast:e[11],setHeight:n}}),{key:o,first:null,c(){t=S(),E(s.$$.fragment),this.h()},l(i){t=S(),M(s.$$.fragment,i),this.h()},h(){this.first=t},m(i,f){k(i,t,f),L(s,i,f),r=!0},p(i,f){e=i;const l={};f&4&&(l.toast=e[11]),f&4&&(l.setHeight=n),s.$set(l)},i(i){r||(v(s.$$.fragment,i),r=!0)},o(i){b(s.$$.fragment,i),r=!1},d(i){i&&h(t),D(s,i)}}}function pt(o){let e,t=[],s=new Map,r,n,i,f,l=de(o[2]);const u=a=>a[11].id;for(let a=0;a<l.length;a+=1){let c=ge(o,l,a),d=u(c);s.set(d,t[a]=ve(d,c))}return{c(){e=H("div");for(let a=0;a<t.length;a+=1)t[a].c();this.h()},l(a){e=I(a,"DIV",{class:!0,style:!0,role:!0});var c=O(e);for(let d=0;d<t.length;d+=1)t[d].l(c);c.forEach(h),this.h()},h(){g(e,"class",r="toaster "+(o[1]||"")+" svelte-1phplh9"),g(e,"style",o[0]),g(e,"role","alert")},m(a,c){k(a,e,c);for(let d=0;d<t.length;d+=1)t[d]&&t[d].m(e,null);n=!0,i||(f=[Q(e,"mouseenter",o[4].startPause),Q(e,"mouseleave",o[4].endPause)],i=!0)},p(a,[c]){c&20&&(l=de(a[2]),V(),t=Ee(t,c,u,1,a,l,s,e,Le,ve,null,ge),B()),(!n||c&2&&r!==(r="toaster "+(a[1]||"")+" svelte-1phplh9"))&&g(e,"class",r),(!n||c&1)&&g(e,"style",a[0])},i(a){if(!n){for(let c=0;c<l.length;c+=1)v(t[c]);n=!0}},o(a){for(let c=0;c<t.length;c+=1)b(t[c]);n=!1},d(a){a&&h(e);for(let c=0;c<t.length;c+=1)t[c].d();i=!1,Te(f)}}}function gt(o,e,t){let s,{reverseOrder:r=!1}=e,{position:n="top-center"}=e,{toastOptions:i=void 0}=e,{gutter:f=8}=e,{containerStyle:l=void 0}=e,{containerClassName:u=void 0}=e;const{toasts:a,handlers:c}=Ne(i);se(o,a,m=>t(9,s=m));let d;const _=(m,T)=>c.updateHeight(m.id,T);return o.$$set=m=>{"reverseOrder"in m&&t(5,r=m.reverseOrder),"position"in m&&t(6,n=m.position),"toastOptions"in m&&t(7,i=m.toastOptions),"gutter"in m&&t(8,f=m.gutter),"containerStyle"in m&&t(0,l=m.containerStyle),"containerClassName"in m&&t(1,u=m.containerClassName)},o.$$.update=()=>{o.$$.dirty&864&&t(2,d=s.map(m=>({...m,position:m.position||n,offset:c.calculateOffset(m,s,{reverseOrder:r,gutter:f,defaultPosition:n})})))},[l,u,d,a,c,r,n,i,f,s,_]}class vt extends q{constructor(e){super(),G(this,e,gt,pt,A,{reverseOrder:5,position:6,toastOptions:7,gutter:8,containerStyle:0,containerClassName:1})}}function bt(o){let e,t='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#333" stroke-width="2" class="svelte-ko2ld2"><circle cx="12" cy="8" r="5"></circle><path d="M20 21a8 8 0 1 0-16 0"></path></svg>';return{c(){e=H("a"),e.innerHTML=t,this.h()},l(s){e=I(s,"A",{href:!0,"aria-label":!0,class:!0,"data-svelte-h":!0}),K(e)!=="svelte-4r1pic"&&(e.innerHTML=t),this.h()},h(){g(e,"href","/login"),g(e,"aria-label","Login"),g(e,"class","login-icon svelte-ko2ld2")},m(s,r){k(s,e,r)},p:P,d(s){s&&h(e)}}}function kt(o){var d;let e,t='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-ko2ld2"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg>',s,r,n,i='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" class="svelte-ko2ld2"><circle cx="12" cy="8" r="5"></circle><path d="M20 21a8 8 0 1 0-16 0"></path></svg>',f,l,u,a,c=((d=o[1])==null?void 0:d.name)&&be(o);return{c(){e=H("button"),e.innerHTML=t,s=z(),r=H("div"),n=H("div"),n.innerHTML=i,f=z(),c&&c.c(),this.h()},l(_){e=I(_,"BUTTON",{class:!0,title:!0,"aria-label":!0,"data-svelte-h":!0}),K(e)!=="svelte-1mlltsg"&&(e.innerHTML=t),s=U(_),r=I(_,"DIV",{class:!0,title:!0});var m=O(r);n=I(m,"DIV",{class:!0,title:!0,"data-svelte-h":!0}),K(n)!=="svelte-11vl3mi"&&(n.innerHTML=i),f=U(m),c&&c.l(m),m.forEach(h),this.h()},h(){var _;g(e,"class","nav-button logout-btn svelte-ko2ld2"),g(e,"title","Logout"),g(e,"aria-label","Logout"),g(n,"class","login-icon logged-in svelte-ko2ld2"),g(n,"title","You are logged in"),g(r,"class","user-info svelte-ko2ld2"),g(r,"title",l=((_=o[1])==null?void 0:_.name)||o[0].email)},m(_,m){k(_,e,m),k(_,s,m),k(_,r,m),j(r,n),j(r,f),c&&c.m(r,null),u||(a=Q(e,"click",o[2]),u=!0)},p(_,m){var T,y;(T=_[1])!=null&&T.name?c?c.p(_,m):(c=be(_),c.c(),c.m(r,null)):c&&(c.d(1),c=null),m&3&&l!==(l=((y=_[1])==null?void 0:y.name)||_[0].email)&&g(r,"title",l)},d(_){_&&(h(e),h(s),h(r)),c&&c.d(),u=!1,a()}}}function be(o){let e,t=o[1].name+"",s;return{c(){e=H("span"),s=ie(t),this.h()},l(r){e=I(r,"SPAN",{class:!0});var n=O(e);s=re(n,t),n.forEach(h),this.h()},h(){g(e,"class","user-name svelte-ko2ld2")},m(r,n){k(r,e,n),j(e,s)},p(r,n){n&2&&t!==(t=r[1].name+"")&&ne(s,t)},d(r){r&&h(e)}}}function yt(o){let e,t,s='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-ko2ld2"><path d="m12 19-7-7 7-7"></path><path d="M19 12H5"></path></svg>',r,n,i='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-ko2ld2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>',f,l,u,a,c,d,_;function m(p,C){return p[0]?kt:bt}let T=m(o),y=T(o);u=new vt({props:{position:"top-right",toastOptions:{duration:4e3,style:"border-radius: 6px; background: white; color: #333;"}}});const N=o[5].default,$=oe(N,o,o[4],null);return{c(){e=H("div"),t=H("button"),t.innerHTML=s,r=z(),n=H("a"),n.innerHTML=i,f=z(),y.c(),l=z(),E(u.$$.fragment),a=z(),$&&$.c(),this.h()},l(p){e=I(p,"DIV",{class:!0});var C=O(e);t=I(C,"BUTTON",{class:!0,title:!0,"aria-label":!0,"data-svelte-h":!0}),K(t)!=="svelte-1heh177"&&(t.innerHTML=s),r=U(C),n=I(C,"A",{href:!0,class:!0,title:!0,"aria-label":!0,"data-svelte-h":!0}),K(n)!=="svelte-1di83p2"&&(n.innerHTML=i),f=U(C),y.l(C),C.forEach(h),l=U(p),M(u.$$.fragment,p),a=U(p),$&&$.l(p),this.h()},h(){g(t,"class","nav-button svelte-ko2ld2"),g(t,"title","Go back"),g(t,"aria-label","Go back to previous page"),g(n,"href","/"),g(n,"class","nav-button svelte-ko2ld2"),g(n,"title","Home"),g(n,"aria-label","Go to homepage"),g(e,"class","topbar svelte-ko2ld2")},m(p,C){k(p,e,C),j(e,t),j(e,r),j(e,n),j(e,f),y.m(e,null),k(p,l,C),L(u,p,C),k(p,a,C),$&&$.m(p,C),c=!0,d||(_=Q(t,"click",o[3]),d=!0)},p(p,[C]){T===(T=m(p))&&y?y.p(p,C):(y.d(1),y=T(p),y&&(y.c(),y.m(e,null))),$&&$.p&&(!c||C&16)&&le($,N,p,p[4],c?fe(N,p[4],C,null):ae(p[4]),null)},i(p){c||(v(u.$$.fragment,p),v($,p),c=!0)},o(p){b(u.$$.fragment,p),b($,p),c=!1},d(p){p&&(h(e),h(l),h(a)),y.d(),D(u,p),$&&$.d(p),d=!1,_()}}}function wt(o,e,t){let s,r;se(o,J,d=>t(0,s=d)),se(o,R,d=>t(1,r=d));let{$$slots:n={},$$scope:i}=e,f;async function l(d){try{const{data:_,error:m}=await F.from("members").select("*").eq("id",d).single();if(m)throw m;R.set(_)}catch(_){console.error("Failed to fetch profile:",_),R.set(null)}}async function u(d){try{const{data:_,error:m}=await F.from("members").select("last_login_at").eq("id",d).single();if(m)throw m;const T=(_==null?void 0:_.last_login_at)||"1970-01-01T00:00:00Z",{data:y,error:N}=await F.from("point_submissions").select("category, description, event_date").eq("member_id",d).eq("approved",!0).gt("updated_at",T);if(N)throw N;y!=null&&y.length&&y.forEach($=>{Z.success(`🎉 Your "${$.description}" submission for ${$.category} was approved!`,{duration:8e3})}),await F.from("members").update({last_login_at:new Date().toISOString()}).eq("id",d)}catch(_){console.error("Approval check failed:",_)}}ye(()=>typeof window>"u"?void 0:((async()=>{try{const{data:{session:_},error:m}=await F.auth.getSession();if(m)throw m;const T=(_==null?void 0:_.user)??null;J.set(T),T&&(await l(T.id),await u(T.id));const{data:y}=F.auth.onAuthStateChange(async(N,$)=>{setTimeout(async()=>{const p=($==null?void 0:$.user)??null;J.set(p),N==="SIGNED_IN"&&p&&(await l(p.id),await u(p.id),window.location.pathname==="/login"&&te("/")),N==="SIGNED_OUT"&&R.set(null)},0)});f=y.subscription}catch(_){console.error("Auth initialization failed:",_),J.set(null),R.set(null)}})(),()=>{f&&f.unsubscribe()})),ke(()=>{f&&f.unsubscribe()});async function a(){try{const{error:d}=await F.auth.signOut();if(d)throw d;J.set(null),R.set(null),te("/login"),Z.success("Logged out successfully")}catch(d){console.error("Logout failed:",d),Z.error("Failed to log out")}}function c(){window.history.length>1?window.history.back():te("/")}return o.$$set=d=>{"$$scope"in d&&t(4,i=d.$$scope)},[s,r,a,c,i,n]}class Ot extends q{constructor(e){super(),G(this,e,wt,yt,A,{})}}export{Ot as component};
