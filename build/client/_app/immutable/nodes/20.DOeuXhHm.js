import{s as Ae,n as ce,d as u,i as w,b as r,q as m,c as h,e as J,v as M,g as A,h as v,j as U,k as _e,w as Ue,F as pe,r as Ie,a as Y,p as ie,f as N,z as be,t as O,G as ne,y as Pe,A as ge,B as se,C as Ce}from"../chunks/DOvoZ9Ia.js";import{e as he}from"../chunks/DJwZhPfI.js";import{S as Be,i as Ve}from"../chunks/DZMW2zPD.js";import{g as ve}from"../chunks/F2-QbuOs.js";import{p as Ne}from"../chunks/BwSWz2JU.js";import{u as Oe}from"../chunks/DP1yl1qp.js";import{c as me,J as ae,j as Se,d as Ge,e as He}from"../chunks/z-QhZtwN.js";import{s as Ee}from"../chunks/CCM_4jRA.js";function je(l,e,t){const s=l.slice();return s[23]=e[t],s}function ke(l,e,t){const s=l.slice();return s[26]=e[t],s}function Me(l){let e,t,s=l[0].name+"",n,a,o,d,f=l[0].results_published?"Results Published":new Date>new Date(l[0].entry_deadline)?"Judging Phase":"Entry Phase",c,b,V,L,C,k=l[4]?"Cancel":"Add Judge",R,D,K,y,Z="Back to Competitions",q,p,B,G,Q,z=l[6].length+"",_,E,P,S,F,H,oe,W;function ue(i,g){return i[7]?Xe:i[6].length===0?Fe:qe}let te=ue(l),X=te(l),I=l[4]&&De(l),j=l[8]&&ye(l);return{c(){e=v("div"),t=v("h2"),n=O(s),a=U(),o=v("p"),d=v("span"),c=O(f),V=U(),L=v("div"),C=v("button"),R=O(k),K=U(),y=v("button"),y.textContent=Z,q=U(),p=v("div"),B=v("div"),G=v("h3"),Q=O("Assigned Judges ("),_=O(z),E=O(")"),P=U(),X.c(),S=U(),I&&I.c(),F=U(),j&&j.c(),H=be(),this.h()},l(i){e=h(i,"DIV",{class:!0});var g=J(e);t=h(g,"H2",{class:!0});var T=J(t);n=N(T,s),T.forEach(u),a=A(g),o=h(g,"P",{});var x=J(o);d=h(x,"SPAN",{class:!0});var re=J(d);c=N(re,f),re.forEach(u),x.forEach(u),g.forEach(u),V=A(i),L=h(i,"DIV",{class:!0});var $=J(L);C=h($,"BUTTON",{class:!0});var de=J(C);R=N(de,k),de.forEach(u),K=A($),y=h($,"BUTTON",{class:!0,"data-svelte-h":!0}),M(y)!=="svelte-mqek4b"&&(y.textContent=Z),$.forEach(u),q=A(i),p=h(i,"DIV",{class:!0});var ee=J(p);B=h(ee,"DIV",{class:!0});var fe=J(B);G=h(fe,"H3",{});var le=J(G);Q=N(le,"Assigned Judges ("),_=N(le,z),E=N(le,")"),le.forEach(u),fe.forEach(u),P=A(ee),X.l(ee),S=A(ee),I&&I.l(ee),ee.forEach(u),F=A(i),j&&j.l(i),H=be(),this.h()},h(){m(t,"class","svelte-1igi6bz"),m(d,"class",b="status-badge "+Te(l[0])+" svelte-1igi6bz"),m(e,"class","competition-info svelte-1igi6bz"),m(C,"class","btn btn-success svelte-1igi6bz"),C.disabled=D=l[1].length===0,m(y,"class","btn btn-secondary svelte-1igi6bz"),m(L,"class","controls svelte-1igi6bz"),m(B,"class","section-header svelte-1igi6bz"),m(p,"class","judges-section svelte-1igi6bz")},m(i,g){w(i,e,g),r(e,t),r(t,n),r(e,a),r(e,o),r(o,d),r(d,c),w(i,V,g),w(i,L,g),r(L,C),r(C,R),r(L,K),r(L,y),w(i,q,g),w(i,p,g),r(p,B),r(B,G),r(G,Q),r(G,_),r(G,E),r(p,P),X.m(p,null),r(p,S),I&&I.m(p,null),w(i,F,g),j&&j.m(i,g),w(i,H,g),oe||(W=[ie(C,"click",l[14]),ie(y,"click",l[15])],oe=!0)},p(i,g){g&1&&s!==(s=i[0].name+"")&&Y(n,s),g&1&&f!==(f=i[0].results_published?"Results Published":new Date>new Date(i[0].entry_deadline)?"Judging Phase":"Entry Phase")&&Y(c,f),g&1&&b!==(b="status-badge "+Te(i[0])+" svelte-1igi6bz")&&m(d,"class",b),g&16&&k!==(k=i[4]?"Cancel":"Add Judge")&&Y(R,k),g&2&&D!==(D=i[1].length===0)&&(C.disabled=D),g&64&&z!==(z=i[6].length+"")&&Y(_,z),te===(te=ue(i))&&X?X.p(i,g):(X.d(1),X=te(i),X&&(X.c(),X.m(p,S))),i[4]?I?I.p(i,g):(I=De(i),I.c(),I.m(p,null)):I&&(I.d(1),I=null),i[8]?j?j.p(i,g):(j=ye(i),j.c(),j.m(H.parentNode,H)):j&&(j.d(1),j=null)},d(i){i&&(u(e),u(V),u(L),u(q),u(p),u(F),u(H)),X.d(),I&&I.d(),j&&j.d(i),oe=!1,Ie(W)}}}function Re(l){let e,t='<div class="spinner svelte-1igi6bz"></div> <p>Loading competition data...</p>';return{c(){e=v("div"),e.innerHTML=t,this.h()},l(s){e=h(s,"DIV",{class:!0,"data-svelte-h":!0}),M(e)!=="svelte-1rk86ga"&&(e.innerHTML=t),this.h()},h(){m(e,"class","loading svelte-1igi6bz")},m(s,n){w(s,e,n)},p:ce,d(s){s&&u(e)}}}function qe(l){let e,t=he(l[6]),s=[];for(let n=0;n<t.length;n+=1)s[n]=ze(ke(l,t,n));return{c(){e=v("div");for(let n=0;n<s.length;n+=1)s[n].c();this.h()},l(n){e=h(n,"DIV",{class:!0});var a=J(e);for(let o=0;o<s.length;o+=1)s[o].l(a);a.forEach(u),this.h()},h(){m(e,"class","judges-list svelte-1igi6bz")},m(n,a){w(n,e,a);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(e,null)},p(n,a){if(a&3136){t=he(n[6]);let o;for(o=0;o<t.length;o+=1){const d=ke(n,t,o);s[o]?s[o].p(d,a):(s[o]=ze(d),s[o].c(),s[o].m(e,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=t.length}},d(n){n&&u(e),Pe(s,n)}}}function Fe(l){let e,t="<h4>No judges assigned yet</h4> <p>Add judges to start the judging process</p>";return{c(){e=v("div"),e.innerHTML=t,this.h()},l(s){e=h(s,"DIV",{class:!0,"data-svelte-h":!0}),M(e)!=="svelte-23c6id"&&(e.innerHTML=t),this.h()},h(){m(e,"class","empty-state svelte-1igi6bz")},m(s,n){w(s,e,n)},p:ce,d(s){s&&u(e)}}}function Xe(l){let e,t='<div class="spinner svelte-1igi6bz"></div> <p>Loading judges...</p>';return{c(){e=v("div"),e.innerHTML=t,this.h()},l(s){e=h(s,"DIV",{class:!0,"data-svelte-h":!0}),M(e)!=="svelte-15kyil9"&&(e.innerHTML=t),this.h()},h(){m(e,"class","loading svelte-1igi6bz")},m(s,n){w(s,e,n)},p:ce,d(s){s&&u(e)}}}function Je(l){let e,t=l[26].assignment_notes+"",s;return{c(){e=v("p"),s=O(t),this.h()},l(n){e=h(n,"P",{style:!0,class:!0});var a=J(e);s=N(a,t),a.forEach(u),this.h()},h(){ne(e,"margin-top","0.5rem"),ne(e,"font-style","italic"),m(e,"class","svelte-1igi6bz")},m(n,a){w(n,e,a),r(e,s)},p(n,a){a&64&&t!==(t=n[26].assignment_notes+"")&&Y(s,t)},d(n){n&&u(e)}}}function ze(l){var G,Q;let e,t,s,n=(((G=l[26].judge)==null?void 0:G.name)||"Unknown Judge")+"",a,o,d,f=((Q=l[26].judge)==null?void 0:Q.email)+"",c,b,V,L=l[11](l[26].judge_role)+"",C,k,R,D,K="Remove",y,Z,q,p=l[26].assignment_notes&&Je(l);function B(){return l[16](l[26])}return{c(){e=v("div"),t=v("div"),s=v("h4"),a=O(n),o=U(),d=v("p"),c=O(f),b=U(),V=v("span"),C=O(L),k=U(),p&&p.c(),R=U(),D=v("button"),D.textContent=K,y=U(),this.h()},l(z){e=h(z,"DIV",{class:!0});var _=J(e);t=h(_,"DIV",{class:!0});var E=J(t);s=h(E,"H4",{class:!0});var P=J(s);a=N(P,n),P.forEach(u),o=A(E),d=h(E,"P",{class:!0});var S=J(d);c=N(S,f),S.forEach(u),b=A(E),V=h(E,"SPAN",{class:!0});var F=J(V);C=N(F,L),F.forEach(u),k=A(E),p&&p.l(E),E.forEach(u),R=A(_),D=h(_,"BUTTON",{class:!0,style:!0,"data-svelte-h":!0}),M(D)!=="svelte-19anezd"&&(D.textContent=K),y=A(_),_.forEach(u),this.h()},h(){m(s,"class","svelte-1igi6bz"),m(d,"class","svelte-1igi6bz"),m(V,"class","role-badge svelte-1igi6bz"),m(t,"class","judge-info svelte-1igi6bz"),m(D,"class","btn btn-secondary svelte-1igi6bz"),ne(D,"padding","0.5rem 1rem"),m(e,"class","judge-card svelte-1igi6bz")},m(z,_){w(z,e,_),r(e,t),r(t,s),r(s,a),r(t,o),r(t,d),r(d,c),r(t,b),r(t,V),r(V,C),r(t,k),p&&p.m(t,null),r(e,R),r(e,D),r(e,y),Z||(q=ie(D,"click",B),Z=!0)},p(z,_){var E,P;l=z,_&64&&n!==(n=(((E=l[26].judge)==null?void 0:E.name)||"Unknown Judge")+"")&&Y(a,n),_&64&&f!==(f=((P=l[26].judge)==null?void 0:P.email)+"")&&Y(c,f),_&64&&L!==(L=l[11](l[26].judge_role)+"")&&Y(C,L),l[26].assignment_notes?p?p.p(l,_):(p=Je(l),p.c(),p.m(t,null)):p&&(p.d(1),p=null)},d(z){z&&u(e),p&&p.d(),Z=!1,q()}}}function De(l){let e,t,s="Add New Judge",n;function a(f,c){return f[1].length===0?Qe:Ke}let o=a(l),d=o(l);return{c(){e=v("div"),t=v("h4"),t.textContent=s,n=U(),d.c(),this.h()},l(f){e=h(f,"DIV",{class:!0});var c=J(e);t=h(c,"H4",{"data-svelte-h":!0}),M(t)!=="svelte-1sjcv40"&&(t.textContent=s),n=A(c),d.l(c),c.forEach(u),this.h()},h(){m(e,"class","add-judge-form svelte-1igi6bz")},m(f,c){w(f,e,c),r(e,t),r(e,n),d.m(e,null)},p(f,c){o===(o=a(f))&&d?d.p(f,c):(d.d(1),d=o(f),d&&(d.c(),d.m(e,null)))},d(f){f&&u(e),d.d()}}}function Ke(l){let e,t,s="Select Judge",n,a,o,d="Choose a judge...",f,c,b,V="Judge Role",L,C,k,R="Club Judge",D,K="BJCP Certified Judge",y,Z="Guest Judge",q,p,B,G="Assignment Notes (Optional)",Q,z,_,E,P,S=l[3]?"Adding...":"Add Judge",F,H,oe,W,ue,te,X,I=he(l[1]),j=[];for(let i=0;i<I.length;i+=1)j[i]=we(je(l,I,i));return{c(){e=v("div"),t=v("label"),t.textContent=s,n=U(),a=v("select"),o=v("option"),o.textContent=d;for(let i=0;i<j.length;i+=1)j[i].c();f=U(),c=v("div"),b=v("label"),b.textContent=V,L=U(),C=v("select"),k=v("option"),k.textContent=R,D=v("option"),D.textContent=K,y=v("option"),y.textContent=Z,q=U(),p=v("div"),B=v("label"),B.textContent=G,Q=U(),z=v("textarea"),_=U(),E=v("div"),P=v("button"),F=O(S),oe=U(),W=v("button"),ue=O("Cancel"),this.h()},l(i){e=h(i,"DIV",{class:!0});var g=J(e);t=h(g,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),M(t)!=="svelte-5apbzf"&&(t.textContent=s),n=A(g),a=h(g,"SELECT",{id:!0,class:!0});var T=J(a);o=h(T,"OPTION",{"data-svelte-h":!0}),M(o)!=="svelte-1m860wh"&&(o.textContent=d);for(let le=0;le<j.length;le+=1)j[le].l(T);T.forEach(u),g.forEach(u),f=A(i),c=h(i,"DIV",{class:!0});var x=J(c);b=h(x,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),M(b)!=="svelte-rx7pol"&&(b.textContent=V),L=A(x),C=h(x,"SELECT",{id:!0,class:!0});var re=J(C);k=h(re,"OPTION",{"data-svelte-h":!0}),M(k)!=="svelte-12ge0d8"&&(k.textContent=R),D=h(re,"OPTION",{"data-svelte-h":!0}),M(D)!=="svelte-1j85d13"&&(D.textContent=K),y=h(re,"OPTION",{"data-svelte-h":!0}),M(y)!=="svelte-18n1o3m"&&(y.textContent=Z),re.forEach(u),x.forEach(u),q=A(i),p=h(i,"DIV",{class:!0});var $=J(p);B=h($,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),M(B)!=="svelte-lwcqxi"&&(B.textContent=G),Q=A($),z=h($,"TEXTAREA",{id:!0,class:!0,rows:!0,placeholder:!0}),J(z).forEach(u),$.forEach(u),_=A(i),E=h(i,"DIV",{class:!0});var de=J(E);P=h(de,"BUTTON",{class:!0});var ee=J(P);F=N(ee,S),ee.forEach(u),oe=A(de),W=h(de,"BUTTON",{class:!0});var fe=J(W);ue=N(fe,"Cancel"),fe.forEach(u),de.forEach(u),this.h()},h(){m(t,"for","judge-select"),m(t,"class","svelte-1igi6bz"),o.__value="",se(o,o.__value),m(a,"id","judge-select"),m(a,"class","form-control svelte-1igi6bz"),l[5].judge_id===void 0&&Ce(()=>l[17].call(a)),m(e,"class","form-group svelte-1igi6bz"),m(b,"for","judge-role"),m(b,"class","svelte-1igi6bz"),k.__value=ae.CLUB_JUDGE,se(k,k.__value),D.__value=ae.BJCP_JUDGE,se(D,D.__value),y.__value=ae.GUEST_JUDGE,se(y,y.__value),m(C,"id","judge-role"),m(C,"class","form-control svelte-1igi6bz"),l[5].judge_role===void 0&&Ce(()=>l[18].call(C)),m(c,"class","form-group svelte-1igi6bz"),m(B,"for","assignment-notes"),m(B,"class","svelte-1igi6bz"),m(z,"id","assignment-notes"),m(z,"class","form-control svelte-1igi6bz"),m(z,"rows","2"),m(z,"placeholder","Any special instructions or notes for this judge assignment..."),m(p,"class","form-group svelte-1igi6bz"),m(P,"class","btn btn-success svelte-1igi6bz"),P.disabled=H=l[3]||!l[5].judge_id,m(W,"class","btn btn-secondary svelte-1igi6bz"),W.disabled=l[3],m(E,"class","form-actions svelte-1igi6bz")},m(i,g){w(i,e,g),r(e,t),r(e,n),r(e,a),r(a,o);for(let T=0;T<j.length;T+=1)j[T]&&j[T].m(a,null);ge(a,l[5].judge_id,!0),w(i,f,g),w(i,c,g),r(c,b),r(c,L),r(c,C),r(C,k),r(C,D),r(C,y),ge(C,l[5].judge_role,!0),w(i,q,g),w(i,p,g),r(p,B),r(p,Q),r(p,z),se(z,l[5].assignment_notes),w(i,_,g),w(i,E,g),r(E,P),r(P,F),r(E,oe),r(E,W),r(W,ue),te||(X=[ie(a,"change",l[17]),ie(C,"change",l[18]),ie(z,"input",l[19]),ie(P,"click",l[9]),ie(W,"click",l[20])],te=!0)},p(i,g){if(g&2){I=he(i[1]);let T;for(T=0;T<I.length;T+=1){const x=je(i,I,T);j[T]?j[T].p(x,g):(j[T]=we(x),j[T].c(),j[T].m(a,null))}for(;T<j.length;T+=1)j[T].d(1);j.length=I.length}g&34&&ge(a,i[5].judge_id),g&34&&ge(C,i[5].judge_role),g&34&&se(z,i[5].assignment_notes),g&8&&S!==(S=i[3]?"Adding...":"Add Judge")&&Y(F,S),g&42&&H!==(H=i[3]||!i[5].judge_id)&&(P.disabled=H),g&8&&(W.disabled=i[3])},d(i){i&&(u(e),u(f),u(c),u(q),u(p),u(_),u(E)),Pe(j,i),te=!1,Ie(X)}}}function Qe(l){let e,t="All members are already assigned as judges for this competition.";return{c(){e=v("p"),e.textContent=t},l(s){e=h(s,"P",{"data-svelte-h":!0}),M(e)!=="svelte-yiqdcy"&&(e.textContent=t)},m(s,n){w(s,e,n)},p:ce,d(s){s&&u(e)}}}function we(l){let e,t=l[23].name+"",s,n,a=l[23].email+"",o,d,f;return{c(){e=v("option"),s=O(t),n=O(" ("),o=O(a),d=O(")"),this.h()},l(c){e=h(c,"OPTION",{});var b=J(e);s=N(b,t),n=N(b," ("),o=N(b,a),d=N(b,")"),b.forEach(u),this.h()},h(){e.__value=f=l[23].id,se(e,e.__value)},m(c,b){w(c,e,b),r(e,s),r(e,n),r(e,o),r(e,d)},p(c,b){b&2&&t!==(t=c[23].name+"")&&Y(s,t),b&2&&a!==(a=c[23].email+"")&&Y(o,a),b&2&&f!==(f=c[23].id)&&(e.__value=f,se(e,e.__value))},d(c){c&&u(e)}}}function ye(l){let e,t,s;return{c(){e=v("div"),t=O("Error: "),s=O(l[8]),this.h()},l(n){e=h(n,"DIV",{style:!0});var a=J(e);t=N(a,"Error: "),s=N(a,l[8]),a.forEach(u),this.h()},h(){ne(e,"background","#fecaca"),ne(e,"color","#dc2626"),ne(e,"padding","1rem"),ne(e,"border-radius","4px"),ne(e,"margin-top","1rem")},m(n,a){w(n,e,a),r(e,t),r(e,s)},p(n,a){a&256&&Y(s,n[8])},d(n){n&&u(e)}}}function We(l){let e,t,s='<h1 class="svelte-1igi6bz">Manage Judges</h1> <p>Assign judges to competition</p>',n;function a(f,c){if(f[2])return Re;if(f[0])return Me}let o=a(l),d=o&&o(l);return{c(){e=v("div"),t=v("div"),t.innerHTML=s,n=U(),d&&d.c(),this.h()},l(f){e=h(f,"DIV",{class:!0});var c=J(e);t=h(c,"DIV",{class:!0,"data-svelte-h":!0}),M(t)!=="svelte-1bf4cvv"&&(t.innerHTML=s),n=A(c),d&&d.l(c),c.forEach(u),this.h()},h(){m(t,"class","hero svelte-1igi6bz"),m(e,"class","container svelte-1igi6bz")},m(f,c){w(f,e,c),r(e,t),r(e,n),d&&d.m(e,null)},p(f,[c]){o===(o=a(f))&&d?d.p(f,c):(d&&d.d(1),d=o&&o(f),d&&(d.c(),d.m(e,null)))},i:ce,o:ce,d(f){f&&u(e),d&&d.d()}}}function Te(l){const e=new Date,t=new Date(l.entry_deadline),s=new Date(l.judging_date);return l.results_published?"status-completed":e>t&&e<=s?"status-judging":e<=t?"status-open":"status-judging"}function Le(l,e="info"){const t=document.createElement("div");t.textContent=l,t.style.cssText=`
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 1rem 1.5rem;
      border-radius: 6px;
      color: white;
      font-weight: 500;
      z-index: 1000;
      background: ${e==="success"?"#059669":e==="error"?"#dc2626":"#6b7280"};
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    `,document.body.appendChild(t),setTimeout(()=>document.body.removeChild(t),3e3)}function Ye(l,e,t){let s,n,a,o,d,f;_e(l,Se,_=>t(6,n=_)),_e(l,Oe,_=>t(12,a=_)),_e(l,Ne,_=>t(13,o=_)),_e(l,Ge,_=>t(7,d=_)),_e(l,He,_=>t(8,f=_));let c=null,b=[],V=!0,L=!1,C=!1,k={judge_id:"",judge_role:ae.CLUB_JUDGE,assignment_notes:""};Ue(()=>{R()});async function R(){t(2,V=!0);try{const{data:_,error:E}=await Ee.from("competitions").select("*").eq("id",s).single();if(E)throw E;t(0,c=_),await me.loadJudges(s);const{data:P,error:S}=await Ee.from("members").select("id, name, email, phone").order("name");if(S)throw S;const F=new Set(n.map(H=>H.judge_id));t(1,b=P.filter(H=>!F.has(H.id)))}catch(_){console.error("Error loading data:",_),alert("Failed to load competition data"),ve("/officers/manage-competitions")}finally{t(2,V=!1)}}async function D(){if(!k.judge_id){alert("Please select a judge");return}try{t(3,L=!0),await me.assignJudge(s,{...k,assigned_by:a.id}),t(5,k={judge_id:"",judge_role:ae.CLUB_JUDGE,assignment_notes:""}),t(4,C=!1);const _=new Set(n.map(E=>E.judge_id));t(1,b=b.filter(E=>!_.has(E.id))),Le("Judge assigned successfully","success")}catch(_){console.error("Error adding judge:",_),alert("Failed to assign judge")}finally{t(3,L=!1)}}async function K(_){if(confirm("Are you sure you want to remove this judge assignment?"))try{await me.removeJudge(_),await R(),Le("Judge removed successfully","success")}catch(E){console.error("Error removing judge:",E),alert("Failed to remove judge")}}function y(_){switch(_){case ae.BJCP_JUDGE:return"BJCP Certified Judge";case ae.CLUB_JUDGE:return"Club Judge";case ae.GUEST_JUDGE:return"Guest Judge";default:return _}}const Z=()=>t(4,C=!C),q=()=>ve("/officers/manage-competitions"),p=_=>K(_.id);function B(){k.judge_id=pe(this),t(5,k),t(1,b)}function G(){k.judge_role=pe(this),t(5,k),t(1,b)}function Q(){k.assignment_notes=this.value,t(5,k),t(1,b)}const z=()=>t(4,C=!1);return l.$$.update=()=>{l.$$.dirty&4096&&a&&!a.is_officer&&ve("/"),l.$$.dirty&8192&&(s=o.params.id)},[c,b,V,L,C,k,n,d,f,D,K,y,a,o,Z,q,p,B,G,Q,z]}class nt extends Be{constructor(e){super(),Ve(this,e,Ye,We,Ae,{})}}export{nt as component};
