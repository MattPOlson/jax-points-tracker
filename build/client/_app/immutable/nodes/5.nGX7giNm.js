import{s as Ve,n as le,d as f,i as A,b as c,p as Ne,q as k,c as m,e as C,v as z,g as V,h as p,j as L,w as Le,x as Se,a as F,f as M,t as R,y as ve,A as ge,B as pe,z as de,G as ce}from"../chunks/DOvoZ9Ia.js";import{e as _e}from"../chunks/DJwZhPfI.js";import{S as Me,i as Re}from"../chunks/DZMW2zPD.js";import{g as Ae}from"../chunks/DTRqcRCR.js";import{s as ie}from"../chunks/CCM_4jRA.js";function be(r,e,l){const t=r.slice();return t[12]=e[l][0],t[13]=e[l][1],t}function ke(r,e,l){const t=r.slice();return t[16]=e[l],t}function ye(r,e,l){const t=r.slice();return t[19]=e[l],t}function Ee(r){let e,l;return{c(){e=p("div"),l=R(r[6]),this.h()},l(t){e=m(t,"DIV",{class:!0});var s=C(e);l=M(s,r[6]),s.forEach(f),this.h()},h(){k(e,"class","error svelte-1n450du")},m(t,s){A(t,e,s),c(e,l)},p(t,s){s&64&&F(l,t[6])},d(t){t&&f(e)}}}function He(r){let e,l,t="Select Competition to View Results:",s,a,o,n="Choose a competition...",d,h,g,D,E,w=_e(r[2]),v=[];for(let i=0;i<w.length;i+=1)v[i]=Ce(ye(r,w,i));let u=r[3]&&De(r);return{c(){e=p("div"),l=p("div"),l.textContent=t,s=L(),a=p("select"),o=p("option"),o.textContent=n;for(let i=0;i<v.length;i+=1)v[i].c();h=L(),u&&u.c(),g=de(),this.h()},l(i){e=m(i,"DIV",{class:!0});var _=C(e);l=m(_,"DIV",{class:!0,"data-svelte-h":!0}),z(l)!=="svelte-6famh2"&&(l.textContent=t),s=V(_),a=m(_,"SELECT",{class:!0});var T=C(a);o=m(T,"OPTION",{"data-svelte-h":!0}),z(o)!=="svelte-1urbt8h"&&(o.textContent=n);for(let P=0;P<v.length;P+=1)v[P].l(T);T.forEach(f),_.forEach(f),h=V(i),u&&u.l(i),g=de(),this.h()},h(){k(l,"class","selector-label svelte-1n450du"),o.__value="",pe(o,o.__value),k(a,"class","competition-select svelte-1n450du"),k(e,"class","competition-selector svelte-1n450du")},m(i,_){var T;A(i,e,_),c(e,l),c(e,s),c(e,a),c(a,o);for(let P=0;P<v.length;P+=1)v[P]&&v[P].m(a,null);ge(a,((T=r[3])==null?void 0:T.id)||""),A(i,h,_),u&&u.m(i,_),A(i,g,_),D||(E=Ne(a,"change",r[8]),D=!0)},p(i,_){var T,P;if(_&4){w=_e(i[2]);let I;for(I=0;I<w.length;I+=1){const G=ye(i,w,I);v[I]?v[I].p(G,_):(v[I]=Ce(G),v[I].c(),v[I].m(a,null))}for(;I<v.length;I+=1)v[I].d(1);v.length=w.length}_&12&&d!==(d=((T=i[3])==null?void 0:T.id)||"")&&ge(a,((P=i[3])==null?void 0:P.id)||""),i[3]?u?u.p(i,_):(u=De(i),u.c(),u.m(g.parentNode,g)):u&&(u.d(1),u=null)},d(i){i&&(f(e),f(h),f(g)),ve(v,i),u&&u.d(i),D=!1,E()}}}function Be(r){let e,l="<h3>No Results Published</h3> <p>There are currently no competition results available to view.</p> <p>Check back after competitions have been judged and results published.</p>";return{c(){e=p("div"),e.innerHTML=l,this.h()},l(t){e=m(t,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-ntmt9w"&&(e.innerHTML=l),this.h()},h(){k(e,"class","empty-state svelte-1n450du")},m(t,s){A(t,e,s)},p:le,d(t){t&&f(e)}}}function Oe(r){let e,l='<div class="spinner svelte-1n450du"></div> <p>Loading competition results...</p>';return{c(){e=p("div"),e.innerHTML=l,this.h()},l(t){e=m(t,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-1c57wy0"&&(e.innerHTML=l),this.h()},h(){k(e,"class","loading svelte-1n450du")},m(t,s){A(t,e,s)},p:le,d(t){t&&f(e)}}}function Ce(r){let e,l=r[19].name+"",t,s,a=Pe(r[19].judging_date)+"",o,n,d;return{c(){e=p("option"),t=R(l),s=R(" - Judged "),o=R(a),n=L(),this.h()},l(h){e=m(h,"OPTION",{});var g=C(e);t=M(g,l),s=M(g," - Judged "),o=M(g,a),n=V(g),g.forEach(f),this.h()},h(){e.__value=d=r[19].id,pe(e,e.__value)},m(h,g){A(h,e,g),c(e,t),c(e,s),c(e,o),c(e,n)},p(h,g){g&4&&l!==(l=h[19].name+"")&&F(t,l),g&4&&a!==(a=Pe(h[19].judging_date)+"")&&F(o,a),g&4&&d!==(d=h[19].id)&&(e.__value=d,pe(e,e.__value))},d(h){h&&f(e)}}}function De(r){let e,l,t=!r[5]&&r[0].length>0&&je(r);function s(n,d){return n[5]?Ge:n[0].length===0?Fe:qe}let a=s(r),o=a(r);return{c(){t&&t.c(),e=L(),o.c(),l=de()},l(n){t&&t.l(n),e=V(n),o.l(n),l=de()},m(n,d){t&&t.m(n,d),A(n,e,d),o.m(n,d),A(n,l,d)},p(n,d){!n[5]&&n[0].length>0?t?t.p(n,d):(t=je(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null),a===(a=s(n))&&o?o.p(n,d):(o.d(1),o=a(n),o&&(o.c(),o.m(l.parentNode,l)))},d(n){n&&(f(e),f(l)),t&&t.d(n),o.d(n)}}}function je(r){let e,l,t=r[3].name+"",s,a,o,n,d,h,g="Total Entries",D,E,w=r[7].totalEntries+"",v,u,i,_,T="Awards Given",P,I,G=r[7].placedEntries+"",Z,x,O,U,K="Categories",ne,J,q=r[7].categories+"",b,W,S,B,$="Average Score",Y,N,X=r[7].averageScore+"",ee;return{c(){e=p("div"),l=p("h2"),s=R(t),a=R(" - Results Summary"),o=L(),n=p("div"),d=p("div"),h=p("div"),h.textContent=g,D=L(),E=p("div"),v=R(w),u=L(),i=p("div"),_=p("div"),_.textContent=T,P=L(),I=p("div"),Z=R(G),x=L(),O=p("div"),U=p("div"),U.textContent=K,ne=L(),J=p("div"),b=R(q),W=L(),S=p("div"),B=p("div"),B.textContent=$,Y=L(),N=p("div"),ee=R(X),this.h()},l(H){e=m(H,"DIV",{class:!0});var y=C(e);l=m(y,"H2",{style:!0});var j=C(l);s=M(j,t),a=M(j," - Results Summary"),j.forEach(f),o=V(y),n=m(y,"DIV",{class:!0});var Q=C(n);d=m(Q,"DIV",{class:!0});var se=C(d);h=m(se,"DIV",{class:!0,"data-svelte-h":!0}),z(h)!=="svelte-ufm050"&&(h.textContent=g),D=V(se),E=m(se,"DIV",{class:!0});var fe=C(E);v=M(fe,w),fe.forEach(f),se.forEach(f),u=V(Q),i=m(Q,"DIV",{class:!0});var ae=C(i);_=m(ae,"DIV",{class:!0,"data-svelte-h":!0}),z(_)!=="svelte-1wthacd"&&(_.textContent=T),P=V(ae),I=m(ae,"DIV",{class:!0});var re=C(I);Z=M(re,G),re.forEach(f),ae.forEach(f),x=V(Q),O=m(Q,"DIV",{class:!0});var te=C(O);U=m(te,"DIV",{class:!0,"data-svelte-h":!0}),z(U)!=="svelte-1t4zeo0"&&(U.textContent=K),ne=V(te),J=m(te,"DIV",{class:!0});var he=C(J);b=M(he,q),he.forEach(f),te.forEach(f),W=V(Q),S=m(Q,"DIV",{class:!0});var oe=C(S);B=m(oe,"DIV",{class:!0,"data-svelte-h":!0}),z(B)!=="svelte-r90083"&&(B.textContent=$),Y=V(oe),N=m(oe,"DIV",{class:!0});var me=C(N);ee=M(me,X),me.forEach(f),oe.forEach(f),Q.forEach(f),y.forEach(f),this.h()},h(){ce(l,"margin","0 0 1.5rem 0"),ce(l,"color","#333"),k(h,"class","summary-label svelte-1n450du"),k(E,"class","summary-value svelte-1n450du"),k(d,"class","summary-item svelte-1n450du"),k(_,"class","summary-label svelte-1n450du"),k(I,"class","summary-value svelte-1n450du"),k(i,"class","summary-item svelte-1n450du"),k(U,"class","summary-label svelte-1n450du"),k(J,"class","summary-value svelte-1n450du"),k(O,"class","summary-item svelte-1n450du"),k(B,"class","summary-label svelte-1n450du"),k(N,"class","summary-value svelte-1n450du"),k(S,"class","summary-item svelte-1n450du"),k(n,"class","summary-grid svelte-1n450du"),k(e,"class","results-summary svelte-1n450du")},m(H,y){A(H,e,y),c(e,l),c(l,s),c(l,a),c(e,o),c(e,n),c(n,d),c(d,h),c(d,D),c(d,E),c(E,v),c(n,u),c(n,i),c(i,_),c(i,P),c(i,I),c(I,Z),c(n,x),c(n,O),c(O,U),c(O,ne),c(O,J),c(J,b),c(n,W),c(n,S),c(S,B),c(S,Y),c(S,N),c(N,ee)},p(H,y){y&8&&t!==(t=H[3].name+"")&&F(s,t),y&128&&w!==(w=H[7].totalEntries+"")&&F(v,w),y&128&&G!==(G=H[7].placedEntries+"")&&F(Z,G),y&128&&q!==(q=H[7].categories+"")&&F(b,q),y&128&&X!==(X=H[7].averageScore+"")&&F(ee,X)},d(H){H&&f(e)}}}function qe(r){let e,l=_e(Object.entries(r[1])),t=[];for(let s=0;s<l.length;s+=1)t[s]=Te(be(r,l,s));return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=de()},l(s){for(let a=0;a<t.length;a+=1)t[a].l(s);e=de()},m(s,a){for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(s,a);A(s,e,a)},p(s,a){if(a&2){l=_e(Object.entries(s[1]));let o;for(o=0;o<l.length;o+=1){const n=be(s,l,o);t[o]?t[o].p(n,a):(t[o]=Te(n),t[o].c(),t[o].m(e.parentNode,e))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},d(s){s&&f(e),ve(t,s)}}}function Fe(r){let e,l="<h3>No Results Available</h3> <p>Results for this competition have not been entered yet.</p>";return{c(){e=p("div"),e.innerHTML=l,this.h()},l(t){e=m(t,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-5maymk"&&(e.innerHTML=l),this.h()},h(){k(e,"class","empty-state svelte-1n450du")},m(t,s){A(t,e,s)},p:le,d(t){t&&f(e)}}}function Ge(r){let e,l='<div class="spinner svelte-1n450du"></div> <p>Loading results...</p>';return{c(){e=p("div"),e.innerHTML=l,this.h()},l(t){e=m(t,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-1wd8za7"&&(e.innerHTML=l),this.h()},h(){k(e,"class","loading svelte-1n450du")},m(t,s){A(t,e,s)},p:le,d(t){t&&f(e)}}}function we(r){let e,l,t=r[16].judge_count+"",s,a,o=r[16].judge_count===1?"":"s",n;return{c(){e=p("br"),l=p("small"),s=R(t),a=R(" judge"),n=R(o),this.h()},l(d){e=m(d,"BR",{}),l=m(d,"SMALL",{style:!0});var h=C(l);s=M(h,t),a=M(h," judge"),n=M(h,o),h.forEach(f),this.h()},h(){ce(l,"color","#666")},m(d,h){A(d,e,h),A(d,l,h),c(l,s),c(l,a),c(l,n)},p(d,h){h&2&&t!==(t=d[16].judge_count+"")&&F(s,t),h&2&&o!==(o=d[16].judge_count===1?"":"s")&&F(n,o)},d(d){d&&(f(e),f(l))}}}function Ue(r){let e,l="-/50";return{c(){e=p("span"),e.textContent=l,this.h()},l(t){e=m(t,"SPAN",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-1qmajtw"&&(e.textContent=l),this.h()},h(){k(e,"class","score-badge svelte-1n450du")},m(t,s){A(t,e,s)},p:le,d(t){t&&f(e)}}}function Je(r){let e,l=r[16].score+"",t,s;return{c(){e=p("span"),t=R(l),s=R("/50"),this.h()},l(a){e=m(a,"SPAN",{class:!0});var o=C(e);t=M(o,l),s=M(o,"/50"),o.forEach(f),this.h()},h(){k(e,"class","score-badge svelte-1n450du")},m(a,o){A(a,e,o),c(e,t),c(e,s)},p(a,o){o&2&&l!==(l=a[16].score+"")&&F(t,l)},d(a){a&&f(e)}}}function ze(r){let e,l="No Placement";return{c(){e=p("span"),e.textContent=l,this.h()},l(t){e=m(t,"SPAN",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-1ngxc4k"&&(e.textContent=l),this.h()},h(){k(e,"class","placement-badge placement-none svelte-1n450du")},m(t,s){A(t,e,s)},p:le,d(t){t&&f(e)}}}function Ze(r){let e,l,t=ue(r[16].calculated_placement).medal+"",s,a,o,n=ue(r[16].calculated_placement).text+"",d,h;return{c(){e=p("span"),l=p("span"),s=R(t),a=L(),o=p("span"),d=R(n),this.h()},l(g){e=m(g,"SPAN",{class:!0});var D=C(e);l=m(D,"SPAN",{});var E=C(l);s=M(E,t),E.forEach(f),a=V(D),o=m(D,"SPAN",{});var w=C(o);d=M(w,n),w.forEach(f),D.forEach(f),this.h()},h(){k(e,"class",h="placement-badge "+ue(r[16].calculated_placement).class+" svelte-1n450du")},m(g,D){A(g,e,D),c(e,l),c(l,s),c(e,a),c(e,o),c(o,d)},p(g,D){D&2&&t!==(t=ue(g[16].calculated_placement).medal+"")&&F(s,t),D&2&&n!==(n=ue(g[16].calculated_placement).text+"")&&F(d,n),D&2&&h!==(h="placement-badge "+ue(g[16].calculated_placement).class+" svelte-1n450du")&&k(e,"class",h)},d(g){g&&f(e)}}}function Ke(r){let e,l="No notes";return{c(){e=p("span"),e.textContent=l,this.h()},l(t){e=m(t,"SPAN",{style:!0,"data-svelte-h":!0}),z(e)!=="svelte-1ylmb08"&&(e.textContent=l),this.h()},h(){ce(e,"color","#999")},m(t,s){A(t,e,s)},p:le,d(t){t&&f(e)}}}function Ye(r){let e,l=r[16].judge_notes+"",t;return{c(){e=p("div"),t=R(l),this.h()},l(s){e=m(s,"DIV",{class:!0});var a=C(e);t=M(a,l),a.forEach(f),this.h()},h(){k(e,"class","judge-notes svelte-1n450du")},m(s,a){A(s,e,a),c(e,t)},p(s,a){a&2&&l!==(l=s[16].judge_notes+"")&&F(t,l)},d(s){s&&f(e)}}}function Ie(r){let e,l,t,s=r[16].entry_number+"",a,o,n,d=r[16].member_name+"",h,g,D,E=r[16].beer_name+"",w,v,u,i,_=r[16].ranking_points+"",T,P,I=r[16].ranking_points===1?"pt":"pts",G,Z,x,O,U,K,ne,J,q,b=r[16].judge_count>0&&we(r);function W(y,j){return y[16].score?Je:Ue}let S=W(r),B=S(r);function $(y,j){return y[16].calculated_placement?Ze:ze}let Y=$(r),N=Y(r);function X(y,j){return y[16].judge_notes?Ye:Ke}let ee=X(r),H=ee(r);return{c(){e=p("tr"),l=p("td"),t=p("span"),a=R(s),o=L(),n=p("td"),h=R(d),g=L(),D=p("td"),w=R(E),v=L(),u=p("td"),i=p("span"),T=R(_),P=L(),G=R(I),Z=L(),b&&b.c(),x=L(),O=p("td"),B.c(),U=L(),K=p("td"),N.c(),ne=L(),J=p("td"),H.c(),q=L(),this.h()},l(y){e=m(y,"TR",{class:!0});var j=C(e);l=m(j,"TD",{class:!0});var Q=C(l);t=m(Q,"SPAN",{class:!0});var se=C(t);a=M(se,s),se.forEach(f),Q.forEach(f),o=V(j),n=m(j,"TD",{class:!0});var fe=C(n);h=M(fe,d),fe.forEach(f),g=V(j),D=m(j,"TD",{class:!0});var ae=C(D);w=M(ae,E),ae.forEach(f),v=V(j),u=m(j,"TD",{class:!0});var re=C(u);i=m(re,"SPAN",{style:!0});var te=C(i);T=M(te,_),P=V(te),G=M(te,I),te.forEach(f),Z=V(re),b&&b.l(re),re.forEach(f),x=V(j),O=m(j,"TD",{class:!0});var he=C(O);B.l(he),he.forEach(f),U=V(j),K=m(j,"TD",{class:!0});var oe=C(K);N.l(oe),oe.forEach(f),ne=V(j),J=m(j,"TD",{class:!0});var me=C(J);H.l(me),me.forEach(f),q=V(j),j.forEach(f),this.h()},h(){k(t,"class","entry-number svelte-1n450du"),k(l,"class","svelte-1n450du"),k(n,"class","svelte-1n450du"),k(D,"class","svelte-1n450du"),ce(i,"font-weight","600"),ce(i,"color",r[16].ranking_points>0?"#059669":"#666"),k(u,"class","svelte-1n450du"),k(O,"class","svelte-1n450du"),k(K,"class","svelte-1n450du"),k(J,"class","svelte-1n450du"),k(e,"class","svelte-1n450du")},m(y,j){A(y,e,j),c(e,l),c(l,t),c(t,a),c(e,o),c(e,n),c(n,h),c(e,g),c(e,D),c(D,w),c(e,v),c(e,u),c(u,i),c(i,T),c(i,P),c(i,G),c(u,Z),b&&b.m(u,null),c(e,x),c(e,O),B.m(O,null),c(e,U),c(e,K),N.m(K,null),c(e,ne),c(e,J),H.m(J,null),c(e,q)},p(y,j){j&2&&s!==(s=y[16].entry_number+"")&&F(a,s),j&2&&d!==(d=y[16].member_name+"")&&F(h,d),j&2&&E!==(E=y[16].beer_name+"")&&F(w,E),j&2&&_!==(_=y[16].ranking_points+"")&&F(T,_),j&2&&I!==(I=y[16].ranking_points===1?"pt":"pts")&&F(G,I),j&2&&ce(i,"color",y[16].ranking_points>0?"#059669":"#666"),y[16].judge_count>0?b?b.p(y,j):(b=we(y),b.c(),b.m(u,null)):b&&(b.d(1),b=null),S===(S=W(y))&&B?B.p(y,j):(B.d(1),B=S(y),B&&(B.c(),B.m(O,null))),Y===(Y=$(y))&&N?N.p(y,j):(N.d(1),N=Y(y),N&&(N.c(),N.m(K,null))),ee===(ee=X(y))&&H?H.p(y,j):(H.d(1),H=ee(y),H&&(H.c(),H.m(J,null)))},d(y){y&&f(e),b&&b.d(),B.d(),N.d(),H.d()}}}function Te(r){let e,l,t,s=r[12]+"",a,o,n,d,h='<tr class="svelte-1n450du"><th class="svelte-1n450du">Entry</th> <th class="svelte-1n450du">Member</th> <th class="svelte-1n450du">Beer Name</th> <th class="svelte-1n450du">Ranking Points</th> <th class="svelte-1n450du">Score</th> <th class="svelte-1n450du">Placement</th> <th class="svelte-1n450du">Judge Notes</th></tr>',g,D,E,w=_e(r[13]),v=[];for(let u=0;u<w.length;u+=1)v[u]=Ie(ke(r,w,u));return{c(){e=p("div"),l=p("div"),t=p("h3"),a=R(s),o=L(),n=p("table"),d=p("thead"),d.innerHTML=h,g=L(),D=p("tbody");for(let u=0;u<v.length;u+=1)v[u].c();E=L(),this.h()},l(u){e=m(u,"DIV",{class:!0});var i=C(e);l=m(i,"DIV",{class:!0});var _=C(l);t=m(_,"H3",{class:!0});var T=C(t);a=M(T,s),T.forEach(f),_.forEach(f),o=V(i),n=m(i,"TABLE",{class:!0});var P=C(n);d=m(P,"THEAD",{"data-svelte-h":!0}),z(d)!=="svelte-hus28l"&&(d.innerHTML=h),g=V(P),D=m(P,"TBODY",{});var I=C(D);for(let G=0;G<v.length;G+=1)v[G].l(I);I.forEach(f),P.forEach(f),E=V(i),i.forEach(f),this.h()},h(){k(t,"class","category-title svelte-1n450du"),k(l,"class","category-header svelte-1n450du"),k(n,"class","results-table svelte-1n450du"),k(e,"class","category-section svelte-1n450du")},m(u,i){A(u,e,i),c(e,l),c(l,t),c(t,a),c(e,o),c(e,n),c(n,d),c(n,g),c(n,D);for(let _=0;_<v.length;_+=1)v[_]&&v[_].m(D,null);c(e,E)},p(u,i){if(i&2&&s!==(s=u[12]+"")&&F(a,s),i&2){w=_e(u[13]);let _;for(_=0;_<w.length;_+=1){const T=ke(u,w,_);v[_]?v[_].p(T,i):(v[_]=Ie(T),v[_].c(),v[_].m(D,null))}for(;_<v.length;_+=1)v[_].d(1);v.length=w.length}},d(u){u&&f(e),ve(v,u)}}}function Qe(r){let e,l,t='<h1 class="svelte-1n450du">Competition Results</h1> <p class="subtitle svelte-1n450du">View published competition results and standings</p>',s,a,o,n="Back to Competitions",d,h,g,D,E=r[6]&&Ee(r);function w(i,_){return i[4]?Oe:i[2].length===0?Be:He}let v=w(r),u=v(r);return{c(){e=p("div"),l=p("div"),l.innerHTML=t,s=L(),a=p("div"),o=p("button"),o.textContent=n,d=L(),E&&E.c(),h=L(),u.c(),this.h()},l(i){e=m(i,"DIV",{class:!0});var _=C(e);l=m(_,"DIV",{class:!0,"data-svelte-h":!0}),z(l)!=="svelte-utbced"&&(l.innerHTML=t),s=V(_),a=m(_,"DIV",{class:!0});var T=C(a);o=m(T,"BUTTON",{class:!0,"data-svelte-h":!0}),z(o)!=="svelte-ri2cai"&&(o.textContent=n),T.forEach(f),d=V(_),E&&E.l(_),h=V(_),u.l(_),_.forEach(f),this.h()},h(){k(l,"class","hero svelte-1n450du"),k(o,"class","btn btn-secondary svelte-1n450du"),k(a,"class","controls svelte-1n450du"),k(e,"class","container svelte-1n450du")},m(i,_){A(i,e,_),c(e,l),c(e,s),c(e,a),c(a,o),c(e,d),E&&E.m(e,null),c(e,h),u.m(e,null),g||(D=Ne(o,"click",r[9]),g=!0)},p(i,[_]){i[6]?E?E.p(i,_):(E=Ee(i),E.c(),E.m(e,h)):E&&(E.d(1),E=null),v===(v=w(i))&&u?u.p(i,_):(u.d(1),u=v(i),u&&(u.c(),u.m(e,null)))},i:le,o:le,d(i){i&&f(e),E&&E.d(),u.d(),g=!1,D()}}}function We(r){switch(r){case 1:return 3;case 2:return 2;case 3:return 1;default:return 0}}function Xe(r,e,l,t){let s=[],a=null;for(const n of t){let d;try{d=Array.isArray(n.bjcp_category_ids)?n.bjcp_category_ids:JSON.parse(n.bjcp_category_ids)}catch{console.warn("Failed to parse bjcp_category_ids for group:",n.id);continue}if(d.includes(e)){a=n.id;break}}return a?s=l.filter(n=>n.entry_id===r&&n.ranking_group_id===a):s=l.filter(n=>n.entry_id===r&&n.bjcp_category_id===e),{totalPoints:s.reduce((n,d)=>n+We(d.rank_position),0),judgeCount:s.length,rankings:s}}function ue(r){switch(r){case"1":return{text:"1st Place",class:"placement-first",medal:"🥇"};case"2":return{text:"2nd Place",class:"placement-second",medal:"🥈"};case"3":return{text:"3rd Place",class:"placement-third",medal:"🥉"};case"HM":return{text:"Honorable Mention",class:"placement-hm",medal:"🏅"};default:return{text:"No Placement",class:"placement-none",medal:""}}}function xe(r){const e=r.reduce((l,t)=>{const s=t.display_group;return l[s]||(l[s]=[]),l[s].push(t),l},{});return Object.keys(e).forEach(l=>{const t=e[l];if(t.some(a=>a.ranking_points>0)){t.sort((n,d)=>d.ranking_points!==n.ranking_points?d.ranking_points-n.ranking_points:(d.score||0)-(n.score||0));let a=1,o=null;t.forEach((n,d)=>{o!==null&&n.ranking_points<o&&(a=d+1),n.ranking_points>0?a===1?n.calculated_placement="1":a===2?n.calculated_placement="2":a===3?n.calculated_placement="3":a<=6?n.calculated_placement="HM":n.calculated_placement="":n.calculated_placement="",o=n.ranking_points})}else{t.sort((n,d)=>(d.score||0)-(n.score||0));let a=1,o=null;t.forEach((n,d)=>{const h=n.score||0;o!==null&&h<o&&(a=d+1),h>0?a===1?n.calculated_placement="1":a===2?n.calculated_placement="2":a===3?n.calculated_placement="3":a<=6?n.calculated_placement="HM":n.calculated_placement="":n.calculated_placement="",o=h})}}),e}function Pe(r){if(!r)return"No date set";try{let e=r;r.includes(" ")&&!r.includes("T")&&(e=r.replace(" ","T"),!e.includes("+")&&!e.includes("Z")&&(e+="Z"));const l=new Date(e);return isNaN(l.getTime())?(console.warn("Invalid date after parsing:",r,"->",e),"Invalid Date"):l.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}catch(e){return console.warn("Error formatting date:",r,e),"Invalid Date"}}function $e(r,e,l){let t,s,a=[],o=null,n=[],d=!0,h=!1,g=null;Le(()=>{D()}),Se(()=>{});async function D(){l(4,d=!0),l(6,g=null);try{console.log("Loading published competitions...");const{data:u,error:i}=await ie.from("competitions").select("*").eq("results_published",!0).order("judging_date",{ascending:!1});if(i)throw i;l(2,a=u||[]),console.log("Loaded",a.length,"published competitions"),a.length>0&&(l(3,o=a[0]),await w(a[0]))}catch(u){console.error("Error loading competitions:",u),l(6,g=u.message||"Failed to load competitions")}finally{l(4,d=!1)}}async function E(u){const i=u.target.value;if(!i){l(3,o=null),l(0,n=[]);return}const _=a.find(T=>T.id===i);_&&(l(3,o=_),await w(_))}async function w(u){l(5,h=!0),l(6,g=null);try{console.log("Loading results for competition:",u.name);const{data:i,error:_}=await ie.from("competition_results").select("*").eq("competition_id",u.id);if(_)throw _;if(!i||i.length===0){l(0,n=[]);return}const T=i.map(q=>q.entry_id),{data:P,error:I}=await ie.from("competition_entries").select("*").in("id",T);if(I)throw I;const G=[...new Set(P.map(q=>q.member_id))],{data:Z}=await ie.from("members").select("id, name").in("id",G),x=[...new Set(P.map(q=>q.bjcp_category_id).filter(Boolean))],{data:O}=await ie.from("bjcp_categories").select("id, category_name, category_number, subcategory_letter, subcategory_name").in("id",x);let U=[];if(u.category_system==="custom"){const{data:q,error:b}=await ie.from("competition_ranking_groups").select("*").eq("competition_id",u.id).order("group_order");b||(U=q||[])}const{data:K,error:ne}=await ie.from("competition_rankings").select(`
          *,
          entry:competition_entries!inner(id, entry_number, beer_name),
          judge:members!competition_rankings_judge_id_fkey(id, name),
          category:bjcp_categories(category_name, category_number, subcategory_letter),
          ranking_group:competition_ranking_groups(id, group_name, group_description)
        `).eq("competition_id",u.id).order("bjcp_category_id").order("rank_position"),J=K||[];l(0,n=i.map(q=>{const b=P.find(N=>N.id===q.entry_id),W=Z==null?void 0:Z.find(N=>N.id===(b==null?void 0:b.member_id)),S=O==null?void 0:O.find(N=>N.id===(b==null?void 0:b.bjcp_category_id)),B=S?`${S.category_number}${S.subcategory_letter||""} - ${S.category_name}`:"Unknown Category";let $=null;if(U.length>0&&(b!=null&&b.bjcp_category_id)){const N=U.find(X=>X.bjcp_category_ids.includes(b.bjcp_category_id));$=(N==null?void 0:N.group_name)||null}const Y=b!=null&&b.bjcp_category_id?Xe(b.id,b.bjcp_category_id,J,U):{totalPoints:0,judgeCount:0,rankings:[]};return{...q,entry_number:(b==null?void 0:b.entry_number)||"N/A",beer_name:(b==null?void 0:b.beer_name)||"Unknown Beer",member_name:(W==null?void 0:W.name)||"Unknown Member",category_display:B,ranking_group_name:$,display_group:$||B,category_number:(S==null?void 0:S.category_number)||"",subcategory_letter:(S==null?void 0:S.subcategory_letter)||"",ranking_points:Y.totalPoints,judge_count:Y.judgeCount}})),console.log("Loaded",n.length,"results")}catch(i){console.error("Error loading results:",i),l(6,g=i.message||"Failed to load results")}finally{l(5,h=!1)}}function v(){Ae("/competitions")}return r.$$.update=()=>{r.$$.dirty&1&&l(1,t=xe(n)),r.$$.dirty&3&&l(7,s={totalEntries:n.length,placedEntries:n.filter(u=>u.calculated_placement&&u.calculated_placement!=="").length,categories:Object.keys(t).length,averageScore:n.length>0?Math.round(n.reduce((u,i)=>u+(i.score||0),0)/n.length*10)/10:0})},[n,t,a,o,d,h,g,s,E,v]}class at extends Me{constructor(e){super(),Re(this,e,$e,Qe,Ve,{})}}export{at as component};
