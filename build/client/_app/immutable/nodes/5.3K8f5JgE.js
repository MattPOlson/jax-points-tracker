import{s as Ve,n as le,d as f,i as H,b as c,p as Pe,q as y,c as m,e as C,v as z,g as V,h as v,j as L,w as Le,x as Se,a as F,f as A,t as M,y as pe,A as ge,B as ve,z as de,G as ce}from"../chunks/DOvoZ9Ia.js";import{e as _e}from"../chunks/DJwZhPfI.js";import{S as Ae,i as Me}from"../chunks/DZMW2zPD.js";import{g as He}from"../chunks/BsRRfQNK.js";import{s as ie}from"../chunks/CCM_4jRA.js";function be(a,e,l){const t=a.slice();return t[12]=e[l][0],t[13]=e[l][1],t}function ye(a,e,l){const t=a.slice();return t[16]=e[l],t}function ke(a,e,l){const t=a.slice();return t[19]=e[l],t}function Ee(a){let e,l;return{c(){e=v("div"),l=M(a[6]),this.h()},l(t){e=m(t,"DIV",{class:!0});var s=C(e);l=A(s,a[6]),s.forEach(f),this.h()},h(){y(e,"class","error svelte-1n450du")},m(t,s){H(t,e,s),c(e,l)},p(t,s){s&64&&F(l,t[6])},d(t){t&&f(e)}}}function Re(a){let e,l,t="Select Competition to View Results:",s,i,o,n="Choose a competition...",_,h,g,D,E,w=_e(a[2]),p=[];for(let r=0;r<w.length;r+=1)p[r]=Ce(ke(a,w,r));let u=a[3]&&De(a);return{c(){e=v("div"),l=v("div"),l.textContent=t,s=L(),i=v("select"),o=v("option"),o.textContent=n;for(let r=0;r<p.length;r+=1)p[r].c();h=L(),u&&u.c(),g=de(),this.h()},l(r){e=m(r,"DIV",{class:!0});var d=C(e);l=m(d,"DIV",{class:!0,"data-svelte-h":!0}),z(l)!=="svelte-6famh2"&&(l.textContent=t),s=V(d),i=m(d,"SELECT",{class:!0});var T=C(i);o=m(T,"OPTION",{"data-svelte-h":!0}),z(o)!=="svelte-1urbt8h"&&(o.textContent=n);for(let N=0;N<p.length;N+=1)p[N].l(T);T.forEach(f),d.forEach(f),h=V(r),u&&u.l(r),g=de(),this.h()},h(){y(l,"class","selector-label svelte-1n450du"),o.__value="",ve(o,o.__value),y(i,"class","competition-select svelte-1n450du"),y(e,"class","competition-selector svelte-1n450du")},m(r,d){var T;H(r,e,d),c(e,l),c(e,s),c(e,i),c(i,o);for(let N=0;N<p.length;N+=1)p[N]&&p[N].m(i,null);ge(i,((T=a[3])==null?void 0:T.id)||""),H(r,h,d),u&&u.m(r,d),H(r,g,d),D||(E=Pe(i,"change",a[8]),D=!0)},p(r,d){var T,N;if(d&4){w=_e(r[2]);let I;for(I=0;I<w.length;I+=1){const U=ke(r,w,I);p[I]?p[I].p(U,d):(p[I]=Ce(U),p[I].c(),p[I].m(i,null))}for(;I<p.length;I+=1)p[I].d(1);p.length=w.length}d&12&&_!==(_=((T=r[3])==null?void 0:T.id)||"")&&ge(i,((N=r[3])==null?void 0:N.id)||""),r[3]?u?u.p(r,d):(u=De(r),u.c(),u.m(g.parentNode,g)):u&&(u.d(1),u=null)},d(r){r&&(f(e),f(h),f(g)),pe(p,r),u&&u.d(r),D=!1,E()}}}function Be(a){let e,l="<h3>No Results Published</h3> <p>There are currently no competition results available to view.</p> <p>Check back after competitions have been judged and results published.</p>";return{c(){e=v("div"),e.innerHTML=l,this.h()},l(t){e=m(t,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-ntmt9w"&&(e.innerHTML=l),this.h()},h(){y(e,"class","empty-state svelte-1n450du")},m(t,s){H(t,e,s)},p:le,d(t){t&&f(e)}}}function Oe(a){let e,l='<div class="spinner svelte-1n450du"></div> <p>Loading competition results...</p>';return{c(){e=v("div"),e.innerHTML=l,this.h()},l(t){e=m(t,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-1c57wy0"&&(e.innerHTML=l),this.h()},h(){y(e,"class","loading svelte-1n450du")},m(t,s){H(t,e,s)},p:le,d(t){t&&f(e)}}}function Ce(a){let e,l=a[19].name+"",t,s,i=Ne(a[19].judging_date)+"",o,n,_;return{c(){e=v("option"),t=M(l),s=M(" - Judged "),o=M(i),n=L(),this.h()},l(h){e=m(h,"OPTION",{});var g=C(e);t=A(g,l),s=A(g," - Judged "),o=A(g,i),n=V(g),g.forEach(f),this.h()},h(){e.__value=_=a[19].id,ve(e,e.__value)},m(h,g){H(h,e,g),c(e,t),c(e,s),c(e,o),c(e,n)},p(h,g){g&4&&l!==(l=h[19].name+"")&&F(t,l),g&4&&i!==(i=Ne(h[19].judging_date)+"")&&F(o,i),g&4&&_!==(_=h[19].id)&&(e.__value=_,ve(e,e.__value))},d(h){h&&f(e)}}}function De(a){let e,l,t=!a[5]&&a[0].length>0&&je(a);function s(n,_){return n[5]?Ue:n[0].length===0?Fe:qe}let i=s(a),o=i(a);return{c(){t&&t.c(),e=L(),o.c(),l=de()},l(n){t&&t.l(n),e=V(n),o.l(n),l=de()},m(n,_){t&&t.m(n,_),H(n,e,_),o.m(n,_),H(n,l,_)},p(n,_){!n[5]&&n[0].length>0?t?t.p(n,_):(t=je(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null),i===(i=s(n))&&o?o.p(n,_):(o.d(1),o=i(n),o&&(o.c(),o.m(l.parentNode,l)))},d(n){n&&(f(e),f(l)),t&&t.d(n),o.d(n)}}}function je(a){let e,l,t=a[3].name+"",s,i,o,n,_,h,g="Total Entries",D,E,w=a[7].totalEntries+"",p,u,r,d,T="Awards Given",N,I,U=a[7].placedEntries+"",Z,x,O,G,K="Categories",se,J,q=a[7].categories+"",b,W,S,B,$="Average Score",Y,P,X=a[7].averageScore+"",ee;return{c(){e=v("div"),l=v("h2"),s=M(t),i=M(" - Results Summary"),o=L(),n=v("div"),_=v("div"),h=v("div"),h.textContent=g,D=L(),E=v("div"),p=M(w),u=L(),r=v("div"),d=v("div"),d.textContent=T,N=L(),I=v("div"),Z=M(U),x=L(),O=v("div"),G=v("div"),G.textContent=K,se=L(),J=v("div"),b=M(q),W=L(),S=v("div"),B=v("div"),B.textContent=$,Y=L(),P=v("div"),ee=M(X),this.h()},l(R){e=m(R,"DIV",{class:!0});var k=C(e);l=m(k,"H2",{style:!0});var j=C(l);s=A(j,t),i=A(j," - Results Summary"),j.forEach(f),o=V(k),n=m(k,"DIV",{class:!0});var Q=C(n);_=m(Q,"DIV",{class:!0});var ne=C(_);h=m(ne,"DIV",{class:!0,"data-svelte-h":!0}),z(h)!=="svelte-ufm050"&&(h.textContent=g),D=V(ne),E=m(ne,"DIV",{class:!0});var fe=C(E);p=A(fe,w),fe.forEach(f),ne.forEach(f),u=V(Q),r=m(Q,"DIV",{class:!0});var ae=C(r);d=m(ae,"DIV",{class:!0,"data-svelte-h":!0}),z(d)!=="svelte-1wthacd"&&(d.textContent=T),N=V(ae),I=m(ae,"DIV",{class:!0});var re=C(I);Z=A(re,U),re.forEach(f),ae.forEach(f),x=V(Q),O=m(Q,"DIV",{class:!0});var te=C(O);G=m(te,"DIV",{class:!0,"data-svelte-h":!0}),z(G)!=="svelte-1t4zeo0"&&(G.textContent=K),se=V(te),J=m(te,"DIV",{class:!0});var he=C(J);b=A(he,q),he.forEach(f),te.forEach(f),W=V(Q),S=m(Q,"DIV",{class:!0});var oe=C(S);B=m(oe,"DIV",{class:!0,"data-svelte-h":!0}),z(B)!=="svelte-r90083"&&(B.textContent=$),Y=V(oe),P=m(oe,"DIV",{class:!0});var me=C(P);ee=A(me,X),me.forEach(f),oe.forEach(f),Q.forEach(f),k.forEach(f),this.h()},h(){ce(l,"margin","0 0 1.5rem 0"),ce(l,"color","#333"),y(h,"class","summary-label svelte-1n450du"),y(E,"class","summary-value svelte-1n450du"),y(_,"class","summary-item svelte-1n450du"),y(d,"class","summary-label svelte-1n450du"),y(I,"class","summary-value svelte-1n450du"),y(r,"class","summary-item svelte-1n450du"),y(G,"class","summary-label svelte-1n450du"),y(J,"class","summary-value svelte-1n450du"),y(O,"class","summary-item svelte-1n450du"),y(B,"class","summary-label svelte-1n450du"),y(P,"class","summary-value svelte-1n450du"),y(S,"class","summary-item svelte-1n450du"),y(n,"class","summary-grid svelte-1n450du"),y(e,"class","results-summary svelte-1n450du")},m(R,k){H(R,e,k),c(e,l),c(l,s),c(l,i),c(e,o),c(e,n),c(n,_),c(_,h),c(_,D),c(_,E),c(E,p),c(n,u),c(n,r),c(r,d),c(r,N),c(r,I),c(I,Z),c(n,x),c(n,O),c(O,G),c(O,se),c(O,J),c(J,b),c(n,W),c(n,S),c(S,B),c(S,Y),c(S,P),c(P,ee)},p(R,k){k&8&&t!==(t=R[3].name+"")&&F(s,t),k&128&&w!==(w=R[7].totalEntries+"")&&F(p,w),k&128&&U!==(U=R[7].placedEntries+"")&&F(Z,U),k&128&&q!==(q=R[7].categories+"")&&F(b,q),k&128&&X!==(X=R[7].averageScore+"")&&F(ee,X)},d(R){R&&f(e)}}}function qe(a){let e,l=_e(Object.entries(a[1])),t=[];for(let s=0;s<l.length;s+=1)t[s]=Te(be(a,l,s));return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=de()},l(s){for(let i=0;i<t.length;i+=1)t[i].l(s);e=de()},m(s,i){for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(s,i);H(s,e,i)},p(s,i){if(i&2){l=_e(Object.entries(s[1]));let o;for(o=0;o<l.length;o+=1){const n=be(s,l,o);t[o]?t[o].p(n,i):(t[o]=Te(n),t[o].c(),t[o].m(e.parentNode,e))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},d(s){s&&f(e),pe(t,s)}}}function Fe(a){let e,l="<h3>No Results Available</h3> <p>Results for this competition have not been entered yet.</p>";return{c(){e=v("div"),e.innerHTML=l,this.h()},l(t){e=m(t,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-5maymk"&&(e.innerHTML=l),this.h()},h(){y(e,"class","empty-state svelte-1n450du")},m(t,s){H(t,e,s)},p:le,d(t){t&&f(e)}}}function Ue(a){let e,l='<div class="spinner svelte-1n450du"></div> <p>Loading results...</p>';return{c(){e=v("div"),e.innerHTML=l,this.h()},l(t){e=m(t,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-1wd8za7"&&(e.innerHTML=l),this.h()},h(){y(e,"class","loading svelte-1n450du")},m(t,s){H(t,e,s)},p:le,d(t){t&&f(e)}}}function we(a){let e,l,t=a[16].judge_count+"",s,i,o=a[16].judge_count===1?"":"s",n;return{c(){e=v("br"),l=v("small"),s=M(t),i=M(" judge"),n=M(o),this.h()},l(_){e=m(_,"BR",{}),l=m(_,"SMALL",{style:!0});var h=C(l);s=A(h,t),i=A(h," judge"),n=A(h,o),h.forEach(f),this.h()},h(){ce(l,"color","#666")},m(_,h){H(_,e,h),H(_,l,h),c(l,s),c(l,i),c(l,n)},p(_,h){h&2&&t!==(t=_[16].judge_count+"")&&F(s,t),h&2&&o!==(o=_[16].judge_count===1?"":"s")&&F(n,o)},d(_){_&&(f(e),f(l))}}}function Ge(a){let e,l="-/50";return{c(){e=v("span"),e.textContent=l,this.h()},l(t){e=m(t,"SPAN",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-1qmajtw"&&(e.textContent=l),this.h()},h(){y(e,"class","score-badge svelte-1n450du")},m(t,s){H(t,e,s)},p:le,d(t){t&&f(e)}}}function Je(a){let e,l=a[16].score+"",t,s;return{c(){e=v("span"),t=M(l),s=M("/50"),this.h()},l(i){e=m(i,"SPAN",{class:!0});var o=C(e);t=A(o,l),s=A(o,"/50"),o.forEach(f),this.h()},h(){y(e,"class","score-badge svelte-1n450du")},m(i,o){H(i,e,o),c(e,t),c(e,s)},p(i,o){o&2&&l!==(l=i[16].score+"")&&F(t,l)},d(i){i&&f(e)}}}function ze(a){let e,l="No Placement";return{c(){e=v("span"),e.textContent=l,this.h()},l(t){e=m(t,"SPAN",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-1ngxc4k"&&(e.textContent=l),this.h()},h(){y(e,"class","placement-badge placement-none svelte-1n450du")},m(t,s){H(t,e,s)},p:le,d(t){t&&f(e)}}}function Ze(a){let e,l,t=ue(a[16].placement).medal+"",s,i,o,n=ue(a[16].placement).text+"",_,h;return{c(){e=v("span"),l=v("span"),s=M(t),i=L(),o=v("span"),_=M(n),this.h()},l(g){e=m(g,"SPAN",{class:!0});var D=C(e);l=m(D,"SPAN",{});var E=C(l);s=A(E,t),E.forEach(f),i=V(D),o=m(D,"SPAN",{});var w=C(o);_=A(w,n),w.forEach(f),D.forEach(f),this.h()},h(){y(e,"class",h="placement-badge "+ue(a[16].placement).class+" svelte-1n450du")},m(g,D){H(g,e,D),c(e,l),c(l,s),c(e,i),c(e,o),c(o,_)},p(g,D){D&2&&t!==(t=ue(g[16].placement).medal+"")&&F(s,t),D&2&&n!==(n=ue(g[16].placement).text+"")&&F(_,n),D&2&&h!==(h="placement-badge "+ue(g[16].placement).class+" svelte-1n450du")&&y(e,"class",h)},d(g){g&&f(e)}}}function Ke(a){let e,l="No notes";return{c(){e=v("span"),e.textContent=l,this.h()},l(t){e=m(t,"SPAN",{style:!0,"data-svelte-h":!0}),z(e)!=="svelte-1ylmb08"&&(e.textContent=l),this.h()},h(){ce(e,"color","#999")},m(t,s){H(t,e,s)},p:le,d(t){t&&f(e)}}}function Ye(a){let e,l=a[16].judge_notes+"",t;return{c(){e=v("div"),t=M(l),this.h()},l(s){e=m(s,"DIV",{class:!0});var i=C(e);t=A(i,l),i.forEach(f),this.h()},h(){y(e,"class","judge-notes svelte-1n450du")},m(s,i){H(s,e,i),c(e,t)},p(s,i){i&2&&l!==(l=s[16].judge_notes+"")&&F(t,l)},d(s){s&&f(e)}}}function Ie(a){let e,l,t,s=a[16].entry_number+"",i,o,n,_=a[16].member_name+"",h,g,D,E=a[16].beer_name+"",w,p,u,r,d=a[16].ranking_points+"",T,N,I=a[16].ranking_points===1?"pt":"pts",U,Z,x,O,G,K,se,J,q,b=a[16].judge_count>0&&we(a);function W(k,j){return k[16].score?Je:Ge}let S=W(a),B=S(a);function $(k,j){return k[16].placement?Ze:ze}let Y=$(a),P=Y(a);function X(k,j){return k[16].judge_notes?Ye:Ke}let ee=X(a),R=ee(a);return{c(){e=v("tr"),l=v("td"),t=v("span"),i=M(s),o=L(),n=v("td"),h=M(_),g=L(),D=v("td"),w=M(E),p=L(),u=v("td"),r=v("span"),T=M(d),N=L(),U=M(I),Z=L(),b&&b.c(),x=L(),O=v("td"),B.c(),G=L(),K=v("td"),P.c(),se=L(),J=v("td"),R.c(),q=L(),this.h()},l(k){e=m(k,"TR",{class:!0});var j=C(e);l=m(j,"TD",{class:!0});var Q=C(l);t=m(Q,"SPAN",{class:!0});var ne=C(t);i=A(ne,s),ne.forEach(f),Q.forEach(f),o=V(j),n=m(j,"TD",{class:!0});var fe=C(n);h=A(fe,_),fe.forEach(f),g=V(j),D=m(j,"TD",{class:!0});var ae=C(D);w=A(ae,E),ae.forEach(f),p=V(j),u=m(j,"TD",{class:!0});var re=C(u);r=m(re,"SPAN",{style:!0});var te=C(r);T=A(te,d),N=V(te),U=A(te,I),te.forEach(f),Z=V(re),b&&b.l(re),re.forEach(f),x=V(j),O=m(j,"TD",{class:!0});var he=C(O);B.l(he),he.forEach(f),G=V(j),K=m(j,"TD",{class:!0});var oe=C(K);P.l(oe),oe.forEach(f),se=V(j),J=m(j,"TD",{class:!0});var me=C(J);R.l(me),me.forEach(f),q=V(j),j.forEach(f),this.h()},h(){y(t,"class","entry-number svelte-1n450du"),y(l,"class","svelte-1n450du"),y(n,"class","svelte-1n450du"),y(D,"class","svelte-1n450du"),ce(r,"font-weight","600"),ce(r,"color",a[16].ranking_points>0?"#059669":"#666"),y(u,"class","svelte-1n450du"),y(O,"class","svelte-1n450du"),y(K,"class","svelte-1n450du"),y(J,"class","svelte-1n450du"),y(e,"class","svelte-1n450du")},m(k,j){H(k,e,j),c(e,l),c(l,t),c(t,i),c(e,o),c(e,n),c(n,h),c(e,g),c(e,D),c(D,w),c(e,p),c(e,u),c(u,r),c(r,T),c(r,N),c(r,U),c(u,Z),b&&b.m(u,null),c(e,x),c(e,O),B.m(O,null),c(e,G),c(e,K),P.m(K,null),c(e,se),c(e,J),R.m(J,null),c(e,q)},p(k,j){j&2&&s!==(s=k[16].entry_number+"")&&F(i,s),j&2&&_!==(_=k[16].member_name+"")&&F(h,_),j&2&&E!==(E=k[16].beer_name+"")&&F(w,E),j&2&&d!==(d=k[16].ranking_points+"")&&F(T,d),j&2&&I!==(I=k[16].ranking_points===1?"pt":"pts")&&F(U,I),j&2&&ce(r,"color",k[16].ranking_points>0?"#059669":"#666"),k[16].judge_count>0?b?b.p(k,j):(b=we(k),b.c(),b.m(u,null)):b&&(b.d(1),b=null),S===(S=W(k))&&B?B.p(k,j):(B.d(1),B=S(k),B&&(B.c(),B.m(O,null))),Y===(Y=$(k))&&P?P.p(k,j):(P.d(1),P=Y(k),P&&(P.c(),P.m(K,null))),ee===(ee=X(k))&&R?R.p(k,j):(R.d(1),R=ee(k),R&&(R.c(),R.m(J,null)))},d(k){k&&f(e),b&&b.d(),B.d(),P.d(),R.d()}}}function Te(a){let e,l,t,s=a[12]+"",i,o,n,_,h='<tr class="svelte-1n450du"><th class="svelte-1n450du">Entry</th> <th class="svelte-1n450du">Member</th> <th class="svelte-1n450du">Beer Name</th> <th class="svelte-1n450du">Ranking Points</th> <th class="svelte-1n450du">Score</th> <th class="svelte-1n450du">Placement</th> <th class="svelte-1n450du">Judge Notes</th></tr>',g,D,E,w=_e(a[13]),p=[];for(let u=0;u<w.length;u+=1)p[u]=Ie(ye(a,w,u));return{c(){e=v("div"),l=v("div"),t=v("h3"),i=M(s),o=L(),n=v("table"),_=v("thead"),_.innerHTML=h,g=L(),D=v("tbody");for(let u=0;u<p.length;u+=1)p[u].c();E=L(),this.h()},l(u){e=m(u,"DIV",{class:!0});var r=C(e);l=m(r,"DIV",{class:!0});var d=C(l);t=m(d,"H3",{class:!0});var T=C(t);i=A(T,s),T.forEach(f),d.forEach(f),o=V(r),n=m(r,"TABLE",{class:!0});var N=C(n);_=m(N,"THEAD",{"data-svelte-h":!0}),z(_)!=="svelte-hus28l"&&(_.innerHTML=h),g=V(N),D=m(N,"TBODY",{});var I=C(D);for(let U=0;U<p.length;U+=1)p[U].l(I);I.forEach(f),N.forEach(f),E=V(r),r.forEach(f),this.h()},h(){y(t,"class","category-title svelte-1n450du"),y(l,"class","category-header svelte-1n450du"),y(n,"class","results-table svelte-1n450du"),y(e,"class","category-section svelte-1n450du")},m(u,r){H(u,e,r),c(e,l),c(l,t),c(t,i),c(e,o),c(e,n),c(n,_),c(n,g),c(n,D);for(let d=0;d<p.length;d+=1)p[d]&&p[d].m(D,null);c(e,E)},p(u,r){if(r&2&&s!==(s=u[12]+"")&&F(i,s),r&2){w=_e(u[13]);let d;for(d=0;d<w.length;d+=1){const T=ye(u,w,d);p[d]?p[d].p(T,r):(p[d]=Ie(T),p[d].c(),p[d].m(D,null))}for(;d<p.length;d+=1)p[d].d(1);p.length=w.length}},d(u){u&&f(e),pe(p,u)}}}function Qe(a){let e,l,t='<h1 class="svelte-1n450du">Competition Results</h1> <p class="subtitle svelte-1n450du">View published competition results and standings</p>',s,i,o,n="Back to Competitions",_,h,g,D,E=a[6]&&Ee(a);function w(r,d){return r[4]?Oe:r[2].length===0?Be:Re}let p=w(a),u=p(a);return{c(){e=v("div"),l=v("div"),l.innerHTML=t,s=L(),i=v("div"),o=v("button"),o.textContent=n,_=L(),E&&E.c(),h=L(),u.c(),this.h()},l(r){e=m(r,"DIV",{class:!0});var d=C(e);l=m(d,"DIV",{class:!0,"data-svelte-h":!0}),z(l)!=="svelte-utbced"&&(l.innerHTML=t),s=V(d),i=m(d,"DIV",{class:!0});var T=C(i);o=m(T,"BUTTON",{class:!0,"data-svelte-h":!0}),z(o)!=="svelte-ri2cai"&&(o.textContent=n),T.forEach(f),_=V(d),E&&E.l(d),h=V(d),u.l(d),d.forEach(f),this.h()},h(){y(l,"class","hero svelte-1n450du"),y(o,"class","btn btn-secondary svelte-1n450du"),y(i,"class","controls svelte-1n450du"),y(e,"class","container svelte-1n450du")},m(r,d){H(r,e,d),c(e,l),c(e,s),c(e,i),c(i,o),c(e,_),E&&E.m(e,null),c(e,h),u.m(e,null),g||(D=Pe(o,"click",a[9]),g=!0)},p(r,[d]){r[6]?E?E.p(r,d):(E=Ee(r),E.c(),E.m(e,h)):E&&(E.d(1),E=null),p===(p=w(r))&&u?u.p(r,d):(u.d(1),u=p(r),u&&(u.c(),u.m(e,null)))},i:le,o:le,d(r){r&&f(e),E&&E.d(),u.d(),g=!1,D()}}}function We(a){switch(a){case 1:return 3;case 2:return 2;case 3:return 1;default:return 0}}function Xe(a,e,l,t){let s=[],i=null;for(const n of t){let _;try{_=Array.isArray(n.bjcp_category_ids)?n.bjcp_category_ids:JSON.parse(n.bjcp_category_ids)}catch{console.warn("Failed to parse bjcp_category_ids for group:",n.id);continue}if(_.includes(e)){i=n.id;break}}return i?s=l.filter(n=>n.entry_id===a&&n.ranking_group_id===i):s=l.filter(n=>n.entry_id===a&&n.bjcp_category_id===e),{totalPoints:s.reduce((n,_)=>n+We(_.rank_position),0),judgeCount:s.length,rankings:s}}function ue(a){switch(a){case"1":return{text:"1st Place",class:"placement-first",medal:"🥇"};case"2":return{text:"2nd Place",class:"placement-second",medal:"🥈"};case"3":return{text:"3rd Place",class:"placement-third",medal:"🥉"};case"HM":return{text:"Honorable Mention",class:"placement-hm",medal:"🏅"};default:return{text:"No Placement",class:"placement-none",medal:""}}}function Ne(a){if(!a)return"No date set";try{let e=a;a.includes(" ")&&!a.includes("T")&&(e=a.replace(" ","T"),!e.includes("+")&&!e.includes("Z")&&(e+="Z"));const l=new Date(e);return isNaN(l.getTime())?(console.warn("Invalid date after parsing:",a,"->",e),"Invalid Date"):l.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}catch(e){return console.warn("Error formatting date:",a,e),"Invalid Date"}}function xe(a,e,l){let t,s,i=[],o=null,n=[],_=!0,h=!1,g=null;Le(()=>{D()}),Se(()=>{});async function D(){l(4,_=!0),l(6,g=null);try{console.log("Loading published competitions...");const{data:u,error:r}=await ie.from("competitions").select("*").eq("results_published",!0).order("judging_date",{ascending:!1});if(r)throw r;l(2,i=u||[]),console.log("Loaded",i.length,"published competitions"),i.length>0&&(l(3,o=i[0]),await w(i[0]))}catch(u){console.error("Error loading competitions:",u),l(6,g=u.message||"Failed to load competitions")}finally{l(4,_=!1)}}async function E(u){const r=u.target.value;if(!r){l(3,o=null),l(0,n=[]);return}const d=i.find(T=>T.id===r);d&&(l(3,o=d),await w(d))}async function w(u){l(5,h=!0),l(6,g=null);try{console.log("Loading results for competition:",u.name);const{data:r,error:d}=await ie.from("competition_results").select("*").eq("competition_id",u.id).order("placement",{ascending:!0,nullsLast:!0}).order("score",{ascending:!1});if(d)throw d;if(!r||r.length===0){l(0,n=[]);return}const T=r.map(q=>q.entry_id),{data:N,error:I}=await ie.from("competition_entries").select("*").in("id",T);if(I)throw I;const U=[...new Set(N.map(q=>q.member_id))],{data:Z}=await ie.from("members").select("id, name").in("id",U),x=[...new Set(N.map(q=>q.bjcp_category_id).filter(Boolean))],{data:O}=await ie.from("bjcp_categories").select("id, category_name, category_number, subcategory_letter, subcategory_name").in("id",x);let G=[];if(u.category_system==="custom"){const{data:q,error:b}=await ie.from("competition_ranking_groups").select("*").eq("competition_id",u.id).order("group_order");b||(G=q||[])}const{data:K,error:se}=await ie.from("competition_rankings").select(`
          *,
          entry:competition_entries!inner(id, entry_number, beer_name),
          judge:members!competition_rankings_judge_id_fkey(id, name),
          category:bjcp_categories(category_name, category_number, subcategory_letter),
          ranking_group:competition_ranking_groups(id, group_name, group_description)
        `).eq("competition_id",u.id).order("bjcp_category_id").order("rank_position"),J=K||[];l(0,n=r.map(q=>{const b=N.find(P=>P.id===q.entry_id),W=Z==null?void 0:Z.find(P=>P.id===(b==null?void 0:b.member_id)),S=O==null?void 0:O.find(P=>P.id===(b==null?void 0:b.bjcp_category_id)),B=S?`${S.category_number}${S.subcategory_letter||""} - ${S.category_name}`:"Unknown Category";let $=null;if(G.length>0&&(b!=null&&b.bjcp_category_id)){const P=G.find(X=>X.bjcp_category_ids.includes(b.bjcp_category_id));$=(P==null?void 0:P.group_name)||null}const Y=b!=null&&b.bjcp_category_id?Xe(b.id,b.bjcp_category_id,J,G):{totalPoints:0,judgeCount:0,rankings:[]};return{...q,entry_number:(b==null?void 0:b.entry_number)||"N/A",beer_name:(b==null?void 0:b.beer_name)||"Unknown Beer",member_name:(W==null?void 0:W.name)||"Unknown Member",category_display:B,ranking_group_name:$,display_group:$||B,category_number:(S==null?void 0:S.category_number)||"",subcategory_letter:(S==null?void 0:S.subcategory_letter)||"",ranking_points:Y.totalPoints,judge_count:Y.judgeCount}})),console.log("Loaded",n.length,"results")}catch(r){console.error("Error loading results:",r),l(6,g=r.message||"Failed to load results")}finally{l(5,h=!1)}}function p(){He("/competitions")}return a.$$.update=()=>{a.$$.dirty&1&&l(1,t=n.reduce((u,r)=>{const d=r.display_group;return u[d]||(u[d]=[]),u[d].push(r),u},{})),a.$$.dirty&3&&l(7,s={totalEntries:n.length,placedEntries:n.filter(u=>u.placement&&u.placement!=="").length,categories:Object.keys(t).length,averageScore:n.length>0?Math.round(n.reduce((u,r)=>u+(r.score||0),0)/n.length*10)/10:0})},[n,t,i,o,_,h,g,s,E,p]}class nt extends Ae{constructor(e){super(),Me(this,e,xe,Qe,Ve,{})}}export{nt as component};
