import{s as Fe,k as be,C as We,d as b,i as M,b as u,q as w,c as E,E as K,g as R,e as S,G as ve,h as j,j as T,f as G,t as H,n as x,a as F,x as _e,F as Ve,M as ye,r as Ke}from"../chunks/DpwROyu6.js";import{S as Qe,i as Xe,d as ke,t as ie,a as se,m as we,b as Ce,e as Ee,g as Ze,c as xe}from"../chunks/BHIxbS5H.js";import{e as ae}from"../chunks/CurIhP_1.js";import{g as De}from"../chunks/BPUUyVED.js";import{p as et}from"../chunks/9YNtkGAc.js";import{u as tt}from"../chunks/CN8V5uJw.js";import{a as rt,i as nt,c as ot}from"../chunks/CdVdk_PO.js";import{s as z}from"../chunks/CCM_4jRA.js";import{C as it}from"../chunks/XUMP8LP7.js";import{L as st}from"../chunks/BWGxyfTN.js";import{B as Re}from"../chunks/28GNhQ-J.js";function Te(n,e,r){const t=n.slice();return t[32]=e[r],t[34]=r,t}function $e(n,e,r){const t=n.slice();return t[8]=e[r],t}function Ge(n,e,r){const t=n.slice();return t[37]=e[r],t}function at(n){let e;return{c(){e=H("‚¨ÖÔ∏è Back to Judging")},l(r){e=G(r,"‚¨ÖÔ∏è Back to Judging")},m(r,t){M(r,e,t)},d(r){r&&b(e)}}}function lt(n){let e;return{c(){e=H("üè† Judge Portal")},l(r){e=G(r,"üè† Judge Portal")},m(r,t){M(r,e,t)},d(r){r&&b(e)}}}function ct(n){let e,r,t,i=n[1].length+"",o,s,d,f,l,c,C=ae(n[1]),_=[];for(let p=0;p<C.length;p+=1)_[p]=He(Ge(n,C,p));let v=n[2]&&Me(n);return{c(){e=j("div"),r=j("h2"),t=H("Select Category to Rank ("),o=H(i),s=H(" categories)"),d=T(),f=j("div");for(let p=0;p<_.length;p+=1)_[p].c();l=T(),v&&v.c(),c=ve(),this.h()},l(p){e=E(p,"DIV",{class:!0});var k=S(e);r=E(k,"H2",{});var a=S(r);t=G(a,"Select Category to Rank ("),o=G(a,i),s=G(a," categories)"),a.forEach(b),d=R(k),f=E(k,"DIV",{class:!0});var h=S(f);for(let I=0;I<_.length;I+=1)_[I].l(h);h.forEach(b),k.forEach(b),l=R(p),v&&v.l(p),c=ve(),this.h()},h(){w(f,"class","categories-grid svelte-1w86bp7"),w(e,"class","categories-section svelte-1w86bp7")},m(p,k){M(p,e,k),u(e,r),u(r,t),u(r,o),u(r,s),u(e,d),u(e,f);for(let a=0;a<_.length;a+=1)_[a]&&_[a].m(f,null);M(p,l,k),v&&v.m(p,k),M(p,c,k)},p(p,k){if(k[0]&2&&i!==(i=p[1].length+"")&&F(o,i),k[0]&1030){C=ae(p[1]);let a;for(a=0;a<C.length;a+=1){const h=Ge(p,C,a);_[a]?_[a].p(h,k):(_[a]=He(h),_[a].c(),_[a].m(f,null))}for(;a<_.length;a+=1)_[a].d(1);_.length=C.length}p[2]?v?v.p(p,k):(v=Me(p),v.c(),v.m(c.parentNode,c)):v&&(v.d(1),v=null)},i:x,o:x,d(p){p&&(b(e),b(l),b(c)),Ve(_,p),v&&v.d(p)}}}function ut(n){let e,r="<h3>No Categories Found</h3> <p>No entries have been submitted for this competition yet.</p>";return{c(){e=j("div"),e.innerHTML=r,this.h()},l(t){e=E(t,"DIV",{class:!0,"data-svelte-h":!0}),K(e)!=="svelte-1c7kpl1"&&(e.innerHTML=r),this.h()},h(){w(e,"class","empty-state svelte-1w86bp7")},m(t,i){M(t,e,i)},p:x,i:x,o:x,d(t){t&&b(e)}}}function dt(n){let e,r,t="Error Loading Data",i,o,s,d,f,l="üîÑ Retry",c,C;return{c(){e=j("div"),r=j("h3"),r.textContent=t,i=T(),o=j("p"),s=H(n[8]),d=T(),f=j("button"),f.textContent=l,this.h()},l(_){e=E(_,"DIV",{class:!0});var v=S(e);r=E(v,"H3",{"data-svelte-h":!0}),K(r)!=="svelte-14daeti"&&(r.textContent=t),i=R(v),o=E(v,"P",{});var p=S(o);s=G(p,n[8]),p.forEach(b),d=R(v),f=E(v,"BUTTON",{class:!0,"data-svelte-h":!0}),K(f)!=="svelte-k0kltk"&&(f.textContent=l),v.forEach(b),this.h()},h(){w(f,"class","nav-btn nav-btn-primary svelte-1w86bp7"),w(e,"class","error-state svelte-1w86bp7")},m(_,v){M(_,e,v),u(e,r),u(e,i),u(e,o),u(o,s),u(e,d),u(e,f),c||(C=_e(f,"click",n[20]),c=!0)},p(_,v){v[0]&256&&F(s,_[8])},i:x,o:x,d(_){_&&b(e),c=!1,C()}}}function _t(n){let e,r;return e=new st({props:{message:"Loading categories and rankings..."}}),{c(){Ee(e.$$.fragment)},l(t){Ce(e.$$.fragment,t)},m(t,i){we(e,t,i),r=!0},p:x,i(t){r||(se(e.$$.fragment,t),r=!0)},o(t){ie(e.$$.fragment,t),r=!1},d(t){ke(e,t)}}}function He(n){let e,r,t=n[37].displayName+"",i,o,s,d=n[37].entryCount+"",f,l,c,C,_,v;function p(){return n[21](n[37])}return{c(){e=j("div"),r=j("div"),i=H(t),o=T(),s=j("div"),f=H(d),l=H(" entries"),c=T(),this.h()},l(k){e=E(k,"DIV",{class:!0,role:!0,tabindex:!0});var a=S(e);r=E(a,"DIV",{class:!0});var h=S(r);i=G(h,t),h.forEach(b),o=R(a),s=E(a,"DIV",{class:!0});var I=S(s);f=G(I,d),l=G(I," entries"),I.forEach(b),c=R(a),a.forEach(b),this.h()},h(){var k;w(r,"class","category-name svelte-1w86bp7"),w(s,"class","category-stats svelte-1w86bp7"),w(e,"class",C="category-card "+(((k=n[2])==null?void 0:k.id)===n[37].id?"selected":"")+" svelte-1w86bp7"),w(e,"role","button"),w(e,"tabindex","0")},m(k,a){M(k,e,a),u(e,r),u(r,i),u(e,o),u(e,s),u(s,f),u(s,l),u(e,c),_||(v=_e(e,"click",p),_=!0)},p(k,a){var h;n=k,a[0]&2&&t!==(t=n[37].displayName+"")&&F(i,t),a[0]&2&&d!==(d=n[37].entryCount+"")&&F(f,d),a[0]&6&&C!==(C="category-card "+(((h=n[2])==null?void 0:h.id)===n[37].id?"selected":"")+" svelte-1w86bp7")&&w(e,"class",C)},d(k){k&&b(e),_=!1,v()}}}function Me(n){let e,r,t,i,o=n[2].displayName+"",s,d,f,l=n[4]?"Saving...":"Save Rankings",c,C,_,v,p,k,a,h=n[6].length>0&&Le(n),I=n[5]==="intraclub"&&Be();function W(V,q){return V[0].length===0?pt:ft}let U=W(n),$=U(n);return{c(){e=j("div"),r=j("div"),t=j("h2"),i=H("Rankings for "),s=H(o),d=T(),f=j("button"),c=H(l),_=T(),h&&h.c(),v=T(),I&&I.c(),p=T(),$.c(),this.h()},l(V){e=E(V,"DIV",{class:!0});var q=S(e);r=E(q,"DIV",{class:!0});var P=S(r);t=E(P,"H2",{class:!0});var Q=S(t);i=G(Q,"Rankings for "),s=G(Q,o),Q.forEach(b),d=R(P),f=E(P,"BUTTON",{class:!0});var Z=S(f);c=G(Z,l),Z.forEach(b),P.forEach(b),_=R(q),h&&h.l(q),v=R(q),I&&I.l(q),p=R(q),$.l(q),q.forEach(b),this.h()},h(){w(t,"class","svelte-1w86bp7"),w(f,"class","save-btn svelte-1w86bp7"),f.disabled=C=n[4]||n[0].length===0,w(r,"class","rankings-header svelte-1w86bp7"),w(e,"class","rankings-section svelte-1w86bp7")},m(V,q){M(V,e,q),u(e,r),u(r,t),u(t,i),u(t,s),u(r,d),u(r,f),u(f,c),u(e,_),h&&h.m(e,null),u(e,v),I&&I.m(e,null),u(e,p),$.m(e,null),k||(a=_e(f,"click",n[13]),k=!0)},p(V,q){q[0]&4&&o!==(o=V[2].displayName+"")&&F(s,o),q[0]&16&&l!==(l=V[4]?"Saving...":"Save Rankings")&&F(c,l),q[0]&17&&C!==(C=V[4]||V[0].length===0)&&(f.disabled=C),V[6].length>0?h?h.p(V,q):(h=Le(V),h.c(),h.m(e,v)):h&&(h.d(1),h=null),V[5]==="intraclub"?I||(I=Be(),I.c(),I.m(e,p)):I&&(I.d(1),I=null),U===(U=W(V))&&$?$.p(V,q):($.d(1),$=U(V),$&&($.c(),$.m(e,null)))},d(V){V&&b(e),h&&h.d(),I&&I.d(),$.d(),k=!1,a()}}}function Le(n){let e,r,t="‚ö†Ô∏è Ranking Restrictions",i,o=ae(n[6]),s=[];for(let d=0;d<o.length;d+=1)s[d]=Je($e(n,o,d));return{c(){e=j("div"),r=j("h4"),r.textContent=t,i=T();for(let d=0;d<s.length;d+=1)s[d].c();this.h()},l(d){e=E(d,"DIV",{class:!0});var f=S(e);r=E(f,"H4",{class:!0,"data-svelte-h":!0}),K(r)!=="svelte-8c14r8"&&(r.textContent=t),i=R(f);for(let l=0;l<s.length;l+=1)s[l].l(f);f.forEach(b),this.h()},h(){w(r,"class","svelte-1w86bp7"),w(e,"class","validation-warning svelte-1w86bp7")},m(d,f){M(d,e,f),u(e,r),u(e,i);for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(e,null)},p(d,f){if(f[0]&64){o=ae(d[6]);let l;for(l=0;l<o.length;l+=1){const c=$e(d,o,l);s[l]?s[l].p(c,f):(s[l]=Je(c),s[l].c(),s[l].m(e,null))}for(;l<s.length;l+=1)s[l].d(1);s.length=o.length}},d(d){d&&b(e),Ve(s,d)}}}function Je(n){let e,r=n[8].message+"",t;return{c(){e=j("div"),t=H(r),this.h()},l(i){e=E(i,"DIV",{class:!0});var o=S(e);t=G(o,r),o.forEach(b),this.h()},h(){w(e,"class","validation-error svelte-1w86bp7")},m(i,o){M(i,e,o),u(e,t)},p(i,o){o[0]&64&&r!==(r=i[8].message+"")&&F(t,r)},d(i){i&&b(e)}}}function Be(n){let e,r='<h4 class="svelte-1w86bp7">‚ÑπÔ∏è Intraclub Competition Rules</h4> <div style="color: #1e40af; font-size: 0.875rem;">You cannot rank your own entries in positions 1-3. Your entries are marked with a blue indicator.</div>';return{c(){e=j("div"),e.innerHTML=r,this.h()},l(t){e=E(t,"DIV",{class:!0,style:!0,"data-svelte-h":!0}),K(e)!=="svelte-d1dplj"&&(e.innerHTML=r),this.h()},h(){w(e,"class","validation-warning svelte-1w86bp7"),ye(e,"background","#f0f9ff"),ye(e,"border-color","#3b82f6")},m(t,i){M(t,e,i)},d(t){t&&b(e)}}}function ft(n){let e,r=ae(n[0]),t=[];for(let i=0;i<r.length;i+=1)t[i]=Ye(Te(n,r,i));return{c(){e=j("div");for(let i=0;i<t.length;i+=1)t[i].c();this.h()},l(i){e=E(i,"DIV",{class:!0});var o=S(e);for(let s=0;s<t.length;s+=1)t[s].l(o);o.forEach(b),this.h()},h(){w(e,"class","rankings-list svelte-1w86bp7")},m(i,o){M(i,e,o);for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,null)},p(i,o){if(o[0]&55813){r=ae(i[0]);let s;for(s=0;s<r.length;s+=1){const d=Te(i,r,s);t[s]?t[s].p(d,o):(t[s]=Ye(d),t[s].c(),t[s].m(e,null))}for(;s<t.length;s+=1)t[s].d(1);t.length=r.length}},d(i){i&&b(e),Ve(t,i)}}}function pt(n){let e,r,t="No Scored Entries",i,o,s="You need to score entries in this category before you can rank them.",d,f,l,c;return{c(){e=j("div"),r=j("h3"),r.textContent=t,i=T(),o=j("p"),o.textContent=s,d=T(),f=j("a"),l=H("üèÜ Start Judging"),this.h()},l(C){e=E(C,"DIV",{class:!0});var _=S(e);r=E(_,"H3",{"data-svelte-h":!0}),K(r)!=="svelte-fdz8k3"&&(r.textContent=t),i=R(_),o=E(_,"P",{"data-svelte-h":!0}),K(o)!=="svelte-a9o4sh"&&(o.textContent=s),d=R(_),f=E(_,"A",{href:!0,class:!0});var v=S(f);l=G(v,"üèÜ Start Judging"),v.forEach(b),_.forEach(b),this.h()},h(){w(f,"href",c="/judge/competition/"+n[7]),w(f,"class","nav-btn nav-btn-primary svelte-1w86bp7"),w(e,"class","empty-state svelte-1w86bp7")},m(C,_){M(C,e,_),u(e,r),u(e,i),u(e,o),u(e,d),u(e,f),u(f,l)},p(C,_){_[0]&128&&c!==(c="/judge/competition/"+C[7])&&w(f,"href",c)},d(C){C&&b(e)}}}function Ue(n){let e,r="üë§ Your Entry";return{c(){e=j("span"),e.textContent=r,this.h()},l(t){e=E(t,"SPAN",{class:!0,"data-svelte-h":!0}),K(e)!=="svelte-rptdas"&&(e.textContent=r),this.h()},h(){w(e,"class","own-entry-indicator svelte-1w86bp7")},m(t,i){M(t,e,i)},d(t){t&&b(e)}}}function Oe(n){let e,r,t=n[32].entry.category_display+"",i;return{c(){e=j("div"),r=H("Category: "),i=H(t),this.h()},l(o){e=E(o,"DIV",{class:!0});var s=S(e);r=G(s,"Category: "),i=G(s,t),s.forEach(b),this.h()},h(){w(e,"class","detail-text svelte-1w86bp7")},m(o,s){M(o,e,s),u(e,r),u(e,i)},p(o,s){s[0]&1&&t!==(t=o[32].entry.category_display+"")&&F(i,t)},d(o){o&&b(e)}}}function Pe(n){let e,r="üìù Has notes";return{c(){e=j("span"),e.textContent=r,this.h()},l(t){e=E(t,"SPAN",{class:!0,"data-svelte-h":!0}),K(e)!=="svelte-15x1uhx"&&(e.textContent=r),this.h()},h(){w(e,"class","detail-text svelte-1w86bp7")},m(t,i){M(t,e,i)},d(t){t&&b(e)}}}function Ye(n){var pe;let e,r,t=Ae(n[32].rank_position)+"",i,o,s,d,f,l=n[32].entry.entry_number+"",c,C,_=n[14](n[32].entry),v,p,k,a,h=n[9](n[32].entry.beer_name)+"",I,W,U,$,V,q=n[32].entry.total_score+"",P,Q,Z,re,X,Y,fe="‚¨ÜÔ∏è",le,A,ce,ne,g,L,D,O,N=_&&Ue(),y=((pe=n[2])==null?void 0:pe.isCustomGroup)&&Oe(n),m=n[32].entry.judge_notes&&Pe();function J(){return n[22](n[34])}function ee(){return n[23](n[34])}return{c(){e=j("div"),r=j("div"),i=H(t),o=T(),s=j("div"),d=j("div"),f=H("Entry #"),c=H(l),C=T(),N&&N.c(),v=T(),p=j("div"),k=j("div"),a=j("strong"),I=H(h),W=T(),y&&y.c(),U=T(),$=j("div"),V=j("span"),P=H(q),Q=H("/50"),Z=T(),m&&m.c(),re=T(),X=j("div"),Y=j("button"),Y.textContent=fe,le=T(),A=j("button"),ce=H("‚¨áÔ∏è"),g=T(),this.h()},l(te){e=E(te,"DIV",{class:!0});var B=S(e);r=E(B,"DIV",{class:!0});var ue=S(r);i=G(ue,t),ue.forEach(b),o=R(B),s=E(B,"DIV",{class:!0});var oe=S(s);d=E(oe,"DIV",{class:!0});var de=S(d);f=G(de,"Entry #"),c=G(de,l),C=R(de),N&&N.l(de),de.forEach(b),v=R(oe),p=E(oe,"DIV",{class:!0});var ge=S(p);k=E(ge,"DIV",{class:!0});var Ne=S(k);a=E(Ne,"STRONG",{});var Se=S(a);I=G(Se,h),Se.forEach(b),Ne.forEach(b),W=R(ge),y&&y.l(ge),ge.forEach(b),U=R(oe),$=E(oe,"DIV",{class:!0});var me=S($);V=E(me,"SPAN",{class:!0,style:!0});var je=S(V);P=G(je,q),Q=G(je,"/50"),je.forEach(b),Z=R(me),m&&m.l(me),me.forEach(b),oe.forEach(b),re=R(B),X=E(B,"DIV",{class:!0});var he=S(X);Y=E(he,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),K(Y)!=="svelte-4hx6ed"&&(Y.textContent=fe),le=R(he),A=E(he,"BUTTON",{class:!0,title:!0});var qe=S(A);ce=G(qe,"‚¨áÔ∏è"),qe.forEach(b),he.forEach(b),g=R(B),B.forEach(b),this.h()},h(){w(r,"class","rank-position svelte-1w86bp7"),w(d,"class","entry-number svelte-1w86bp7"),w(k,"class","detail-text svelte-1w86bp7"),w(p,"class","entry-details svelte-1w86bp7"),w(V,"class","score-badge svelte-1w86bp7"),ye(V,"background",ze(n[32].entry.total_score)),w($,"class","score-display svelte-1w86bp7"),w(s,"class","entry-info svelte-1w86bp7"),w(Y,"class","rank-btn svelte-1w86bp7"),Y.disabled=n[34]===0,w(Y,"title","Move up"),w(A,"class","rank-btn svelte-1w86bp7"),A.disabled=ne=n[34]===n[0].length-1,w(A,"title","Move down"),w(X,"class","ranking-controls svelte-1w86bp7"),w(e,"class",L="ranking-item "+(n[14](n[32].entry)?"own-entry":"")+" "+n[15](n[32])+" svelte-1w86bp7")},m(te,B){M(te,e,B),u(e,r),u(r,i),u(e,o),u(e,s),u(s,d),u(d,f),u(d,c),u(d,C),N&&N.m(d,null),u(s,v),u(s,p),u(p,k),u(k,a),u(a,I),u(p,W),y&&y.m(p,null),u(s,U),u(s,$),u($,V),u(V,P),u(V,Q),u($,Z),m&&m.m($,null),u(e,re),u(e,X),u(X,Y),u(X,le),u(X,A),u(A,ce),u(e,g),D||(O=[_e(Y,"click",J),_e(A,"click",ee)],D=!0)},p(te,B){var ue;n=te,B[0]&1&&t!==(t=Ae(n[32].rank_position)+"")&&F(i,t),B[0]&1&&l!==(l=n[32].entry.entry_number+"")&&F(c,l),B[0]&1&&(_=n[14](n[32].entry)),_?N||(N=Ue(),N.c(),N.m(d,null)):N&&(N.d(1),N=null),B[0]&1&&h!==(h=n[9](n[32].entry.beer_name)+"")&&F(I,h),(ue=n[2])!=null&&ue.isCustomGroup?y?y.p(n,B):(y=Oe(n),y.c(),y.m(p,null)):y&&(y.d(1),y=null),B[0]&1&&q!==(q=n[32].entry.total_score+"")&&F(P,q),B[0]&1&&ye(V,"background",ze(n[32].entry.total_score)),n[32].entry.judge_notes?m||(m=Pe(),m.c(),m.m($,null)):m&&(m.d(1),m=null),B[0]&1&&ne!==(ne=n[34]===n[0].length-1)&&(A.disabled=ne),B[0]&1&&L!==(L="ranking-item "+(n[14](n[32].entry)?"own-entry":"")+" "+n[15](n[32])+" svelte-1w86bp7")&&w(e,"class",L)},d(te){te&&b(e),N&&N.d(),y&&y.d(),m&&m.d(),D=!1,Ke(O)}}}function gt(n){let e,r='<h1 class="svelte-1w86bp7">üèÜ Category Rankings</h1> <p class="svelte-1w86bp7">Rank entries within each category based on your judging scores</p>',t,i,o,s,d,f,l,c,C,_;o=new Re({props:{variant:"secondary",$$slots:{default:[at]},$$scope:{ctx:n}}}),o.$on("click",n[18]),d=new Re({props:{variant:"secondary",$$slots:{default:[lt]},$$scope:{ctx:n}}}),d.$on("click",n[19]);const v=[_t,dt,ut,ct],p=[];function k(a,h){return a[3]?0:a[8]?1:a[1].length===0?2:3}return l=k(n),c=p[l]=v[l](n),{c(){e=j("div"),e.innerHTML=r,t=T(),i=j("div"),Ee(o.$$.fragment),s=T(),Ee(d.$$.fragment),f=T(),c.c(),C=ve(),this.h()},l(a){e=E(a,"DIV",{class:!0,"data-svelte-h":!0}),K(e)!=="svelte-k61t7l"&&(e.innerHTML=r),t=R(a),i=E(a,"DIV",{class:!0});var h=S(i);Ce(o.$$.fragment,h),s=R(h),Ce(d.$$.fragment,h),h.forEach(b),f=R(a),c.l(a),C=ve(),this.h()},h(){w(e,"class","header svelte-1w86bp7"),w(i,"class","nav-buttons svelte-1w86bp7")},m(a,h){M(a,e,h),M(a,t,h),M(a,i,h),we(o,i,null),u(i,s),we(d,i,null),M(a,f,h),p[l].m(a,h),M(a,C,h),_=!0},p(a,h){const I={};h[1]&512&&(I.$$scope={dirty:h,ctx:a}),o.$set(I);const W={};h[1]&512&&(W.$$scope={dirty:h,ctx:a}),d.$set(W);let U=l;l=k(a),l===U?p[l].p(a,h):(Ze(),ie(p[U],1,1,()=>{p[U]=null}),xe(),c=p[l],c?c.p(a,h):(c=p[l]=v[l](a),c.c()),se(c,1),c.m(C.parentNode,C))},i(a){_||(se(o.$$.fragment,a),se(d.$$.fragment,a),se(c),_=!0)},o(a){ie(o.$$.fragment,a),ie(d.$$.fragment,a),ie(c),_=!1},d(a){a&&(b(e),b(t),b(i),b(f),b(C)),ke(o),ke(d),p[l].d(a)}}}function mt(n){let e,r;return e=new it({props:{size:"xl",$$slots:{default:[gt]},$$scope:{ctx:n}}}),{c(){Ee(e.$$.fragment)},l(t){Ce(e.$$.fragment,t)},m(t,i){we(e,t,i),r=!0},p(t,i){const o={};i[0]&511|i[1]&512&&(o.$$scope={dirty:i,ctx:t}),e.$set(o)},i(t){r||(se(e.$$.fragment,t),r=!0)},o(t){ie(e.$$.fragment,t),r=!1},d(t){ke(e,t)}}}function Ae(n){switch(n){case 1:return"ü•á";case 2:return"ü•à";case 3:return"ü•â";default:return`${n}.`}}function ze(n){return n>=45?"#059669":n>=38?"#0891b2":n>=30?"#eab308":n>=21?"#f59e0b":"#dc2626"}function Ie(n,e="info"){const r=document.createElement("div");r.textContent=n,r.style.cssText=`
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 1rem 1.5rem;
      border-radius: 6px;
      color: white;
      font-weight: 500;
      z-index: 1000;
      background: ${e==="success"?"#059669":e==="error"?"#dc2626":"#6b7280"};
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    `,document.body.appendChild(r),setTimeout(()=>document.body.removeChild(r),3e3)}function ht(n,e,r){let t,i,o,s,d,f;be(n,tt,g=>r(16,o=g)),be(n,rt,g=>r(26,s=g)),be(n,nt,g=>r(27,d=g)),be(n,et,g=>r(17,f=g));let l=[],c=null,C=[],_=[],v=!0,p=!1,k=null,a=null,h=[];function I(g){return i?g||"No name provided":"Hidden"}We(async()=>{var g;if(!o){De("/auth");return}if(!d||((g=s.activeCompetition)==null?void 0:g.id)!==t)try{await ot.startJudgingSession(t,o.id)}catch(L){console.error("Error starting judging session:",L),r(8,k="Failed to start judging session"),r(3,v=!1);return}await W()});async function W(){r(3,v=!0),r(8,k=null);try{const{data:g,error:L}=await z.from("competitions").select("category_system, competition_type").eq("id",t).single();if(L)throw L;if(r(5,a=g.competition_type),g.category_system==="custom"){const{data:D,error:O}=await z.from("competition_ranking_groups").select(`
            id, group_name, group_description, bjcp_category_ids, group_order
          `).eq("competition_id",t).order("group_order");if(O)throw O;const N=[];for(const y of D||[]){const m=y.bjcp_category_ids,{data:J,error:ee}=await z.from("competition_entries").select("id, bjcp_category_id").eq("competition_id",t).in("bjcp_category_id",m);if(ee)throw ee;J&&J.length>0&&N.push({...y,isCustomGroup:!0,entryCount:J.length,displayName:y.group_name})}r(1,l=N)}else{const{data:D,error:O}=await z.from("competition_entries").select(`
            bjcp_category_id,
            bjcp_categories(
              id, category_number, subcategory_letter, 
              subcategory_name, category_name
            )
          `).eq("competition_id",t);if(O)throw O;const N=new Map;D.forEach(y=>{const m=y.bjcp_categories;if(m){const J=m.id;N.has(J)?N.get(J).entryCount++:N.set(J,{...m,isCustomGroup:!1,entryCount:1,displayName:`${m.category_number}${m.subcategory_letter||""} - ${m.category_name}${m.subcategory_name?` (${m.subcategory_name})`:""}`})}}),r(1,l=Array.from(N.values()).sort((y,m)=>y.category_number.localeCompare(m.category_number)))}l.length>0&&(r(2,c=l[0]),await U())}catch(g){console.error("Error loading categories:",g),r(8,k=g.message)}finally{r(3,v=!1)}}async function U(){if(c)try{let g;if(c.isCustomGroup){const{data:y,error:m}=await z.from("competition_entries").select(`
            id, entry_number, beer_name, beer_notes, bjcp_category_id, member_id,
            members!competition_entries_member_id_fkey(name),
            bjcp_categories!competition_entries_bjcp_category_id_fkey(
              category_number, subcategory_letter, subcategory_name, category_name
            )
          `).eq("competition_id",t).in("bjcp_category_id",c.bjcp_category_ids).order("entry_number");if(m)throw m;g=y}else{const{data:y,error:m}=await z.from("competition_entries").select(`
            id, entry_number, beer_name, beer_notes, bjcp_category_id, member_id,
            members!competition_entries_member_id_fkey(name),
            bjcp_categories!competition_entries_bjcp_category_id_fkey(
              category_number, subcategory_letter, subcategory_name, category_name
            )
          `).eq("competition_id",t).eq("bjcp_category_id",c.id).order("entry_number");if(m)throw m;g=y}if(!g)throw new Error("No entries data loaded");const L=g.map(y=>y.id),{data:D,error:O}=await z.from("competition_judging_sessions").select("entry_id, total_score, judge_notes").eq("competition_id",t).eq("judge_id",o.id).in("entry_id",L);O&&console.warn("No judging data found:",O);let N=[];if(c.isCustomGroup){const{data:y,error:m}=await z.from("competition_rankings").select("*").eq("competition_id",t).eq("judge_id",o.id).eq("ranking_group_id",c.id).order("rank_position");m?console.warn("No existing group rankings found:",m):N=y}else{const{data:y,error:m}=await z.from("competition_rankings").select("*").eq("competition_id",t).eq("judge_id",o.id).eq("bjcp_category_id",c.id).order("rank_position");m?console.warn("No existing category rankings found:",m):N=y}if(C=g.map(y=>{var ee;const m=D==null?void 0:D.find(pe=>pe.entry_id===y.id),J=y.bjcp_categories;return{...y,member_name:((ee=y.members)==null?void 0:ee.name)||"Unknown",total_score:(m==null?void 0:m.total_score)||0,judge_notes:(m==null?void 0:m.judge_notes)||"",hasScore:!!(m!=null&&m.total_score),category_display:J?`${J.category_number}${J.subcategory_letter||""} - ${J.subcategory_name||J.category_name}`:"Unknown Category"}}),N&&N.length>0)r(0,_=N.map(y=>{const m=C.find(J=>J.id===y.entry_id);return{...y,entry:m}}));else{const y=C.filter(m=>m.hasScore).sort((m,J)=>J.total_score-m.total_score);r(0,_=y.map((m,J)=>({id:null,competition_id:t,judge_id:o.id,bjcp_category_id:c.isCustomGroup?null:c.id,ranking_group_id:c.isCustomGroup?c.id:null,entry_id:m.id,rank_position:J+1,ranking_notes:"",entry:m})))}}catch(g){console.error("Error loading category entries:",g),r(8,k=g.message)}}async function $(g){r(2,c=g),await U()}function V(g,L){if(g===L||L<0||L>=_.length)return;const D=[..._],[O]=D.splice(g,1);D.splice(L,0,O),D.forEach((N,y)=>{N.rank_position=y+1}),r(0,_=D)}function q(g){V(g,g-1)}function P(g){V(g,g+1)}function Q(){if(r(6,h=[]),a!=="intraclub")return!0;const L=_.filter(D=>D.rank_position<=3).filter(D=>D.entry&&D.entry.member_id===o.id);return L.length>0?(L.forEach(D=>{h.push({type:"self_ranking",message:`You cannot rank your own entry (#${D.entry.entry_number}) in position ${D.rank_position} during intraclub competitions.`,entryId:D.entry_id,position:D.rank_position})}),!1):!0}async function Z(){if(!(!c||_.length===0)){if(!Q()){Ie("Cannot save: You cannot rank your own entries in positions 1-3 during intraclub competitions","error");return}r(4,p=!0);try{if(c.isCustomGroup){const{error:D}=await z.from("competition_rankings").delete().eq("competition_id",t).eq("judge_id",o.id).eq("ranking_group_id",c.id);if(D)throw D}else{const{error:D}=await z.from("competition_rankings").delete().eq("competition_id",t).eq("judge_id",o.id).eq("bjcp_category_id",c.id);if(D)throw D}const g=_.map(D=>({competition_id:t,judge_id:o.id,bjcp_category_id:c.isCustomGroup?null:c.id,ranking_group_id:c.isCustomGroup?c.id:null,entry_id:D.entry_id,rank_position:D.rank_position,ranking_notes:D.ranking_notes||null})),{error:L}=await z.from("competition_rankings").insert(g);if(L)throw L;Ie("Rankings saved successfully!","success")}catch(g){console.error("Error saving rankings:",g),Ie("Failed to save rankings","error")}finally{r(4,p=!1)}}}function re(g){return g&&g.member_id===(o==null?void 0:o.id)}function X(g){return a==="intraclub"&&re(g.entry)&&g.rank_position<=3?"invalid-own-entry":""}const Y=()=>De(`/judge/competition/${t}`),fe=()=>De("/judge"),le=()=>window.location.reload(),A=g=>$(g),ce=g=>q(g),ne=g=>P(g);return n.$$.update=()=>{n.$$.dirty[0]&131072&&r(7,t=f.params.id),n.$$.dirty[0]&65536&&(i=(o==null?void 0:o.role)==="competition_director"),n.$$.dirty[0]&1&&_.length>0&&Q()},[_,l,c,v,p,a,h,t,k,I,$,q,P,Z,re,X,o,f,Y,fe,le,A,ce,ne]}class Nt extends Qe{constructor(e){super(),Xe(this,e,ht,mt,Fe,{},null,[-1,-1])}}export{Nt as component};
