import{s as Ut,k as At,C as Jt,D as Gt,d as u,i as ge,g as k,G as yt,j as w,I as Ct,O as kt,n as Nt,F as jt,r as Tt,a as G,q as _,K as ie,J as at,b as l,x as Me,L as wt,c as a,e as g,f as A,E as oe,h as o,t as D,M as F,P as lt}from"../chunks/DpwROyu6.js";import{S as Kt,i as Qt,d as _t,t as We,a as Ze,m as ft,b as dt,e as pt,g as Mt,c as Ft}from"../chunks/BHIxbS5H.js";import{e as ht}from"../chunks/CurIhP_1.js";import{g as Pt}from"../chunks/BPUUyVED.js";import{p as Xt}from"../chunks/9YNtkGAc.js";import{u as Yt}from"../chunks/CN8V5uJw.js";import{s as Ye}from"../chunks/CCM_4jRA.js";import{H as Wt}from"../chunks/D4n3Zs5P.js";import{C as Zt}from"../chunks/XUMP8LP7.js";import{L as xt}from"../chunks/BWGxyfTN.js";import{E as el}from"../chunks/CZ9EVN-i.js";import{B as St}from"../chunks/28GNhQ-J.js";function Dt(e,t,n){const s=e.slice();return s[42]=t[n],s[43]=t,s[44]=n,s}function It(e,t,n){const s=e.slice();return s[42]=t[n],s[45]=t,s[46]=n,s}function Ot(e,t,n){const s=e.slice();return s[47]=t[n],s}function tl(e){let t,n,s=e[3].name+"",i,C,m,b,d,E="Status",c,O,S,h=e[3].results_published?"Results Published":"Judging In Progress",U,p,z,J,X,Ke="Total Entries",Ie,_e,Ee=e[9].total+"",Ne,je,K,Z,Le="Results Entered",Fe,Q,fe=e[9].completed+"",Ue,Qe,de=e[9].total+"",ye,ne,ze=e[9].percentage+"",ke,x,we,Ae,Y,Ve="Unsaved Changes",ee,r,v=e[8].size+"",j,R,V,$,L,re,B,H,Pe,De="All Categories",Xe,W,be,te="All Status",I,le="Results Pending",q,he="Results Complete",Te,T,st,Be,$e,He,M,Ce,ae,y,ve,et,ue,se=ht(e[5]),pe=[];for(let f=0;f<se.length;f+=1)pe[f]=Rt(Ot(e,se,f));T=new St({props:{variant:"success",disabled:e[7]||e[8].size===0,$$slots:{default:[sl]},$$scope:{ctx:e}}}),T.$on("click",e[17]),Be=new St({props:{variant:"primary",disabled:e[7]||e[3].results_published,$$slots:{default:[nl]},$$scope:{ctx:e}}}),Be.$on("click",e[18]),He=new St({props:{variant:"secondary",$$slots:{default:[rl]},$$scope:{ctx:e}}}),He.$on("click",e[25]);const ot=[ol,al],Je=[];function it(f,P){return f[4].length===0?0:1}return Ce=it(e),ae=Je[Ce]=ot[Ce](e),{c(){t=o("div"),n=o("h2"),i=D(s),C=w(),m=o("div"),b=o("div"),d=o("span"),d.textContent=E,c=w(),O=o("span"),S=o("span"),U=D(h),z=w(),J=o("div"),X=o("span"),X.textContent=Ke,Ie=w(),_e=o("span"),Ne=D(Ee),je=w(),K=o("div"),Z=o("span"),Z.textContent=Le,Fe=w(),Q=o("span"),Ue=D(fe),Qe=D(" of "),ye=D(de),ne=D(" ("),ke=D(ze),x=D("%)"),we=w(),Ae=o("div"),Y=o("span"),Y.textContent=Ve,ee=w(),r=o("span"),j=D(v),V=w(),$=o("div"),L=o("input"),B=w(),H=o("select"),Pe=o("option"),Pe.textContent=De;for(let f=0;f<pe.length;f+=1)pe[f].c();Xe=w(),W=o("select"),be=o("option"),be.textContent=te,I=o("option"),I.textContent=le,q=o("option"),q.textContent=he,Te=w(),pt(T.$$.fragment),st=w(),pt(Be.$$.fragment),$e=w(),pt(He.$$.fragment),M=w(),ae.c(),y=yt(),this.h()},l(f){t=a(f,"DIV",{class:!0});var P=g(t);n=a(P,"H2",{class:!0});var Oe=g(n);i=A(Oe,s),Oe.forEach(u),C=k(P),m=a(P,"DIV",{class:!0});var ce=g(m);b=a(ce,"DIV",{class:!0});var N=g(b);d=a(N,"SPAN",{class:!0,"data-svelte-h":!0}),oe(d)!=="svelte-4ayl72"&&(d.textContent=E),c=k(N),O=a(N,"SPAN",{class:!0});var Re=g(O);S=a(Re,"SPAN",{class:!0});var me=g(S);U=A(me,h),me.forEach(u),Re.forEach(u),N.forEach(u),z=k(ce),J=a(ce,"DIV",{class:!0});var qe=g(J);X=a(qe,"SPAN",{class:!0,"data-svelte-h":!0}),oe(X)!=="svelte-1ly6mm6"&&(X.textContent=Ke),Ie=k(qe),_e=a(qe,"SPAN",{class:!0});var Ge=g(_e);Ne=A(Ge,Ee),Ge.forEach(u),qe.forEach(u),je=k(ce),K=a(ce,"DIV",{class:!0});var ut=g(K);Z=a(ut,"SPAN",{class:!0,"data-svelte-h":!0}),oe(Z)!=="svelte-k36mlp"&&(Z.textContent=Le),Fe=k(ut),Q=a(ut,"SPAN",{class:!0});var xe=g(Q);Ue=A(xe,fe),Qe=A(xe," of "),ye=A(xe,de),ne=A(xe," ("),ke=A(xe,ze),x=A(xe,"%)"),xe.forEach(u),ut.forEach(u),we=k(ce),Ae=a(ce,"DIV",{class:!0});var ct=g(Ae);Y=a(ct,"SPAN",{class:!0,"data-svelte-h":!0}),oe(Y)!=="svelte-1f8luub"&&(Y.textContent=Ve),ee=k(ct),r=a(ct,"SPAN",{class:!0});var vt=g(r);j=A(vt,v),vt.forEach(u),ct.forEach(u),ce.forEach(u),P.forEach(u),V=k(f),$=a(f,"DIV",{class:!0});var Se=g($);L=a(Se,"INPUT",{type:!0,class:!0,placeholder:!0}),B=k(Se),H=a(Se,"SELECT",{class:!0});var nt=g(H);Pe=a(nt,"OPTION",{"data-svelte-h":!0}),oe(Pe)!=="svelte-16sr5ty"&&(Pe.textContent=De);for(let rt=0;rt<pe.length;rt+=1)pe[rt].l(nt);nt.forEach(u),Xe=k(Se),W=a(Se,"SELECT",{class:!0});var tt=g(W);be=a(tt,"OPTION",{"data-svelte-h":!0}),oe(be)!=="svelte-rskcdc"&&(be.textContent=te),I=a(tt,"OPTION",{"data-svelte-h":!0}),oe(I)!=="svelte-lfxbu2"&&(I.textContent=le),q=a(tt,"OPTION",{"data-svelte-h":!0}),oe(q)!=="svelte-1agbgc4"&&(q.textContent=he),tt.forEach(u),Te=k(Se),dt(T.$$.fragment,Se),st=k(Se),dt(Be.$$.fragment,Se),$e=k(Se),dt(He.$$.fragment,Se),Se.forEach(u),M=k(f),ae.l(f),y=yt(),this.h()},h(){_(n,"class","svelte-rlsnlr"),_(d,"class","info-label svelte-rlsnlr"),_(S,"class",p="status-badge "+(e[3].results_published?"status-completed":"status-judging")+" svelte-rlsnlr"),_(O,"class","info-value svelte-rlsnlr"),_(b,"class","info-item svelte-rlsnlr"),_(X,"class","info-label svelte-rlsnlr"),_(_e,"class","info-value svelte-rlsnlr"),_(J,"class","info-item svelte-rlsnlr"),_(Z,"class","info-label svelte-rlsnlr"),_(Q,"class","info-value svelte-rlsnlr"),_(K,"class","info-item svelte-rlsnlr"),_(Y,"class","info-label svelte-rlsnlr"),_(r,"class",R="info-value "+(e[8].size>0?"status-pending":"status-complete")+" svelte-rlsnlr"),_(Ae,"class","info-item svelte-rlsnlr"),_(m,"class","info-grid svelte-rlsnlr"),_(t,"class","competition-info svelte-rlsnlr"),_(L,"type","text"),_(L,"class","search-input svelte-rlsnlr"),_(L,"placeholder",re=e[10]?"Search by entry number, member, or beer name...":"Search by entry number or category..."),Pe.__value="all",ie(Pe,Pe.__value),_(H,"class","filter-select svelte-rlsnlr"),e[1]===void 0&&wt(()=>e[23].call(H)),be.__value="all",ie(be,be.__value),I.__value="pending",ie(I,I.__value),q.__value="complete",ie(q,q.__value),_(W,"class","filter-select svelte-rlsnlr"),e[2]===void 0&&wt(()=>e[24].call(W)),_($,"class","controls svelte-rlsnlr")},m(f,P){ge(f,t,P),l(t,n),l(n,i),l(t,C),l(t,m),l(m,b),l(b,d),l(b,c),l(b,O),l(O,S),l(S,U),l(m,z),l(m,J),l(J,X),l(J,Ie),l(J,_e),l(_e,Ne),l(m,je),l(m,K),l(K,Z),l(K,Fe),l(K,Q),l(Q,Ue),l(Q,Qe),l(Q,ye),l(Q,ne),l(Q,ke),l(Q,x),l(m,we),l(m,Ae),l(Ae,Y),l(Ae,ee),l(Ae,r),l(r,j),ge(f,V,P),ge(f,$,P),l($,L),ie(L,e[0]),l($,B),l($,H),l(H,Pe);for(let Oe=0;Oe<pe.length;Oe+=1)pe[Oe]&&pe[Oe].m(H,null);at(H,e[1],!0),l($,Xe),l($,W),l(W,be),l(W,I),l(W,q),at(W,e[2],!0),l($,Te),ft(T,$,null),l($,st),ft(Be,$,null),l($,$e),ft(He,$,null),ge(f,M,P),Je[Ce].m(f,P),ge(f,y,P),ve=!0,et||(ue=[Me(L,"input",e[22]),Me(H,"change",e[23]),Me(W,"change",e[24])],et=!0)},p(f,P){if((!ve||P[0]&8)&&s!==(s=f[3].name+"")&&G(i,s),(!ve||P[0]&8)&&h!==(h=f[3].results_published?"Results Published":"Judging In Progress")&&G(U,h),(!ve||P[0]&8&&p!==(p="status-badge "+(f[3].results_published?"status-completed":"status-judging")+" svelte-rlsnlr"))&&_(S,"class",p),(!ve||P[0]&512)&&Ee!==(Ee=f[9].total+"")&&G(Ne,Ee),(!ve||P[0]&512)&&fe!==(fe=f[9].completed+"")&&G(Ue,fe),(!ve||P[0]&512)&&de!==(de=f[9].total+"")&&G(ye,de),(!ve||P[0]&512)&&ze!==(ze=f[9].percentage+"")&&G(ke,ze),(!ve||P[0]&256)&&v!==(v=f[8].size+"")&&G(j,v),(!ve||P[0]&256&&R!==(R="info-value "+(f[8].size>0?"status-pending":"status-complete")+" svelte-rlsnlr"))&&_(r,"class",R),(!ve||P[0]&1024&&re!==(re=f[10]?"Search by entry number, member, or beer name...":"Search by entry number or category..."))&&_(L,"placeholder",re),P[0]&1&&L.value!==f[0]&&ie(L,f[0]),P[0]&32){se=ht(f[5]);let me;for(me=0;me<se.length;me+=1){const qe=Ot(f,se,me);pe[me]?pe[me].p(qe,P):(pe[me]=Rt(qe),pe[me].c(),pe[me].m(H,null))}for(;me<pe.length;me+=1)pe[me].d(1);pe.length=se.length}P[0]&34&&at(H,f[1]),P[0]&4&&at(W,f[2]);const Oe={};P[0]&384&&(Oe.disabled=f[7]||f[8].size===0),P[0]&384|P[1]&524288&&(Oe.$$scope={dirty:P,ctx:f}),T.$set(Oe);const ce={};P[0]&136&&(ce.disabled=f[7]||f[3].results_published),P[0]&8|P[1]&524288&&(ce.$$scope={dirty:P,ctx:f}),Be.$set(ce);const N={};P[1]&524288&&(N.$$scope={dirty:P,ctx:f}),He.$set(N);let Re=Ce;Ce=it(f),Ce===Re?Je[Ce].p(f,P):(Mt(),We(Je[Re],1,1,()=>{Je[Re]=null}),Ft(),ae=Je[Ce],ae?ae.p(f,P):(ae=Je[Ce]=ot[Ce](f),ae.c()),Ze(ae,1),ae.m(y.parentNode,y))},i(f){ve||(Ze(T.$$.fragment,f),Ze(Be.$$.fragment,f),Ze(He.$$.fragment,f),Ze(ae),ve=!0)},o(f){We(T.$$.fragment,f),We(Be.$$.fragment,f),We(He.$$.fragment,f),We(ae),ve=!1},d(f){f&&(u(t),u(V),u($),u(M),u(y)),jt(pe,f),_t(T),_t(Be),_t(He),Je[Ce].d(f),et=!1,Tt(ue)}}}function ll(e){let t,n;return t=new xt({props:{message:"Loading competition entries..."}}),{c(){pt(t.$$.fragment)},l(s){dt(t.$$.fragment,s)},m(s,i){ft(t,s,i),n=!0},p:Nt,i(s){n||(Ze(t.$$.fragment,s),n=!0)},o(s){We(t.$$.fragment,s),n=!1},d(s){_t(t,s)}}}function Rt(e){let t,n=e[47].label+"",s,i;return{c(){t=o("option"),s=D(n),this.h()},l(C){t=a(C,"OPTION",{});var m=g(t);s=A(m,n),m.forEach(u),this.h()},h(){t.__value=i=e[47].value,ie(t,t.__value)},m(C,m){ge(C,t,m),l(t,s)},p(C,m){m[0]&32&&n!==(n=C[47].label+"")&&G(s,n),m[0]&32&&i!==(i=C[47].value)&&(t.__value=i,ie(t,t.__value))},d(C){C&&u(t)}}}function sl(e){let t=e[7]?"Saving...":`Save All Results ${e[8].size>0?`(${e[8].size})`:""}`,n;return{c(){n=D(t)},l(s){n=A(s,t)},m(s,i){ge(s,n,i)},p(s,i){i[0]&384&&t!==(t=s[7]?"Saving...":`Save All Results ${s[8].size>0?`(${s[8].size})`:""}`)&&G(n,t)},d(s){s&&u(n)}}}function nl(e){let t=e[3].results_published?"Results Published":"Publish Results",n;return{c(){n=D(t)},l(s){n=A(s,t)},m(s,i){ge(s,n,i)},p(s,i){i[0]&8&&t!==(t=s[3].results_published?"Results Published":"Publish Results")&&G(n,t)},d(s){s&&u(n)}}}function rl(e){let t;return{c(){t=D("Back")},l(n){t=A(n,"Back")},m(n,s){ge(n,t,s)},d(n){n&&u(t)}}}function al(e){let t,n,s,i='<tr class="svelte-rlsnlr"><th class="svelte-rlsnlr">Entry #</th> <th class="svelte-rlsnlr">Member</th> <th class="svelte-rlsnlr">Beer Name</th> <th class="svelte-rlsnlr">Category</th> <th class="svelte-rlsnlr">Ranking Points</th> <th class="svelte-rlsnlr">Score</th> <th class="svelte-rlsnlr">Placement</th> <th class="svelte-rlsnlr">Status</th> <th class="svelte-rlsnlr">Actions</th></tr>',C,m,b,d,E=ht(e[4]),c=[];for(let h=0;h<E.length;h+=1)c[h]=Vt(It(e,E,h));let O=ht(e[4]),S=[];for(let h=0;h<O.length;h+=1)S[h]=qt(Dt(e,O,h));return{c(){t=o("div"),n=o("table"),s=o("thead"),s.innerHTML=i,C=w(),m=o("tbody");for(let h=0;h<c.length;h+=1)c[h].c();b=w(),d=o("div");for(let h=0;h<S.length;h+=1)S[h].c();this.h()},l(h){t=a(h,"DIV",{class:!0});var U=g(t);n=a(U,"TABLE",{class:!0});var p=g(n);s=a(p,"THEAD",{"data-svelte-h":!0}),oe(s)!=="svelte-104r26b"&&(s.innerHTML=i),C=k(p),m=a(p,"TBODY",{});var z=g(m);for(let X=0;X<c.length;X+=1)c[X].l(z);z.forEach(u),p.forEach(u),U.forEach(u),b=k(h),d=a(h,"DIV",{class:!0});var J=g(d);for(let X=0;X<S.length;X+=1)S[X].l(J);J.forEach(u),this.h()},h(){_(n,"class","svelte-rlsnlr"),_(t,"class","results-table svelte-rlsnlr"),_(d,"class","entry-cards svelte-rlsnlr")},m(h,U){ge(h,t,U),l(t,n),l(n,s),l(n,C),l(n,m);for(let p=0;p<c.length;p+=1)c[p]&&c[p].m(m,null);ge(h,b,U),ge(h,d,U);for(let p=0;p<S.length;p+=1)S[p]&&S[p].m(d,null)},p(h,U){if(U[0]&129424){E=ht(h[4]);let p;for(p=0;p<E.length;p+=1){const z=It(h,E,p);c[p]?c[p].p(z,U):(c[p]=Vt(z),c[p].c(),c[p].m(m,null))}for(;p<c.length;p+=1)c[p].d(1);c.length=E.length}if(U[0]&125328){O=ht(h[4]);let p;for(p=0;p<O.length;p+=1){const z=Dt(h,O,p);S[p]?S[p].p(z,U):(S[p]=qt(z),S[p].c(),S[p].m(d,null))}for(;p<S.length;p+=1)S[p].d(1);S.length=O.length}},i:Nt,o:Nt,d(h){h&&(u(t),u(b),u(d)),jt(c,h),jt(S,h)}}}function ol(e){let t,n;return t=new el({props:{icon:"ðŸ†",title:"No entries found",message:e[0]||e[1]!=="all"||e[2]!=="all"?"Try adjusting your search or filters":"No entries have been submitted yet"}}),{c(){pt(t.$$.fragment)},l(s){dt(t.$$.fragment,s)},m(s,i){ft(t,s,i),n=!0},p(s,i){const C={};i[0]&7&&(C.message=s[0]||s[1]!=="all"||s[2]!=="all"?"Try adjusting your search or filters":"No entries have been submitted yet"),t.$set(C)},i(s){n||(Ze(t.$$.fragment,s),n=!0)},o(s){We(t.$$.fragment,s),n=!1},d(s){_t(t,s)}}}function Lt(e){let t,n,s=e[42].judge_count+"",i,C,m=e[42].judge_count===1?"":"s",b;return{c(){t=o("br"),n=o("small"),i=D(s),C=D(" judge"),b=D(m),this.h()},l(d){t=a(d,"BR",{}),n=a(d,"SMALL",{style:!0});var E=g(n);i=A(E,s),C=A(E," judge"),b=A(E,m),E.forEach(u),this.h()},h(){F(n,"color","#666")},m(d,E){ge(d,t,E),ge(d,n,E),l(n,i),l(n,C),l(n,b)},p(d,E){E[0]&16&&s!==(s=d[42].judge_count+"")&&G(i,s),E[0]&16&&m!==(m=d[42].judge_count===1?"":"s")&&G(b,m)},d(d){d&&(u(t),u(n))}}}function zt(e){let t,n="*";return{c(){t=o("span"),t.textContent=n,this.h()},l(s){t=a(s,"SPAN",{class:!0,"data-svelte-h":!0}),oe(t)!=="svelte-1wkczod"&&(t.textContent=n),this.h()},h(){_(t,"class","unsaved-indicator svelte-rlsnlr")},m(s,i){ge(s,t,i)},d(s){s&&u(t)}}}function Vt(e){let t,n,s,i=e[42].entry_number+"",C,m,b,d,E=e[11](e[42].member_name)+"",c,O,S,h=e[12](e[42].member_email)+"",U,p,z,J=e[14](e[42].beer_name)+"",X,Ke,Ie,_e,Ee=e[42].category_display+"",Ne,je,K,Z,Le=e[42].ranking_points+"",Fe,Q,fe=e[42].ranking_points===1?"pt":"pts",Ue,Qe,de,ye,ne,ze,ke,x,we,Ae="No Placement",Y,Ve="1st Place",ee,r="2nd Place",v,j="3rd Place",R,V="Honorable Mention",$,L,re,B=e[42].has_results&&e[42].score?"âœ… Complete":"âŒ Pending",H,Pe,De,Xe=e[8].has(e[42].id),W,be,te,I=e[7]?"Saving...":"Save",le,q,he,Te,T=e[42].judge_count>0&&Lt(e);function st(){e[26].call(ne,e[45],e[46])}function Be(){return e[27](e[42])}function $e(){e[28].call(x,e[45],e[46])}function He(){return e[29](e[42])}let M=Xe&&zt();function Ce(){return e[30](e[42])}return{c(){t=o("tr"),n=o("td"),s=o("span"),C=D(i),m=w(),b=o("td"),d=o("div"),c=D(E),O=w(),S=o("small"),U=D(h),p=w(),z=o("td"),X=D(J),Ke=w(),Ie=o("td"),_e=o("span"),Ne=D(Ee),je=w(),K=o("td"),Z=o("span"),Fe=D(Le),Q=w(),Ue=D(fe),Qe=w(),T&&T.c(),de=w(),ye=o("td"),ne=o("input"),ze=w(),ke=o("td"),x=o("select"),we=o("option"),we.textContent=Ae,Y=o("option"),Y.textContent=Ve,ee=o("option"),ee.textContent=r,v=o("option"),v.textContent=j,R=o("option"),R.textContent=V,$=w(),L=o("td"),re=o("span"),H=D(B),De=w(),M&&M.c(),W=w(),be=o("td"),te=o("button"),le=D(I),q=w(),this.h()},l(ae){t=a(ae,"TR",{class:!0});var y=g(t);n=a(y,"TD",{class:!0});var ve=g(n);s=a(ve,"SPAN",{class:!0});var et=g(s);C=A(et,i),et.forEach(u),ve.forEach(u),m=k(y),b=a(y,"TD",{class:!0});var ue=g(b);d=a(ue,"DIV",{class:!0});var se=g(d);c=A(se,E),se.forEach(u),O=k(ue),S=a(ue,"SMALL",{class:!0});var pe=g(S);U=A(pe,h),pe.forEach(u),ue.forEach(u),p=k(y),z=a(y,"TD",{class:!0});var ot=g(z);X=A(ot,J),ot.forEach(u),Ke=k(y),Ie=a(y,"TD",{class:!0});var Je=g(Ie);_e=a(Je,"SPAN",{class:!0});var it=g(_e);Ne=A(it,Ee),it.forEach(u),Je.forEach(u),je=k(y),K=a(y,"TD",{class:!0});var f=g(K);Z=a(f,"SPAN",{style:!0});var P=g(Z);Fe=A(P,Le),Q=k(P),Ue=A(P,fe),P.forEach(u),Qe=k(f),T&&T.l(f),f.forEach(u),de=k(y),ye=a(y,"TD",{class:!0});var Oe=g(ye);ne=a(Oe,"INPUT",{type:!0,class:!0,placeholder:!0,min:!0,max:!0}),Oe.forEach(u),ze=k(y),ke=a(y,"TD",{class:!0});var ce=g(ke);x=a(ce,"SELECT",{class:!0});var N=g(x);we=a(N,"OPTION",{"data-svelte-h":!0}),oe(we)!=="svelte-1iye3wy"&&(we.textContent=Ae),Y=a(N,"OPTION",{"data-svelte-h":!0}),oe(Y)!=="svelte-kdlfio"&&(Y.textContent=Ve),ee=a(N,"OPTION",{"data-svelte-h":!0}),oe(ee)!=="svelte-144flmx"&&(ee.textContent=r),v=a(N,"OPTION",{"data-svelte-h":!0}),oe(v)!=="svelte-2ew3df"&&(v.textContent=j),R=a(N,"OPTION",{"data-svelte-h":!0}),oe(R)!=="svelte-gsof6j"&&(R.textContent=V),N.forEach(u),ce.forEach(u),$=k(y),L=a(y,"TD",{class:!0});var Re=g(L);re=a(Re,"SPAN",{class:!0});var me=g(re);H=A(me,B),me.forEach(u),De=k(Re),M&&M.l(Re),Re.forEach(u),W=k(y),be=a(y,"TD",{class:!0});var qe=g(be);te=a(qe,"BUTTON",{class:!0,style:!0});var Ge=g(te);le=A(Ge,I),Ge.forEach(u),qe.forEach(u),q=k(y),y.forEach(u),this.h()},h(){_(s,"class","entry-number svelte-rlsnlr"),_(n,"class","svelte-rlsnlr"),_(d,"class",lt(e[13]())+" svelte-rlsnlr"),_(S,"class",lt(e[13]())+" svelte-rlsnlr"),_(b,"class","svelte-rlsnlr"),_(z,"class",lt(e[13]())+" svelte-rlsnlr"),_(_e,"class","category-badge svelte-rlsnlr"),_(Ie,"class","svelte-rlsnlr"),F(Z,"font-weight","600"),F(Z,"color",e[42].ranking_points>0?"#059669":"#666"),_(K,"class","svelte-rlsnlr"),_(ne,"type","number"),_(ne,"class","score-input svelte-rlsnlr"),_(ne,"placeholder","0-50"),_(ne,"min","0"),_(ne,"max","50"),_(ye,"class","svelte-rlsnlr"),we.__value="",ie(we,we.__value),Y.__value="1",ie(Y,Y.__value),ee.__value="2",ie(ee,ee.__value),v.__value="3",ie(v,v.__value),R.__value="HM",ie(R,R.__value),_(x,"class","placement-select svelte-rlsnlr"),e[42].placement===void 0&&wt($e),_(ke,"class","svelte-rlsnlr"),_(re,"class",Pe=lt(e[42].has_results&&e[42].score?"status-complete":"status-pending")+" svelte-rlsnlr"),_(L,"class","svelte-rlsnlr"),_(te,"class","btn btn-primary"),F(te,"padding","0.4rem 0.8rem"),F(te,"font-size","0.85rem"),te.disabled=e[7],_(be,"class","svelte-rlsnlr"),_(t,"class","svelte-rlsnlr")},m(ae,y){ge(ae,t,y),l(t,n),l(n,s),l(s,C),l(t,m),l(t,b),l(b,d),l(d,c),l(b,O),l(b,S),l(S,U),l(t,p),l(t,z),l(z,X),l(t,Ke),l(t,Ie),l(Ie,_e),l(_e,Ne),l(t,je),l(t,K),l(K,Z),l(Z,Fe),l(Z,Q),l(Z,Ue),l(K,Qe),T&&T.m(K,null),l(t,de),l(t,ye),l(ye,ne),ie(ne,e[42].score),l(t,ze),l(t,ke),l(ke,x),l(x,we),l(x,Y),l(x,ee),l(x,v),l(x,R),at(x,e[42].placement,!0),l(t,$),l(t,L),l(L,re),l(re,H),l(L,De),M&&M.m(L,null),l(t,W),l(t,be),l(be,te),l(te,le),l(t,q),he||(Te=[Me(ne,"input",st),Me(ne,"input",Be),Me(x,"change",$e),Me(x,"change",He),Me(te,"click",Ce)],he=!0)},p(ae,y){e=ae,y[0]&16&&i!==(i=e[42].entry_number+"")&&G(C,i),y[0]&16&&E!==(E=e[11](e[42].member_name)+"")&&G(c,E),y[0]&16&&h!==(h=e[12](e[42].member_email)+"")&&G(U,h),y[0]&16&&J!==(J=e[14](e[42].beer_name)+"")&&G(X,J),y[0]&16&&Ee!==(Ee=e[42].category_display+"")&&G(Ne,Ee),y[0]&16&&Le!==(Le=e[42].ranking_points+"")&&G(Fe,Le),y[0]&16&&fe!==(fe=e[42].ranking_points===1?"pt":"pts")&&G(Ue,fe),y[0]&16&&F(Z,"color",e[42].ranking_points>0?"#059669":"#666"),e[42].judge_count>0?T?T.p(e,y):(T=Lt(e),T.c(),T.m(K,null)):T&&(T.d(1),T=null),y[0]&16&&kt(ne.value)!==e[42].score&&ie(ne,e[42].score),y[0]&16&&at(x,e[42].placement),y[0]&16&&B!==(B=e[42].has_results&&e[42].score?"âœ… Complete":"âŒ Pending")&&G(H,B),y[0]&16&&Pe!==(Pe=lt(e[42].has_results&&e[42].score?"status-complete":"status-pending")+" svelte-rlsnlr")&&_(re,"class",Pe),y[0]&272&&(Xe=e[8].has(e[42].id)),Xe?M||(M=zt(),M.c(),M.m(L,null)):M&&(M.d(1),M=null),y[0]&128&&I!==(I=e[7]?"Saving...":"Save")&&G(le,I),y[0]&128&&(te.disabled=e[7])},d(ae){ae&&u(t),T&&T.d(),M&&M.d(),he=!1,Tt(Te)}}}function Bt(e){let t,n="*";return{c(){t=o("span"),t.textContent=n,this.h()},l(s){t=a(s,"SPAN",{class:!0,"data-svelte-h":!0}),oe(t)!=="svelte-1wkczod"&&(t.textContent=n),this.h()},h(){_(t,"class","unsaved-indicator svelte-rlsnlr")},m(s,i){ge(s,t,i)},d(s){s&&u(t)}}}function Ht(e){let t,n,s=e[42].judge_count+"",i,C,m=e[42].judge_count===1?"":"s",b,d;return{c(){t=o("span"),n=D("("),i=D(s),C=D(" judge"),b=D(m),d=D(")"),this.h()},l(E){t=a(E,"SPAN",{style:!0});var c=g(t);n=A(c,"("),i=A(c,s),C=A(c," judge"),b=A(c,m),d=A(c,")"),c.forEach(u),this.h()},h(){F(t,"font-size","0.875rem"),F(t,"color","#666")},m(E,c){ge(E,t,c),l(t,n),l(t,i),l(t,C),l(t,b),l(t,d)},p(E,c){c[0]&16&&s!==(s=E[42].judge_count+"")&&G(i,s),c[0]&16&&m!==(m=E[42].judge_count===1?"":"s")&&G(b,m)},d(E){E&&u(t)}}}function qt(e){let t,n,s,i,C=e[42].entry_number+"",m,b,d,E=e[42].has_results&&e[42].score?"âœ… Complete":"âŒ Pending",c,O,S=e[8].has(e[42].id),h,U,p,z,J,X=e[11](e[42].member_name)+"",Ke,Ie,_e,Ee=e[14](e[42].beer_name)+"",Ne,je,K,Z=e[42].category_display+"",Le,Fe,Q,fe,Ue="Ranking Points:",Qe,de,ye=e[42].ranking_points+"",ne,ze,ke=e[42].ranking_points===1?"pt":"pts",x,we,Ae,Y,Ve,ee,r="Score (0-50)",v,j,R,V,$,L="Placement",re,B,H,Pe="No Placement",De,Xe="1st Place",W,be="2nd Place",te,I="3rd Place",le,q="Honorable Mention",he,Te,T,st="Judge Notes",Be,$e,He,M,Ce=e[7]?"Saving Results...":"Save Results",ae,y,ve,et,ue=S&&Bt(),se=e[42].judge_count>0&&Ht(e);function pe(){e[31].call(j,e[43],e[44])}function ot(){return e[32](e[42])}function Je(){e[33].call(B,e[43],e[44])}function it(){return e[34](e[42])}function f(){e[35].call($e,e[43],e[44])}function P(){return e[36](e[42])}function Oe(){return e[37](e[42])}return{c(){t=o("div"),n=o("div"),s=o("span"),i=D("Entry #"),m=D(C),b=w(),d=o("span"),c=D(E),O=w(),ue&&ue.c(),U=w(),p=o("div"),z=o("div"),J=o("strong"),Ke=D(X),Ie=w(),_e=o("div"),Ne=D(Ee),je=w(),K=o("span"),Le=D(Z),Fe=w(),Q=o("div"),fe=o("span"),fe.textContent=Ue,Qe=w(),de=o("span"),ne=D(ye),ze=w(),x=D(ke),we=w(),se&&se.c(),Ae=w(),Y=o("div"),Ve=o("div"),ee=o("label"),ee.textContent=r,v=w(),j=o("input"),R=w(),V=o("div"),$=o("label"),$.textContent=L,re=w(),B=o("select"),H=o("option"),H.textContent=Pe,De=o("option"),De.textContent=Xe,W=o("option"),W.textContent=be,te=o("option"),te.textContent=I,le=o("option"),le.textContent=q,he=w(),Te=o("div"),T=o("label"),T.textContent=st,Be=w(),$e=o("textarea"),He=w(),M=o("button"),ae=D(Ce),y=w(),this.h()},l(ce){t=a(ce,"DIV",{class:!0});var N=g(t);n=a(N,"DIV",{class:!0});var Re=g(n);s=a(Re,"SPAN",{class:!0});var me=g(s);i=A(me,"Entry #"),m=A(me,C),me.forEach(u),b=k(Re),d=a(Re,"SPAN",{class:!0});var qe=g(d);c=A(qe,E),O=k(qe),ue&&ue.l(qe),qe.forEach(u),Re.forEach(u),U=k(N),p=a(N,"DIV",{style:!0});var Ge=g(p);z=a(Ge,"DIV",{class:!0});var ut=g(z);J=a(ut,"STRONG",{});var xe=g(J);Ke=A(xe,X),xe.forEach(u),ut.forEach(u),Ie=k(Ge),_e=a(Ge,"DIV",{class:!0});var ct=g(_e);Ne=A(ct,Ee),ct.forEach(u),je=k(Ge),K=a(Ge,"SPAN",{class:!0});var vt=g(K);Le=A(vt,Z),vt.forEach(u),Fe=k(Ge),Q=a(Ge,"DIV",{style:!0});var Se=g(Q);fe=a(Se,"SPAN",{style:!0,"data-svelte-h":!0}),oe(fe)!=="svelte-1jj2zsm"&&(fe.textContent=Ue),Qe=k(Se),de=a(Se,"SPAN",{style:!0});var nt=g(de);ne=A(nt,ye),ze=k(nt),x=A(nt,ke),nt.forEach(u),we=k(Se),se&&se.l(Se),Se.forEach(u),Ge.forEach(u),Ae=k(N),Y=a(N,"DIV",{class:!0});var tt=g(Y);Ve=a(tt,"DIV",{});var rt=g(Ve);ee=a(rt,"LABEL",{style:!0,"data-svelte-h":!0}),oe(ee)!=="svelte-1onvleo"&&(ee.textContent=r),v=k(rt),j=a(rt,"INPUT",{type:!0,class:!0,placeholder:!0,min:!0,max:!0,style:!0}),rt.forEach(u),R=k(tt),V=a(tt,"DIV",{});var gt=g(V);$=a(gt,"LABEL",{style:!0,"data-svelte-h":!0}),oe($)!=="svelte-pbus9m"&&($.textContent=L),re=k(gt),B=a(gt,"SELECT",{class:!0,style:!0});var mt=g(B);H=a(mt,"OPTION",{"data-svelte-h":!0}),oe(H)!=="svelte-1iye3wy"&&(H.textContent=Pe),De=a(mt,"OPTION",{"data-svelte-h":!0}),oe(De)!=="svelte-kdlfio"&&(De.textContent=Xe),W=a(mt,"OPTION",{"data-svelte-h":!0}),oe(W)!=="svelte-144flmx"&&(W.textContent=be),te=a(mt,"OPTION",{"data-svelte-h":!0}),oe(te)!=="svelte-2ew3df"&&(te.textContent=I),le=a(mt,"OPTION",{"data-svelte-h":!0}),oe(le)!=="svelte-gsof6j"&&(le.textContent=q),mt.forEach(u),gt.forEach(u),tt.forEach(u),he=k(N),Te=a(N,"DIV",{style:!0});var bt=g(Te);T=a(bt,"LABEL",{style:!0,"data-svelte-h":!0}),oe(T)!=="svelte-za5z0z"&&(T.textContent=st),Be=k(bt),$e=a(bt,"TEXTAREA",{class:!0,placeholder:!0}),g($e).forEach(u),bt.forEach(u),He=k(N),M=a(N,"BUTTON",{class:!0,style:!0});var $t=g(M);ae=A($t,Ce),$t.forEach(u),y=k(N),N.forEach(u),this.h()},h(){_(s,"class","entry-number svelte-rlsnlr"),_(d,"class",h=lt(e[42].has_results&&e[42].score?"status-complete":"status-pending")+" svelte-rlsnlr"),_(n,"class","entry-header svelte-rlsnlr"),_(z,"class",lt(e[13]())+" svelte-rlsnlr"),_(_e,"class",lt(e[13]())+" svelte-rlsnlr"),_(K,"class","category-badge svelte-rlsnlr"),F(fe,"font-size","0.875rem"),F(fe,"color","#666"),F(de,"font-weight","600"),F(de,"color",e[42].ranking_points>0?"#059669":"#666"),F(Q,"margin-top","0.5rem"),F(p,"margin-bottom","1rem"),F(ee,"display","block"),F(ee,"font-size","0.875rem"),F(ee,"margin-bottom","0.25rem"),F(ee,"color","#666"),_(j,"type","number"),_(j,"class","score-input svelte-rlsnlr"),_(j,"placeholder","Enter score"),_(j,"min","0"),_(j,"max","50"),F(j,"width","100%"),F($,"display","block"),F($,"font-size","0.875rem"),F($,"margin-bottom","0.25rem"),F($,"color","#666"),H.__value="",ie(H,H.__value),De.__value="1",ie(De,De.__value),W.__value="2",ie(W,W.__value),te.__value="3",ie(te,te.__value),le.__value="HM",ie(le,le.__value),_(B,"class","placement-select svelte-rlsnlr"),F(B,"width","100%"),e[42].placement===void 0&&wt(Je),_(Y,"class","results-inputs svelte-rlsnlr"),F(T,"display","block"),F(T,"font-size","0.875rem"),F(T,"margin-bottom","0.25rem"),F(T,"color","#666"),_($e,"class","notes-input svelte-rlsnlr"),_($e,"placeholder","Optional judging notes..."),F(Te,"margin-top","1rem"),_(M,"class","btn btn-primary"),F(M,"margin-top","1rem"),F(M,"width","100%"),M.disabled=e[7],_(t,"class","entry-card svelte-rlsnlr")},m(ce,N){ge(ce,t,N),l(t,n),l(n,s),l(s,i),l(s,m),l(n,b),l(n,d),l(d,c),l(d,O),ue&&ue.m(d,null),l(t,U),l(t,p),l(p,z),l(z,J),l(J,Ke),l(p,Ie),l(p,_e),l(_e,Ne),l(p,je),l(p,K),l(K,Le),l(p,Fe),l(p,Q),l(Q,fe),l(Q,Qe),l(Q,de),l(de,ne),l(de,ze),l(de,x),l(Q,we),se&&se.m(Q,null),l(t,Ae),l(t,Y),l(Y,Ve),l(Ve,ee),l(Ve,v),l(Ve,j),ie(j,e[42].score),l(Y,R),l(Y,V),l(V,$),l(V,re),l(V,B),l(B,H),l(B,De),l(B,W),l(B,te),l(B,le),at(B,e[42].placement,!0),l(t,he),l(t,Te),l(Te,T),l(Te,Be),l(Te,$e),ie($e,e[42].judge_notes),l(t,He),l(t,M),l(M,ae),l(t,y),ve||(et=[Me(j,"input",pe),Me(j,"input",ot),Me(B,"change",Je),Me(B,"change",it),Me($e,"input",f),Me($e,"input",P),Me(M,"click",Oe)],ve=!0)},p(ce,N){e=ce,N[0]&16&&C!==(C=e[42].entry_number+"")&&G(m,C),N[0]&16&&E!==(E=e[42].has_results&&e[42].score?"âœ… Complete":"âŒ Pending")&&G(c,E),N[0]&272&&(S=e[8].has(e[42].id)),S?ue||(ue=Bt(),ue.c(),ue.m(d,null)):ue&&(ue.d(1),ue=null),N[0]&16&&h!==(h=lt(e[42].has_results&&e[42].score?"status-complete":"status-pending")+" svelte-rlsnlr")&&_(d,"class",h),N[0]&16&&X!==(X=e[11](e[42].member_name)+"")&&G(Ke,X),N[0]&16&&Ee!==(Ee=e[14](e[42].beer_name)+"")&&G(Ne,Ee),N[0]&16&&Z!==(Z=e[42].category_display+"")&&G(Le,Z),N[0]&16&&ye!==(ye=e[42].ranking_points+"")&&G(ne,ye),N[0]&16&&ke!==(ke=e[42].ranking_points===1?"pt":"pts")&&G(x,ke),N[0]&16&&F(de,"color",e[42].ranking_points>0?"#059669":"#666"),e[42].judge_count>0?se?se.p(e,N):(se=Ht(e),se.c(),se.m(Q,null)):se&&(se.d(1),se=null),N[0]&16&&kt(j.value)!==e[42].score&&ie(j,e[42].score),N[0]&16&&at(B,e[42].placement),N[0]&16&&ie($e,e[42].judge_notes),N[0]&128&&Ce!==(Ce=e[7]?"Saving Results...":"Save Results")&&G(ae,Ce),N[0]&128&&(M.disabled=e[7])},d(ce){ce&&u(t),ue&&ue.d(),se&&se.d(),ve=!1,Tt(et)}}}function il(e){let t,n,s,i,C,m;t=new Wt({props:{title:"Enter Results",subtitle:"Record judging scores and placements",icon:"ðŸ†",center:!0}});const b=[ll,tl],d=[];function E(c,O){return c[6]?0:c[3]?1:-1}return~(s=E(e))&&(i=d[s]=b[s](e)),{c(){pt(t.$$.fragment),n=w(),i&&i.c(),C=yt()},l(c){dt(t.$$.fragment,c),n=k(c),i&&i.l(c),C=yt()},m(c,O){ft(t,c,O),ge(c,n,O),~s&&d[s].m(c,O),ge(c,C,O),m=!0},p(c,O){let S=s;s=E(c),s===S?~s&&d[s].p(c,O):(i&&(Mt(),We(d[S],1,1,()=>{d[S]=null}),Ft()),~s?(i=d[s],i?i.p(c,O):(i=d[s]=b[s](c),i.c()),Ze(i,1),i.m(C.parentNode,C)):i=null)},i(c){m||(Ze(t.$$.fragment,c),Ze(i),m=!0)},o(c){We(t.$$.fragment,c),We(i),m=!1},d(c){c&&(u(n),u(C)),_t(t,c),~s&&d[s].d(c)}}}function ul(e){let t,n;return t=new Zt({props:{size:"xl",$$slots:{default:[il]},$$scope:{ctx:e}}}),{c(){pt(t.$$.fragment)},l(s){dt(t.$$.fragment,s)},m(s,i){ft(t,s,i),n=!0},p(s,i){const C={};i[0]&2047|i[1]&524288&&(C.$$scope={dirty:i,ctx:s}),t.$set(C)},i(s){n||(Ze(t.$$.fragment,s),n=!0)},o(s){We(t.$$.fragment,s),n=!1},d(s){_t(t,s)}}}function cl(e){switch(e){case 1:return 3;case 2:return 2;case 3:return 1;default:return 0}}function _l(e,t,n,s){let i=[],C=null;for(const b of s){let d;try{d=Array.isArray(b.bjcp_category_ids)?b.bjcp_category_ids:JSON.parse(b.bjcp_category_ids)}catch{console.warn("Failed to parse bjcp_category_ids for group:",b.id);continue}if(d.includes(t)){C=b.id;break}}return C?i=n.filter(b=>b.entry_id===e&&b.ranking_group_id===C):i=n.filter(b=>b.entry_id===e&&b.bjcp_category_id===t),{totalPoints:i.reduce((b,d)=>b+cl(d.rank_position),0),judgeCount:i.length,rankings:i}}function Et(e,t="info"){const n=document.createElement("div");n.textContent=e,n.style.cssText=`
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 1rem 1.5rem;
      border-radius: 6px;
      color: white;
      font-weight: 500;
      z-index: 1000;
      background: ${t==="success"?"#059669":t==="error"?"#dc2626":"#6b7280"};
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    `,document.body.appendChild(n),setTimeout(()=>{document.body.removeChild(n)},3e3)}function fl(e,t,n){let s,i,C,m,b;At(e,Yt,r=>n(20,m=r)),At(e,Xt,r=>n(21,b=r));let d=null,E=[],c=[],O=[],S=!0,h=!1,U="",p="all",z="all",J=new Set;function X(r){return i?r||"Unknown":"Hidden"}function Ke(r){return i?r||"":"Hidden"}function Ie(){return i?"":"brewer-name-hidden"}function _e(r){return i?r||"Unknown Beer":"Hidden"}Jt(()=>{Ee()}),Gt(()=>{});async function Ee(){n(6,S=!0);try{const{data:r,error:v}=await Ye.from("competitions").select("*").eq("id",s).single();if(v)throw v;n(3,d=r);const{data:j,error:R}=await Ye.from("competition_entries").select("*").eq("competition_id",s).order("entry_number");if(R)throw R;if(!j||j.length===0){n(19,E=[]),n(4,c=[]),n(6,S=!1);return}const V=[...new Set(j.map(I=>I.member_id))],{data:$}=await Ye.from("members").select("id, name, email").in("id",V),L=[...new Set(j.map(I=>I.bjcp_category_id).filter(Boolean))],{data:re}=await Ye.from("bjcp_categories").select("id, category_name, category_number, subcategory_letter, subcategory_name").in("id",L),{data:B,error:H}=await Ye.from("competition_results").select("*").eq("competition_id",s);H&&console.warn("No existing results found:",H);const{data:Pe,error:De}=await Ye.from("competition_rankings").select(`
          *,
          entry:competition_entries!inner(id, entry_number, beer_name),
          judge:members!competition_rankings_judge_id_fkey(id, name),
          category:bjcp_categories(category_name, category_number, subcategory_letter),
          ranking_group:competition_ranking_groups(id, group_name, group_description)
        `).eq("competition_id",s).order("bjcp_category_id").order("rank_position"),Xe=Pe||[],{data:W,error:be}=await Ye.from("competition_ranking_groups").select("*").eq("competition_id",s).order("group_order"),te=W||[];n(19,E=j.map(I=>{const le=$==null?void 0:$.find(T=>T.id===I.member_id),q=re==null?void 0:re.find(T=>T.id===I.bjcp_category_id),he=B==null?void 0:B.find(T=>T.entry_id===I.id),Te=_l(I.id,I.bjcp_category_id,Xe,te);return{...I,member_name:(le==null?void 0:le.name)||"Unknown",member_email:(le==null?void 0:le.email)||"",category_name:(q==null?void 0:q.category_name)||"Unknown Category",category_number:(q==null?void 0:q.category_number)||"",subcategory_letter:(q==null?void 0:q.subcategory_letter)||"",subcategory_name:(q==null?void 0:q.subcategory_name)||"",category_display:q?`${q.category_number}${q.subcategory_letter||""} - ${q.category_name}`:"Unknown Category",score:(he==null?void 0:he.score)||"",placement:(he==null?void 0:he.placement)||"",judge_notes:(he==null?void 0:he.judge_notes)||"",has_results:!!he,ranking_points:Te.totalPoints,judge_count:Te.judgeCount}})),n(5,O=[...new Set(E.map(I=>({value:`${I.category_number}${I.subcategory_letter}`,label:I.category_display}))).values()].sort((I,le)=>I.value.localeCompare(le.value))),Ne()}catch(r){console.error("Error loading data:",r),alert("Failed to load competition entries"),Pt("/officers/manage-competitions")}finally{n(6,S=!1)}}function Ne(){let r=[...E];if(U.trim()){const v=U.toLowerCase(),j=m,R=(j==null?void 0:j.role)==="competition_director";r=r.filter(V=>{var $,L,re,B,H;return(($=V.entry_number)==null?void 0:$.toLowerCase().includes(v))||((L=V.category_display)==null?void 0:L.toLowerCase().includes(v))||R&&(((re=V.member_name)==null?void 0:re.toLowerCase().includes(v))||((B=V.member_email)==null?void 0:B.toLowerCase().includes(v))||((H=V.beer_name)==null?void 0:H.toLowerCase().includes(v)))})}p!=="all"&&(r=r.filter(v=>`${v.category_number}${v.subcategory_letter}`===p)),z!=="all"&&(z==="complete"?r=r.filter(v=>v.has_results&&v.score):z==="pending"&&(r=r.filter(v=>!v.has_results||!v.score))),n(4,c=r)}function je(r,v,j){const R=E.find(V=>V.id===r);R&&(R[v]=j,J.add(r),n(8,J),R.has_results=R.score&&R.score>0,Ne())}async function K(r,v=!1){const j=E.find(V=>V.id===r);if(!j)throw new Error(`Entry with ID ${r} not found`);const R=v;R||n(7,h=!0);try{const V={competition_id:s,entry_id:r,score:j.score||null,placement:j.placement||null,judge_notes:j.judge_notes||null,updated_at:new Date().toISOString()},{data:$}=await Ye.from("competition_results").select("id").eq("competition_id",s).eq("entry_id",r).single();let L;if($?L=(await Ye.from("competition_results").update(V).eq("id",$.id)).error:L=(await Ye.from("competition_results").insert([V])).error,L)throw L;J.delete(r),n(8,J),j.has_results=!0,v||Et("Results saved successfully","success")}catch(V){throw console.error("Error saving results:",V),v||alert("Failed to save results"),V}finally{R||n(7,h=!1)}}async function Z(){if(J.size===0){alert("No unsaved changes to save");return}try{n(7,h=!0);let r=0,v=0;for(const j of Array.from(J))try{await K(j,!0),r++}catch(R){console.error(`Error saving entry ${j}:`,R),v++}v===0?Et(`All ${r} results saved successfully`,"success"):Et(`${r} results saved, ${v} failed`,v>r?"error":"success")}catch(r){console.error("Error saving all results:",r),alert("Failed to save all results")}finally{n(7,h=!1)}}async function Le(){if(confirm("Are you sure you want to publish these results? This will make them visible to all members."))try{n(7,h=!0);const{error:r}=await Ye.from("competitions").update({results_published:!0,updated_at:new Date().toISOString()}).eq("id",s);if(r)throw r;n(3,d.results_published=!0,d),Et("Results published successfully","success")}catch(r){console.error("Error publishing results:",r),alert("Failed to publish results")}finally{n(7,h=!1)}}function Fe(){U=this.value,n(0,U)}function Q(){p=Ct(this),n(1,p),n(5,O)}function fe(){z=Ct(this),n(2,z)}const Ue=()=>Pt("/officers/manage-competitions");function Qe(r,v){r[v].score=kt(this.value),n(4,c)}const de=r=>je(r.id,"score",r.score);function ye(r,v){r[v].placement=Ct(this),n(4,c)}const ne=r=>je(r.id,"placement",r.placement),ze=r=>K(r.id);function ke(r,v){r[v].score=kt(this.value),n(4,c)}const x=r=>je(r.id,"score",r.score);function we(r,v){r[v].placement=Ct(this),n(4,c)}const Ae=r=>je(r.id,"placement",r.placement);function Y(r,v){r[v].judge_notes=this.value,n(4,c)}const Ve=r=>je(r.id,"judge_notes",r.judge_notes),ee=r=>K(r.id);return e.$$.update=()=>{e.$$.dirty[0]&1048576&&m&&!m.is_officer&&Pt("/"),e.$$.dirty[0]&2097152&&(s=b.params.id),e.$$.dirty[0]&1048576&&n(10,i=(m==null?void 0:m.role)==="competition_director"),e.$$.dirty[0]&524288&&n(9,C={total:E.length,completed:E.filter(r=>r.has_results&&r.score).length,get percentage(){return this.total>0?Math.round(this.completed/this.total*100):0}}),e.$$.dirty[0]&7&&Ne()},[U,p,z,d,c,O,S,h,J,C,i,X,Ke,Ie,_e,je,K,Z,Le,E,m,b,Fe,Q,fe,Ue,Qe,de,ye,ne,ze,ke,x,we,Ae,Y,Ve,ee]}class Pl extends Kt{constructor(t){super(),Qt(this,t,fl,ul,Ut,{},null,[-1,-1])}}export{Pl as component};
