import{s as Me,n as ge,d as u,i as T,b as r,q as _,c as h,e as C,E as Y,g as P,h as v,j as B,k as he,C as Re,L as De,r as Se,a as x,w as ie,f as M,G as we,t as R,M as de,F as Ge,H as me,I as ue,J as Te}from"../chunks/Clc9C5PT.js";import{e as je}from"../chunks/CERxzA5o.js";import{S as He,i as Fe}from"../chunks/D83E1sq8.js";import{g as Ee}from"../chunks/-d-XqP67.js";import{p as qe}from"../chunks/DYjnv9o3.js";import{u as Xe}from"../chunks/BZKsMI7B.js";import{c as be,J as ae,j as Ke,d as Qe,e as We}from"../chunks/C1YXK-ZI.js";import{s as Ce}from"../chunks/CCM_4jRA.js";function Ae(s,e,t){const l=s.slice();return l[26]=e[t],l}function Le(s,e,t){const l=s.slice();return l[29]=e[t],l}function Ye(s){let e,t,l=s[0].name+"",i,a,n,o,g=s[0].results_published?"Results Published":new Date>new Date(s[0].entry_deadline)?"Judging Phase":"Entry Phase",c,b,q,J,E,A=s[5]?"Cancel":"Add Judge",N,y,te,O,H,Q=s[4]?"Refreshing...":"Refresh Judges",p,X,K,se="Back to Competitions",D,j,k,L,m,I=s[7].length+"",$,Z,W,ee,oe,ne,le,G,d=s[0].competition_type==="intraclub"&&s[1].length>0&&Ie(s);function U(f,z){return f[8]?et:f[7].length===0?$e:xe}let w=U(s),F=w(s),V=s[5]&&Be(s),S=s[9]&&Oe(s);return{c(){e=v("div"),t=v("h2"),i=R(l),a=B(),n=v("p"),o=v("span"),c=R(g),q=B(),J=v("div"),E=v("button"),N=R(A),te=B(),d&&d.c(),O=B(),H=v("button"),p=R(Q),X=B(),K=v("button"),K.textContent=se,D=B(),j=v("div"),k=v("div"),L=v("h3"),m=R("Assigned Judges ("),$=R(I),Z=R(")"),W=B(),F.c(),ee=B(),V&&V.c(),oe=B(),S&&S.c(),ne=we(),this.h()},l(f){e=h(f,"DIV",{class:!0});var z=C(e);t=h(z,"H2",{class:!0});var _e=C(t);i=M(_e,l),_e.forEach(u),a=P(z),n=h(z,"P",{});var ce=C(n);o=h(ce,"SPAN",{class:!0});var Je=C(o);c=M(Je,g),Je.forEach(u),ce.forEach(u),z.forEach(u),q=P(f),J=h(f,"DIV",{class:!0});var re=C(J);E=h(re,"BUTTON",{class:!0});var ke=C(E);N=M(ke,A),ke.forEach(u),te=P(re),d&&d.l(re),O=P(re),H=h(re,"BUTTON",{class:!0,title:!0});var ze=C(H);p=M(ze,Q),ze.forEach(u),X=P(re),K=h(re,"BUTTON",{class:!0,"data-svelte-h":!0}),Y(K)!=="svelte-mqek4b"&&(K.textContent=se),re.forEach(u),D=P(f),j=h(f,"DIV",{class:!0});var fe=C(j);k=h(fe,"DIV",{class:!0});var ye=C(k);L=h(ye,"H3",{});var ve=C(L);m=M(ve,"Assigned Judges ("),$=M(ve,I),Z=M(ve,")"),ve.forEach(u),ye.forEach(u),W=P(fe),F.l(fe),ee=P(fe),V&&V.l(fe),fe.forEach(u),oe=P(f),S&&S.l(f),ne=we(),this.h()},h(){_(t,"class","svelte-1igi6bz"),_(o,"class",b="status-badge "+Ve(s[0])+" svelte-1igi6bz"),_(e,"class","competition-info svelte-1igi6bz"),_(E,"class","btn btn-success svelte-1igi6bz"),E.disabled=y=s[1].length===0,_(H,"class","btn btn-secondary svelte-1igi6bz"),H.disabled=s[4],_(H,"title","Refresh the list of available judges"),_(K,"class","btn btn-secondary svelte-1igi6bz"),_(J,"class","controls svelte-1igi6bz"),_(k,"class","section-header svelte-1igi6bz"),_(j,"class","judges-section svelte-1igi6bz")},m(f,z){T(f,e,z),r(e,t),r(t,i),r(e,a),r(e,n),r(n,o),r(o,c),T(f,q,z),T(f,J,z),r(J,E),r(E,N),r(J,te),d&&d.m(J,null),r(J,O),r(J,H),r(H,p),r(J,X),r(J,K),T(f,D,z),T(f,j,z),r(j,k),r(k,L),r(L,m),r(L,$),r(L,Z),r(j,W),F.m(j,null),r(j,ee),V&&V.m(j,null),T(f,oe,z),S&&S.m(f,z),T(f,ne,z),le||(G=[ie(E,"click",s[17]),ie(H,"click",s[13]),ie(K,"click",s[18])],le=!0)},p(f,z){z[0]&1&&l!==(l=f[0].name+"")&&x(i,l),z[0]&1&&g!==(g=f[0].results_published?"Results Published":new Date>new Date(f[0].entry_deadline)?"Judging Phase":"Entry Phase")&&x(c,g),z[0]&1&&b!==(b="status-badge "+Ve(f[0])+" svelte-1igi6bz")&&_(o,"class",b),z[0]&32&&A!==(A=f[5]?"Cancel":"Add Judge")&&x(N,A),z[0]&2&&y!==(y=f[1].length===0)&&(E.disabled=y),f[0].competition_type==="intraclub"&&f[1].length>0?d?d.p(f,z):(d=Ie(f),d.c(),d.m(J,O)):d&&(d.d(1),d=null),z[0]&16&&Q!==(Q=f[4]?"Refreshing...":"Refresh Judges")&&x(p,Q),z[0]&16&&(H.disabled=f[4]),z[0]&128&&I!==(I=f[7].length+"")&&x($,I),w===(w=U(f))&&F?F.p(f,z):(F.d(1),F=w(f),F&&(F.c(),F.m(j,ee))),f[5]?V?V.p(f,z):(V=Be(f),V.c(),V.m(j,null)):V&&(V.d(1),V=null),f[9]?S?S.p(f,z):(S=Oe(f),S.c(),S.m(ne.parentNode,ne)):S&&(S.d(1),S=null)},d(f){f&&(u(e),u(q),u(J),u(D),u(j),u(oe),u(ne)),d&&d.d(),F.d(),V&&V.d(),S&&S.d(f),le=!1,Se(G)}}}function Ze(s){let e,t='<div class="spinner svelte-1igi6bz"></div> <p>Loading competition data...</p>';return{c(){e=v("div"),e.innerHTML=t,this.h()},l(l){e=h(l,"DIV",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-1rk86ga"&&(e.innerHTML=t),this.h()},h(){_(e,"class","loading svelte-1igi6bz")},m(l,i){T(l,e,i)},p:ge,d(l){l&&u(e)}}}function Ie(s){let e,t=s[3]?"Assigning...":`Assign All Members (${s[1].length})`,l,i,a;return{c(){e=v("button"),l=R(t),this.h()},l(n){e=h(n,"BUTTON",{class:!0});var o=C(e);l=M(o,t),o.forEach(u),this.h()},h(){_(e,"class","btn btn-primary svelte-1igi6bz"),e.disabled=s[3]},m(n,o){T(n,e,o),r(e,l),i||(a=ie(e,"click",s[12]),i=!0)},p(n,o){o[0]&10&&t!==(t=n[3]?"Assigning...":`Assign All Members (${n[1].length})`)&&x(l,t),o[0]&8&&(e.disabled=n[3])},d(n){n&&u(e),i=!1,a()}}}function xe(s){let e,t=je(s[7]),l=[];for(let i=0;i<t.length;i+=1)l[i]=Pe(Le(s,t,i));return{c(){e=v("div");for(let i=0;i<l.length;i+=1)l[i].c();this.h()},l(i){e=h(i,"DIV",{class:!0});var a=C(e);for(let n=0;n<l.length;n+=1)l[n].l(a);a.forEach(u),this.h()},h(){_(e,"class","judges-list svelte-1igi6bz")},m(i,a){T(i,e,a);for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(e,null)},p(i,a){if(a[0]&18560){t=je(i[7]);let n;for(n=0;n<t.length;n+=1){const o=Le(i,t,n);l[n]?l[n].p(o,a):(l[n]=Pe(o),l[n].c(),l[n].m(e,null))}for(;n<l.length;n+=1)l[n].d(1);l.length=t.length}},d(i){i&&u(e),Ge(l,i)}}}function $e(s){let e,t="<h4>No judges assigned yet</h4> <p>Add judges to start the judging process</p>";return{c(){e=v("div"),e.innerHTML=t,this.h()},l(l){e=h(l,"DIV",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-23c6id"&&(e.innerHTML=t),this.h()},h(){_(e,"class","empty-state svelte-1igi6bz")},m(l,i){T(l,e,i)},p:ge,d(l){l&&u(e)}}}function et(s){let e,t='<div class="spinner svelte-1igi6bz"></div> <p>Loading judges...</p>';return{c(){e=v("div"),e.innerHTML=t,this.h()},l(l){e=h(l,"DIV",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-15kyil9"&&(e.innerHTML=t),this.h()},h(){_(e,"class","loading svelte-1igi6bz")},m(l,i){T(l,e,i)},p:ge,d(l){l&&u(e)}}}function Ue(s){let e,t=s[29].assignment_notes+"",l;return{c(){e=v("p"),l=R(t),this.h()},l(i){e=h(i,"P",{style:!0,class:!0});var a=C(e);l=M(a,t),a.forEach(u),this.h()},h(){de(e,"margin-top","0.5rem"),de(e,"font-style","italic"),_(e,"class","svelte-1igi6bz")},m(i,a){T(i,e,a),r(e,l)},p(i,a){a[0]&128&&t!==(t=i[29].assignment_notes+"")&&x(l,t)},d(i){i&&u(e)}}}function Pe(s){var K,se;let e,t,l,i=(((K=s[29].judge)==null?void 0:K.name)||"Unknown Judge")+"",a,n,o,g=((se=s[29].judge)==null?void 0:se.email)+"",c,b,q,J=s[14](s[29].judge_role)+"",E,A,N,y,te="Remove",O,H,Q,p=s[29].assignment_notes&&Ue(s);function X(){return s[19](s[29])}return{c(){e=v("div"),t=v("div"),l=v("h4"),a=R(i),n=B(),o=v("p"),c=R(g),b=B(),q=v("span"),E=R(J),A=B(),p&&p.c(),N=B(),y=v("button"),y.textContent=te,O=B(),this.h()},l(D){e=h(D,"DIV",{class:!0});var j=C(e);t=h(j,"DIV",{class:!0});var k=C(t);l=h(k,"H4",{class:!0});var L=C(l);a=M(L,i),L.forEach(u),n=P(k),o=h(k,"P",{class:!0});var m=C(o);c=M(m,g),m.forEach(u),b=P(k),q=h(k,"SPAN",{class:!0});var I=C(q);E=M(I,J),I.forEach(u),A=P(k),p&&p.l(k),k.forEach(u),N=P(j),y=h(j,"BUTTON",{class:!0,style:!0,"data-svelte-h":!0}),Y(y)!=="svelte-19anezd"&&(y.textContent=te),O=P(j),j.forEach(u),this.h()},h(){_(l,"class","svelte-1igi6bz"),_(o,"class","svelte-1igi6bz"),_(q,"class","role-badge svelte-1igi6bz"),_(t,"class","judge-info svelte-1igi6bz"),_(y,"class","btn btn-secondary svelte-1igi6bz"),de(y,"padding","0.5rem 1rem"),_(e,"class","judge-card svelte-1igi6bz")},m(D,j){T(D,e,j),r(e,t),r(t,l),r(l,a),r(t,n),r(t,o),r(o,c),r(t,b),r(t,q),r(q,E),r(t,A),p&&p.m(t,null),r(e,N),r(e,y),r(e,O),H||(Q=ie(y,"click",X),H=!0)},p(D,j){var k,L;s=D,j[0]&128&&i!==(i=(((k=s[29].judge)==null?void 0:k.name)||"Unknown Judge")+"")&&x(a,i),j[0]&128&&g!==(g=((L=s[29].judge)==null?void 0:L.email)+"")&&x(c,g),j[0]&128&&J!==(J=s[14](s[29].judge_role)+"")&&x(E,J),s[29].assignment_notes?p?p.p(s,j):(p=Ue(s),p.c(),p.m(t,null)):p&&(p.d(1),p=null)},d(D){D&&u(e),p&&p.d(),H=!1,Q()}}}function Be(s){let e,t,l="Add New Judge",i;function a(g,c){return g[1].length===0?st:tt}let n=a(s),o=n(s);return{c(){e=v("div"),t=v("h4"),t.textContent=l,i=B(),o.c(),this.h()},l(g){e=h(g,"DIV",{class:!0});var c=C(e);t=h(c,"H4",{"data-svelte-h":!0}),Y(t)!=="svelte-1sjcv40"&&(t.textContent=l),i=P(c),o.l(c),c.forEach(u),this.h()},h(){_(e,"class","add-judge-form svelte-1igi6bz")},m(g,c){T(g,e,c),r(e,t),r(e,i),o.m(e,null)},p(g,c){n===(n=a(g))&&o?o.p(g,c):(o.d(1),o=n(g),o&&(o.c(),o.m(e,null)))},d(g){g&&u(e),o.d()}}}function tt(s){let e,t,l="Select Judge",i,a,n,o="Choose a judge...",g,c,b,q="Judge Role",J,E,A,N="Club Judge",y,te="BJCP Certified Judge",O,H="Guest Judge",Q,p,X,K="Assignment Notes (Optional)",se,D,j,k,L,m=s[3]?"Adding...":"Add Judge",I,$,Z,W,ee,oe,ne,le=je(s[1]),G=[];for(let d=0;d<le.length;d+=1)G[d]=Ne(Ae(s,le,d));return{c(){e=v("div"),t=v("label"),t.textContent=l,i=B(),a=v("select"),n=v("option"),n.textContent=o;for(let d=0;d<G.length;d+=1)G[d].c();g=B(),c=v("div"),b=v("label"),b.textContent=q,J=B(),E=v("select"),A=v("option"),A.textContent=N,y=v("option"),y.textContent=te,O=v("option"),O.textContent=H,Q=B(),p=v("div"),X=v("label"),X.textContent=K,se=B(),D=v("textarea"),j=B(),k=v("div"),L=v("button"),I=R(m),Z=B(),W=v("button"),ee=R("Cancel"),this.h()},l(d){e=h(d,"DIV",{class:!0});var U=C(e);t=h(U,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Y(t)!=="svelte-5apbzf"&&(t.textContent=l),i=P(U),a=h(U,"SELECT",{id:!0,class:!0});var w=C(a);n=h(w,"OPTION",{"data-svelte-h":!0}),Y(n)!=="svelte-1m860wh"&&(n.textContent=o);for(let ce=0;ce<G.length;ce+=1)G[ce].l(w);w.forEach(u),U.forEach(u),g=P(d),c=h(d,"DIV",{class:!0});var F=C(c);b=h(F,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Y(b)!=="svelte-rx7pol"&&(b.textContent=q),J=P(F),E=h(F,"SELECT",{id:!0,class:!0});var V=C(E);A=h(V,"OPTION",{"data-svelte-h":!0}),Y(A)!=="svelte-12ge0d8"&&(A.textContent=N),y=h(V,"OPTION",{"data-svelte-h":!0}),Y(y)!=="svelte-1j85d13"&&(y.textContent=te),O=h(V,"OPTION",{"data-svelte-h":!0}),Y(O)!=="svelte-18n1o3m"&&(O.textContent=H),V.forEach(u),F.forEach(u),Q=P(d),p=h(d,"DIV",{class:!0});var S=C(p);X=h(S,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Y(X)!=="svelte-lwcqxi"&&(X.textContent=K),se=P(S),D=h(S,"TEXTAREA",{id:!0,class:!0,rows:!0,placeholder:!0}),C(D).forEach(u),S.forEach(u),j=P(d),k=h(d,"DIV",{class:!0});var f=C(k);L=h(f,"BUTTON",{class:!0});var z=C(L);I=M(z,m),z.forEach(u),Z=P(f),W=h(f,"BUTTON",{class:!0});var _e=C(W);ee=M(_e,"Cancel"),_e.forEach(u),f.forEach(u),this.h()},h(){_(t,"for","judge-select"),_(t,"class","svelte-1igi6bz"),n.__value="",ue(n,n.__value),_(a,"id","judge-select"),_(a,"class","form-control svelte-1igi6bz"),s[6].judge_id===void 0&&Te(()=>s[20].call(a)),_(e,"class","form-group svelte-1igi6bz"),_(b,"for","judge-role"),_(b,"class","svelte-1igi6bz"),A.__value=ae.CLUB_JUDGE,ue(A,A.__value),y.__value=ae.BJCP_JUDGE,ue(y,y.__value),O.__value=ae.GUEST_JUDGE,ue(O,O.__value),_(E,"id","judge-role"),_(E,"class","form-control svelte-1igi6bz"),s[6].judge_role===void 0&&Te(()=>s[21].call(E)),_(c,"class","form-group svelte-1igi6bz"),_(X,"for","assignment-notes"),_(X,"class","svelte-1igi6bz"),_(D,"id","assignment-notes"),_(D,"class","form-control svelte-1igi6bz"),_(D,"rows","2"),_(D,"placeholder","Any special instructions or notes for this judge assignment..."),_(p,"class","form-group svelte-1igi6bz"),_(L,"class","btn btn-success svelte-1igi6bz"),L.disabled=$=s[3]||!s[6].judge_id,_(W,"class","btn btn-secondary svelte-1igi6bz"),W.disabled=s[3],_(k,"class","form-actions svelte-1igi6bz")},m(d,U){T(d,e,U),r(e,t),r(e,i),r(e,a),r(a,n);for(let w=0;w<G.length;w+=1)G[w]&&G[w].m(a,null);me(a,s[6].judge_id,!0),T(d,g,U),T(d,c,U),r(c,b),r(c,J),r(c,E),r(E,A),r(E,y),r(E,O),me(E,s[6].judge_role,!0),T(d,Q,U),T(d,p,U),r(p,X),r(p,se),r(p,D),ue(D,s[6].assignment_notes),T(d,j,U),T(d,k,U),r(k,L),r(L,I),r(k,Z),r(k,W),r(W,ee),oe||(ne=[ie(a,"change",s[20]),ie(E,"change",s[21]),ie(D,"input",s[22]),ie(L,"click",s[10]),ie(W,"click",s[23])],oe=!0)},p(d,U){if(U[0]&2){le=je(d[1]);let w;for(w=0;w<le.length;w+=1){const F=Ae(d,le,w);G[w]?G[w].p(F,U):(G[w]=Ne(F),G[w].c(),G[w].m(a,null))}for(;w<G.length;w+=1)G[w].d(1);G.length=le.length}U[0]&66&&me(a,d[6].judge_id),U[0]&66&&me(E,d[6].judge_role),U[0]&66&&ue(D,d[6].assignment_notes),U[0]&8&&m!==(m=d[3]?"Adding...":"Add Judge")&&x(I,m),U[0]&74&&$!==($=d[3]||!d[6].judge_id)&&(L.disabled=$),U[0]&8&&(W.disabled=d[3])},d(d){d&&(u(e),u(g),u(c),u(Q),u(p),u(j),u(k)),Ge(G,d),oe=!1,Se(ne)}}}function st(s){let e,t="All members are already assigned as judges for this competition.";return{c(){e=v("p"),e.textContent=t},l(l){e=h(l,"P",{"data-svelte-h":!0}),Y(e)!=="svelte-yiqdcy"&&(e.textContent=t)},m(l,i){T(l,e,i)},p:ge,d(l){l&&u(e)}}}function Ne(s){let e,t=s[26].name+"",l,i,a=s[26].email+"",n,o,g;return{c(){e=v("option"),l=R(t),i=R(" ("),n=R(a),o=R(")"),this.h()},l(c){e=h(c,"OPTION",{});var b=C(e);l=M(b,t),i=M(b," ("),n=M(b,a),o=M(b,")"),b.forEach(u),this.h()},h(){e.__value=g=s[26].id,ue(e,e.__value)},m(c,b){T(c,e,b),r(e,l),r(e,i),r(e,n),r(e,o)},p(c,b){b[0]&2&&t!==(t=c[26].name+"")&&x(l,t),b[0]&2&&a!==(a=c[26].email+"")&&x(n,a),b[0]&2&&g!==(g=c[26].id)&&(e.__value=g,ue(e,e.__value))},d(c){c&&u(e)}}}function Oe(s){let e,t,l;return{c(){e=v("div"),t=R("Error: "),l=R(s[9]),this.h()},l(i){e=h(i,"DIV",{style:!0});var a=C(e);t=M(a,"Error: "),l=M(a,s[9]),a.forEach(u),this.h()},h(){de(e,"background","#fecaca"),de(e,"color","#dc2626"),de(e,"padding","1rem"),de(e,"border-radius","4px"),de(e,"margin-top","1rem")},m(i,a){T(i,e,a),r(e,t),r(e,l)},p(i,a){a[0]&512&&x(l,i[9])},d(i){i&&u(e)}}}function lt(s){let e,t,l='<h1 class="svelte-1igi6bz">Manage Judges</h1> <p>Assign judges to competition</p>',i;function a(g,c){if(g[2])return Ze;if(g[0])return Ye}let n=a(s),o=n&&n(s);return{c(){e=v("div"),t=v("div"),t.innerHTML=l,i=B(),o&&o.c(),this.h()},l(g){e=h(g,"DIV",{class:!0});var c=C(e);t=h(c,"DIV",{class:!0,"data-svelte-h":!0}),Y(t)!=="svelte-1bf4cvv"&&(t.innerHTML=l),i=P(c),o&&o.l(c),c.forEach(u),this.h()},h(){_(t,"class","hero svelte-1igi6bz"),_(e,"class","container svelte-1igi6bz")},m(g,c){T(g,e,c),r(e,t),r(e,i),o&&o.m(e,null)},p(g,c){n===(n=a(g))&&o?o.p(g,c):(o&&o.d(1),o=n&&n(g),o&&(o.c(),o.m(e,null)))},i:ge,o:ge,d(g){g&&u(e),o&&o.d()}}}function Ve(s){const e=new Date,t=new Date(s.entry_deadline),l=new Date(s.judging_date);return s.results_published?"status-completed":e>t&&e<=l?"status-judging":e<=t?"status-open":"status-judging"}function pe(s,e="info"){const t=document.createElement("div");t.textContent=s,t.style.cssText=`
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 1rem 1.5rem;
      border-radius: 6px;
      color: white;
      font-weight: 500;
      z-index: 1000;
      background: ${e==="success"?"#059669":e==="error"?"#dc2626":"#6b7280"};
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    `,document.body.appendChild(t),setTimeout(()=>document.body.removeChild(t),3e3)}function it(s,e,t){let l,i,a,n,o,g;he(s,Ke,m=>t(7,i=m)),he(s,Xe,m=>t(15,a=m)),he(s,qe,m=>t(16,n=m)),he(s,Qe,m=>t(8,o=m)),he(s,We,m=>t(9,g=m));let c=null,b=[],q=!0,J=!1,E=!1,A=!1,N={judge_id:"",judge_role:ae.CLUB_JUDGE,assignment_notes:""};Re(()=>{y()});async function y(){t(2,q=!0);try{const{data:m,error:I}=await Ce.from("competitions").select("*").eq("id",l).single();if(I)throw I;t(0,c=m),await be.loadJudges(l);const{data:$,error:Z}=await Ce.from("members").select("id, name, email, phone").order("name");if(Z)throw Z;const W=new Set(i.map(ee=>ee.judge_id));t(1,b=$.filter(ee=>!W.has(ee.id)))}catch(m){console.error("Error loading data:",m),alert("Failed to load competition data"),Ee("/officers/manage-competitions")}finally{t(2,q=!1)}}async function te(){if(!N.judge_id){alert("Please select a judge");return}try{t(3,J=!0),await be.assignJudge(l,{...N,assigned_by:a.id}),t(6,N={judge_id:"",judge_role:ae.CLUB_JUDGE,assignment_notes:""}),t(5,A=!1);const m=new Set(i.map(I=>I.judge_id));t(1,b=b.filter(I=>!m.has(I.id))),pe("Judge assigned successfully","success")}catch(m){console.error("Error adding judge:",m),alert("Failed to assign judge")}finally{t(3,J=!1)}}async function O(m){if(confirm("Are you sure you want to remove this judge assignment?"))try{await be.removeJudge(m),await y(),pe("Judge removed successfully","success")}catch(I){console.error("Error removing judge:",I),alert("Failed to remove judge")}}async function H(){if(confirm(`Are you sure you want to assign all ${b.length} available members as club judges for this intraclub competition?`))try{t(3,J=!0);for(const m of b)await be.assignJudge(l,{judge_id:m.id,judge_role:ae.CLUB_JUDGE,assignment_notes:"Auto-assigned for intraclub competition",assigned_by:a.id});await y(),pe(`Successfully assigned ${b.length} judges`,"success")}catch(m){console.error("Error assigning all judges:",m),alert("Failed to assign all judges")}finally{t(3,J=!1)}}async function Q(){try{t(4,E=!0);const{data:m,error:I}=await Ce.from("members").select("id, name, email, phone").order("name");if(I)throw I;const $=new Set(i.map(Z=>Z.judge_id));t(1,b=m.filter(Z=>!$.has(Z.id))),pe(`Refreshed judges list - ${b.length} available`,"success")}catch(m){console.error("Error refreshing judges:",m),alert("Failed to refresh judges list")}finally{t(4,E=!1)}}function p(m){switch(m){case ae.BJCP_JUDGE:return"BJCP Certified Judge";case ae.CLUB_JUDGE:return"Club Judge";case ae.GUEST_JUDGE:return"Guest Judge";default:return m}}const X=()=>t(5,A=!A),K=()=>Ee("/officers/manage-competitions"),se=m=>O(m.id);function D(){N.judge_id=De(this),t(6,N),t(1,b)}function j(){N.judge_role=De(this),t(6,N),t(1,b)}function k(){N.assignment_notes=this.value,t(6,N),t(1,b)}const L=()=>t(5,A=!1);return s.$$.update=()=>{s.$$.dirty[0]&32768&&a&&!a.is_officer&&Ee("/"),s.$$.dirty[0]&65536&&(l=n.params.id)},[c,b,q,J,E,A,N,i,o,g,te,O,H,Q,p,a,n,X,K,se,D,j,k,L]}class gt extends He{constructor(e){super(),Fe(this,e,it,lt,Me,{},null,[-1,-1])}}export{gt as component};
