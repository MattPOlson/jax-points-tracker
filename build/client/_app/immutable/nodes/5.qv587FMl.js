import{s as Le,n as W,d as f,i as M,b as d,p as Ne,q as b,c as m,e as E,v as G,g as S,h as v,j,w as Pe,x as Se,a as U,f as A,t as R,y as _e,A as ge,B as de,z as se,G as fe}from"../chunks/DOvoZ9Ia.js";import{e as ne}from"../chunks/DJwZhPfI.js";import{S as je,i as Me}from"../chunks/DZMW2zPD.js";import{g as He}from"../chunks/F2-QbuOs.js";import{s as te}from"../chunks/CCM_4jRA.js";function be(a,e,l){const t=a.slice();return t[12]=e[l][0],t[13]=e[l][1],t}function ye(a,e,l){const t=a.slice();return t[16]=e[l],t}function ke(a,e,l){const t=a.slice();return t[19]=e[l],t}function Ee(a){let e,l;return{c(){e=v("div"),l=R(a[6]),this.h()},l(t){e=m(t,"DIV",{class:!0});var s=E(e);l=A(s,a[6]),s.forEach(f),this.h()},h(){b(e,"class","error svelte-1n450du")},m(t,s){M(t,e,s),d(e,l)},p(t,s){s&64&&U(l,t[6])},d(t){t&&f(e)}}}function Ae(a){let e,l,t="Select Competition to View Results:",s,c,r,o="Choose a competition...",_,g,p,k,y,C=ne(a[2]),h=[];for(let n=0;n<C.length;n+=1)h[n]=Ce(ke(a,C,n));let i=a[3]&&De(a);return{c(){e=v("div"),l=v("div"),l.textContent=t,s=j(),c=v("select"),r=v("option"),r.textContent=o;for(let n=0;n<h.length;n+=1)h[n].c();g=j(),i&&i.c(),p=se(),this.h()},l(n){e=m(n,"DIV",{class:!0});var u=E(e);l=m(u,"DIV",{class:!0,"data-svelte-h":!0}),G(l)!=="svelte-6famh2"&&(l.textContent=t),s=S(u),c=m(u,"SELECT",{class:!0});var w=E(c);r=m(w,"OPTION",{"data-svelte-h":!0}),G(r)!=="svelte-1urbt8h"&&(r.textContent=o);for(let I=0;I<h.length;I+=1)h[I].l(w);w.forEach(f),u.forEach(f),g=S(n),i&&i.l(n),p=se(),this.h()},h(){b(l,"class","selector-label svelte-1n450du"),r.__value="",de(r,r.__value),b(c,"class","competition-select svelte-1n450du"),b(e,"class","competition-selector svelte-1n450du")},m(n,u){var w;M(n,e,u),d(e,l),d(e,s),d(e,c),d(c,r);for(let I=0;I<h.length;I+=1)h[I]&&h[I].m(c,null);ge(c,((w=a[3])==null?void 0:w.id)||""),M(n,g,u),i&&i.m(n,u),M(n,p,u),k||(y=Ne(c,"change",a[8]),k=!0)},p(n,u){var w,I;if(u&4){C=ne(n[2]);let V;for(V=0;V<C.length;V+=1){const B=ke(n,C,V);h[V]?h[V].p(B,u):(h[V]=Ce(B),h[V].c(),h[V].m(c,null))}for(;V<h.length;V+=1)h[V].d(1);h.length=C.length}u&12&&_!==(_=((w=n[3])==null?void 0:w.id)||"")&&ge(c,((I=n[3])==null?void 0:I.id)||""),n[3]?i?i.p(n,u):(i=De(n),i.c(),i.m(p.parentNode,p)):i&&(i.d(1),i=null)},d(n){n&&(f(e),f(g),f(p)),_e(h,n),i&&i.d(n),k=!1,y()}}}function Re(a){let e,l="<h3>No Results Published</h3> <p>There are currently no competition results available to view.</p> <p>Check back after competitions have been judged and results published.</p>";return{c(){e=v("div"),e.innerHTML=l,this.h()},l(t){e=m(t,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-ntmt9w"&&(e.innerHTML=l),this.h()},h(){b(e,"class","empty-state svelte-1n450du")},m(t,s){M(t,e,s)},p:W,d(t){t&&f(e)}}}function Be(a){let e,l='<div class="spinner svelte-1n450du"></div> <p>Loading competition results...</p>';return{c(){e=v("div"),e.innerHTML=l,this.h()},l(t){e=m(t,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-1c57wy0"&&(e.innerHTML=l),this.h()},h(){b(e,"class","loading svelte-1n450du")},m(t,s){M(t,e,s)},p:W,d(t){t&&f(e)}}}function Ce(a){let e,l=a[19].name+"",t,s,c=Ve(a[19].judging_date)+"",r,o,_;return{c(){e=v("option"),t=R(l),s=R(" - Judged "),r=R(c),o=j(),this.h()},l(g){e=m(g,"OPTION",{});var p=E(e);t=A(p,l),s=A(p," - Judged "),r=A(p,c),o=S(p),p.forEach(f),this.h()},h(){e.__value=_=a[19].id,de(e,e.__value)},m(g,p){M(g,e,p),d(e,t),d(e,s),d(e,r),d(e,o)},p(g,p){p&4&&l!==(l=g[19].name+"")&&U(t,l),p&4&&c!==(c=Ve(g[19].judging_date)+"")&&U(r,c),p&4&&_!==(_=g[19].id)&&(e.__value=_,de(e,e.__value))},d(g){g&&f(e)}}}function De(a){let e,l,t=!a[5]&&a[0].length>0&&Ie(a);function s(o,_){return o[5]?Ue:o[0].length===0?qe:Oe}let c=s(a),r=c(a);return{c(){t&&t.c(),e=j(),r.c(),l=se()},l(o){t&&t.l(o),e=S(o),r.l(o),l=se()},m(o,_){t&&t.m(o,_),M(o,e,_),r.m(o,_),M(o,l,_)},p(o,_){!o[5]&&o[0].length>0?t?t.p(o,_):(t=Ie(o),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null),c===(c=s(o))&&r?r.p(o,_):(r.d(1),r=c(o),r&&(r.c(),r.m(l.parentNode,l)))},d(o){o&&(f(e),f(l)),t&&t.d(o),r.d(o)}}}function Ie(a){let e,l,t=a[3].name+"",s,c,r,o,_,g,p="Total Entries",k,y,C=a[7].totalEntries+"",h,i,n,u,w="Awards Given",I,V,B=a[7].placedEntries+"",J,O,z,q,L="Categories",P,F,N=a[7].categories+"",T,D,H,Z,ae="Average Score",ee,Q,X=a[7].averageScore+"",$;return{c(){e=v("div"),l=v("h2"),s=R(t),c=R(" - Results Summary"),r=j(),o=v("div"),_=v("div"),g=v("div"),g.textContent=p,k=j(),y=v("div"),h=R(C),i=j(),n=v("div"),u=v("div"),u.textContent=w,I=j(),V=v("div"),J=R(B),O=j(),z=v("div"),q=v("div"),q.textContent=L,P=j(),F=v("div"),T=R(N),D=j(),H=v("div"),Z=v("div"),Z.textContent=ae,ee=j(),Q=v("div"),$=R(X),this.h()},l(Y){e=m(Y,"DIV",{class:!0});var K=E(e);l=m(K,"H2",{style:!0});var ue=E(l);s=A(ue,t),c=A(ue," - Results Summary"),ue.forEach(f),r=S(K),o=m(K,"DIV",{class:!0});var x=E(o);_=m(x,"DIV",{class:!0});var re=E(_);g=m(re,"DIV",{class:!0,"data-svelte-h":!0}),G(g)!=="svelte-ufm050"&&(g.textContent=p),k=S(re),y=m(re,"DIV",{class:!0});var he=E(y);h=A(he,C),he.forEach(f),re.forEach(f),i=S(x),n=m(x,"DIV",{class:!0});var oe=E(n);u=m(oe,"DIV",{class:!0,"data-svelte-h":!0}),G(u)!=="svelte-1wthacd"&&(u.textContent=w),I=S(oe),V=m(oe,"DIV",{class:!0});var me=E(V);J=A(me,B),me.forEach(f),oe.forEach(f),O=S(x),z=m(x,"DIV",{class:!0});var ie=E(z);q=m(ie,"DIV",{class:!0,"data-svelte-h":!0}),G(q)!=="svelte-1t4zeo0"&&(q.textContent=L),P=S(ie),F=m(ie,"DIV",{class:!0});var ve=E(F);T=A(ve,N),ve.forEach(f),ie.forEach(f),D=S(x),H=m(x,"DIV",{class:!0});var ce=E(H);Z=m(ce,"DIV",{class:!0,"data-svelte-h":!0}),G(Z)!=="svelte-r90083"&&(Z.textContent=ae),ee=S(ce),Q=m(ce,"DIV",{class:!0});var pe=E(Q);$=A(pe,X),pe.forEach(f),ce.forEach(f),x.forEach(f),K.forEach(f),this.h()},h(){fe(l,"margin","0 0 1.5rem 0"),fe(l,"color","#333"),b(g,"class","summary-label svelte-1n450du"),b(y,"class","summary-value svelte-1n450du"),b(_,"class","summary-item svelte-1n450du"),b(u,"class","summary-label svelte-1n450du"),b(V,"class","summary-value svelte-1n450du"),b(n,"class","summary-item svelte-1n450du"),b(q,"class","summary-label svelte-1n450du"),b(F,"class","summary-value svelte-1n450du"),b(z,"class","summary-item svelte-1n450du"),b(Z,"class","summary-label svelte-1n450du"),b(Q,"class","summary-value svelte-1n450du"),b(H,"class","summary-item svelte-1n450du"),b(o,"class","summary-grid svelte-1n450du"),b(e,"class","results-summary svelte-1n450du")},m(Y,K){M(Y,e,K),d(e,l),d(l,s),d(l,c),d(e,r),d(e,o),d(o,_),d(_,g),d(_,k),d(_,y),d(y,h),d(o,i),d(o,n),d(n,u),d(n,I),d(n,V),d(V,J),d(o,O),d(o,z),d(z,q),d(z,P),d(z,F),d(F,T),d(o,D),d(o,H),d(H,Z),d(H,ee),d(H,Q),d(Q,$)},p(Y,K){K&8&&t!==(t=Y[3].name+"")&&U(s,t),K&128&&C!==(C=Y[7].totalEntries+"")&&U(h,C),K&128&&B!==(B=Y[7].placedEntries+"")&&U(J,B),K&128&&N!==(N=Y[7].categories+"")&&U(T,N),K&128&&X!==(X=Y[7].averageScore+"")&&U($,X)},d(Y){Y&&f(e)}}}function Oe(a){let e,l=ne(Object.entries(a[1])),t=[];for(let s=0;s<l.length;s+=1)t[s]=we(be(a,l,s));return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=se()},l(s){for(let c=0;c<t.length;c+=1)t[c].l(s);e=se()},m(s,c){for(let r=0;r<t.length;r+=1)t[r]&&t[r].m(s,c);M(s,e,c)},p(s,c){if(c&2){l=ne(Object.entries(s[1]));let r;for(r=0;r<l.length;r+=1){const o=be(s,l,r);t[r]?t[r].p(o,c):(t[r]=we(o),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=l.length}},d(s){s&&f(e),_e(t,s)}}}function qe(a){let e,l="<h3>No Results Available</h3> <p>Results for this competition have not been entered yet.</p>";return{c(){e=v("div"),e.innerHTML=l,this.h()},l(t){e=m(t,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-5maymk"&&(e.innerHTML=l),this.h()},h(){b(e,"class","empty-state svelte-1n450du")},m(t,s){M(t,e,s)},p:W,d(t){t&&f(e)}}}function Ue(a){let e,l='<div class="spinner svelte-1n450du"></div> <p>Loading results...</p>';return{c(){e=v("div"),e.innerHTML=l,this.h()},l(t){e=m(t,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-1wd8za7"&&(e.innerHTML=l),this.h()},h(){b(e,"class","loading svelte-1n450du")},m(t,s){M(t,e,s)},p:W,d(t){t&&f(e)}}}function Ge(a){let e,l="-/50";return{c(){e=v("span"),e.textContent=l,this.h()},l(t){e=m(t,"SPAN",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-1qmajtw"&&(e.textContent=l),this.h()},h(){b(e,"class","score-badge svelte-1n450du")},m(t,s){M(t,e,s)},p:W,d(t){t&&f(e)}}}function ze(a){let e,l=a[16].score+"",t,s;return{c(){e=v("span"),t=R(l),s=R("/50"),this.h()},l(c){e=m(c,"SPAN",{class:!0});var r=E(e);t=A(r,l),s=A(r,"/50"),r.forEach(f),this.h()},h(){b(e,"class","score-badge svelte-1n450du")},m(c,r){M(c,e,r),d(e,t),d(e,s)},p(c,r){r&2&&l!==(l=c[16].score+"")&&U(t,l)},d(c){c&&f(e)}}}function Fe(a){let e,l="No Placement";return{c(){e=v("span"),e.textContent=l,this.h()},l(t){e=m(t,"SPAN",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-1ngxc4k"&&(e.textContent=l),this.h()},h(){b(e,"class","placement-badge placement-none svelte-1n450du")},m(t,s){M(t,e,s)},p:W,d(t){t&&f(e)}}}function Je(a){let e,l,t=le(a[16].placement).medal+"",s,c,r,o=le(a[16].placement).text+"",_,g;return{c(){e=v("span"),l=v("span"),s=R(t),c=j(),r=v("span"),_=R(o),this.h()},l(p){e=m(p,"SPAN",{class:!0});var k=E(e);l=m(k,"SPAN",{});var y=E(l);s=A(y,t),y.forEach(f),c=S(k),r=m(k,"SPAN",{});var C=E(r);_=A(C,o),C.forEach(f),k.forEach(f),this.h()},h(){b(e,"class",g="placement-badge "+le(a[16].placement).class+" svelte-1n450du")},m(p,k){M(p,e,k),d(e,l),d(l,s),d(e,c),d(e,r),d(r,_)},p(p,k){k&2&&t!==(t=le(p[16].placement).medal+"")&&U(s,t),k&2&&o!==(o=le(p[16].placement).text+"")&&U(_,o),k&2&&g!==(g="placement-badge "+le(p[16].placement).class+" svelte-1n450du")&&b(e,"class",g)},d(p){p&&f(e)}}}function Ze(a){let e,l="No notes";return{c(){e=v("span"),e.textContent=l,this.h()},l(t){e=m(t,"SPAN",{style:!0,"data-svelte-h":!0}),G(e)!=="svelte-1ylmb08"&&(e.textContent=l),this.h()},h(){fe(e,"color","#999")},m(t,s){M(t,e,s)},p:W,d(t){t&&f(e)}}}function Ke(a){let e,l=a[16].judge_notes+"",t;return{c(){e=v("div"),t=R(l),this.h()},l(s){e=m(s,"DIV",{class:!0});var c=E(e);t=A(c,l),c.forEach(f),this.h()},h(){b(e,"class","judge-notes svelte-1n450du")},m(s,c){M(s,e,c),d(e,t)},p(s,c){c&2&&l!==(l=s[16].judge_notes+"")&&U(t,l)},d(s){s&&f(e)}}}function Te(a){let e,l,t,s=a[16].entry_number+"",c,r,o,_=a[16].member_name+"",g,p,k,y=a[16].beer_name+"",C,h,i,n,u,w,I,V;function B(T,D){return T[16].score?ze:Ge}let J=B(a),O=J(a);function z(T,D){return T[16].placement?Je:Fe}let q=z(a),L=q(a);function P(T,D){return T[16].judge_notes?Ke:Ze}let F=P(a),N=F(a);return{c(){e=v("tr"),l=v("td"),t=v("span"),c=R(s),r=j(),o=v("td"),g=R(_),p=j(),k=v("td"),C=R(y),h=j(),i=v("td"),O.c(),n=j(),u=v("td"),L.c(),w=j(),I=v("td"),N.c(),V=j(),this.h()},l(T){e=m(T,"TR",{class:!0});var D=E(e);l=m(D,"TD",{class:!0});var H=E(l);t=m(H,"SPAN",{class:!0});var Z=E(t);c=A(Z,s),Z.forEach(f),H.forEach(f),r=S(D),o=m(D,"TD",{class:!0});var ae=E(o);g=A(ae,_),ae.forEach(f),p=S(D),k=m(D,"TD",{class:!0});var ee=E(k);C=A(ee,y),ee.forEach(f),h=S(D),i=m(D,"TD",{class:!0});var Q=E(i);O.l(Q),Q.forEach(f),n=S(D),u=m(D,"TD",{class:!0});var X=E(u);L.l(X),X.forEach(f),w=S(D),I=m(D,"TD",{class:!0});var $=E(I);N.l($),$.forEach(f),V=S(D),D.forEach(f),this.h()},h(){b(t,"class","entry-number svelte-1n450du"),b(l,"class","svelte-1n450du"),b(o,"class","svelte-1n450du"),b(k,"class","svelte-1n450du"),b(i,"class","svelte-1n450du"),b(u,"class","svelte-1n450du"),b(I,"class","svelte-1n450du"),b(e,"class","svelte-1n450du")},m(T,D){M(T,e,D),d(e,l),d(l,t),d(t,c),d(e,r),d(e,o),d(o,g),d(e,p),d(e,k),d(k,C),d(e,h),d(e,i),O.m(i,null),d(e,n),d(e,u),L.m(u,null),d(e,w),d(e,I),N.m(I,null),d(e,V)},p(T,D){D&2&&s!==(s=T[16].entry_number+"")&&U(c,s),D&2&&_!==(_=T[16].member_name+"")&&U(g,_),D&2&&y!==(y=T[16].beer_name+"")&&U(C,y),J===(J=B(T))&&O?O.p(T,D):(O.d(1),O=J(T),O&&(O.c(),O.m(i,null))),q===(q=z(T))&&L?L.p(T,D):(L.d(1),L=q(T),L&&(L.c(),L.m(u,null))),F===(F=P(T))&&N?N.p(T,D):(N.d(1),N=F(T),N&&(N.c(),N.m(I,null)))},d(T){T&&f(e),O.d(),L.d(),N.d()}}}function we(a){let e,l,t,s=a[12]+"",c,r,o,_,g='<tr class="svelte-1n450du"><th class="svelte-1n450du">Entry</th> <th class="svelte-1n450du">Member</th> <th class="svelte-1n450du">Beer Name</th> <th class="svelte-1n450du">Score</th> <th class="svelte-1n450du">Placement</th> <th class="svelte-1n450du">Judge Notes</th></tr>',p,k,y,C=ne(a[13]),h=[];for(let i=0;i<C.length;i+=1)h[i]=Te(ye(a,C,i));return{c(){e=v("div"),l=v("div"),t=v("h3"),c=R(s),r=j(),o=v("table"),_=v("thead"),_.innerHTML=g,p=j(),k=v("tbody");for(let i=0;i<h.length;i+=1)h[i].c();y=j(),this.h()},l(i){e=m(i,"DIV",{class:!0});var n=E(e);l=m(n,"DIV",{class:!0});var u=E(l);t=m(u,"H3",{class:!0});var w=E(t);c=A(w,s),w.forEach(f),u.forEach(f),r=S(n),o=m(n,"TABLE",{class:!0});var I=E(o);_=m(I,"THEAD",{"data-svelte-h":!0}),G(_)!=="svelte-actiab"&&(_.innerHTML=g),p=S(I),k=m(I,"TBODY",{});var V=E(k);for(let B=0;B<h.length;B+=1)h[B].l(V);V.forEach(f),I.forEach(f),y=S(n),n.forEach(f),this.h()},h(){b(t,"class","category-title svelte-1n450du"),b(l,"class","category-header svelte-1n450du"),b(o,"class","results-table svelte-1n450du"),b(e,"class","category-section svelte-1n450du")},m(i,n){M(i,e,n),d(e,l),d(l,t),d(t,c),d(e,r),d(e,o),d(o,_),d(o,p),d(o,k);for(let u=0;u<h.length;u+=1)h[u]&&h[u].m(k,null);d(e,y)},p(i,n){if(n&2&&s!==(s=i[12]+"")&&U(c,s),n&2){C=ne(i[13]);let u;for(u=0;u<C.length;u+=1){const w=ye(i,C,u);h[u]?h[u].p(w,n):(h[u]=Te(w),h[u].c(),h[u].m(k,null))}for(;u<h.length;u+=1)h[u].d(1);h.length=C.length}},d(i){i&&f(e),_e(h,i)}}}function Ye(a){let e,l,t='<h1 class="svelte-1n450du">Competition Results</h1> <p class="subtitle svelte-1n450du">View published competition results and standings</p>',s,c,r,o="Back to Competitions",_,g,p,k,y=a[6]&&Ee(a);function C(n,u){return n[4]?Be:n[2].length===0?Re:Ae}let h=C(a),i=h(a);return{c(){e=v("div"),l=v("div"),l.innerHTML=t,s=j(),c=v("div"),r=v("button"),r.textContent=o,_=j(),y&&y.c(),g=j(),i.c(),this.h()},l(n){e=m(n,"DIV",{class:!0});var u=E(e);l=m(u,"DIV",{class:!0,"data-svelte-h":!0}),G(l)!=="svelte-utbced"&&(l.innerHTML=t),s=S(u),c=m(u,"DIV",{class:!0});var w=E(c);r=m(w,"BUTTON",{class:!0,"data-svelte-h":!0}),G(r)!=="svelte-ri2cai"&&(r.textContent=o),w.forEach(f),_=S(u),y&&y.l(u),g=S(u),i.l(u),u.forEach(f),this.h()},h(){b(l,"class","hero svelte-1n450du"),b(r,"class","btn btn-secondary svelte-1n450du"),b(c,"class","controls svelte-1n450du"),b(e,"class","container svelte-1n450du")},m(n,u){M(n,e,u),d(e,l),d(e,s),d(e,c),d(c,r),d(e,_),y&&y.m(e,null),d(e,g),i.m(e,null),p||(k=Ne(r,"click",a[9]),p=!0)},p(n,[u]){n[6]?y?y.p(n,u):(y=Ee(n),y.c(),y.m(e,g)):y&&(y.d(1),y=null),h===(h=C(n))&&i?i.p(n,u):(i.d(1),i=h(n),i&&(i.c(),i.m(e,null)))},i:W,o:W,d(n){n&&f(e),y&&y.d(),i.d(),p=!1,k()}}}function le(a){switch(a){case"1":return{text:"1st Place",class:"placement-first",medal:"🥇"};case"2":return{text:"2nd Place",class:"placement-second",medal:"🥈"};case"3":return{text:"3rd Place",class:"placement-third",medal:"🥉"};case"HM":return{text:"Honorable Mention",class:"placement-hm",medal:"🏅"};default:return{text:"No Placement",class:"placement-none",medal:""}}}function Ve(a){if(!a)return"No date set";try{let e=a;a.includes(" ")&&!a.includes("T")&&(e=a.replace(" ","T"),!e.includes("+")&&!e.includes("Z")&&(e+="Z"));const l=new Date(e);return isNaN(l.getTime())?(console.warn("Invalid date after parsing:",a,"->",e),"Invalid Date"):l.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}catch(e){return console.warn("Error formatting date:",a,e),"Invalid Date"}}function Qe(a,e,l){let t,s,c=[],r=null,o=[],_=!0,g=!1,p=null;Pe(()=>{k()}),Se(()=>{});async function k(){l(4,_=!0),l(6,p=null);try{console.log("Loading published competitions...");const{data:i,error:n}=await te.from("competitions").select("*").eq("results_published",!0).order("judging_date",{ascending:!1});if(n)throw n;l(2,c=i||[]),console.log("Loaded",c.length,"published competitions"),c.length>0&&(l(3,r=c[0]),await C(c[0]))}catch(i){console.error("Error loading competitions:",i),l(6,p=i.message||"Failed to load competitions")}finally{l(4,_=!1)}}async function y(i){const n=i.target.value;if(!n){l(3,r=null),l(0,o=[]);return}const u=c.find(w=>w.id===n);u&&(l(3,r=u),await C(u))}async function C(i){l(5,g=!0),l(6,p=null);try{console.log("Loading results for competition:",i.name);const{data:n,error:u}=await te.from("competition_results").select("*").eq("competition_id",i.id).order("placement",{ascending:!0,nullsLast:!0}).order("score",{ascending:!1});if(u)throw u;if(!n||n.length===0){l(0,o=[]);return}const w=n.map(L=>L.entry_id),{data:I,error:V}=await te.from("competition_entries").select("*").in("id",w);if(V)throw V;const B=[...new Set(I.map(L=>L.member_id))],{data:J}=await te.from("members").select("id, name").in("id",B),O=[...new Set(I.map(L=>L.bjcp_category_id).filter(Boolean))],{data:z}=await te.from("bjcp_categories").select("id, category_name, category_number, subcategory_letter, subcategory_name").in("id",O);let q=[];if(i.category_system==="custom"){const{data:L,error:P}=await te.from("competition_ranking_groups").select("*").eq("competition_id",i.id).order("group_order");P||(q=L||[])}l(0,o=n.map(L=>{const P=I.find(H=>H.id===L.entry_id),F=J==null?void 0:J.find(H=>H.id===(P==null?void 0:P.member_id)),N=z==null?void 0:z.find(H=>H.id===(P==null?void 0:P.bjcp_category_id)),T=N?`${N.category_number}${N.subcategory_letter||""} - ${N.category_name}`:"Unknown Category";let D=null;if(q.length>0&&(P!=null&&P.bjcp_category_id)){const H=q.find(Z=>Z.bjcp_category_ids.includes(P.bjcp_category_id));D=(H==null?void 0:H.group_name)||null}return{...L,entry_number:(P==null?void 0:P.entry_number)||"N/A",beer_name:(P==null?void 0:P.beer_name)||"Unknown Beer",member_name:(F==null?void 0:F.name)||"Unknown Member",category_display:T,ranking_group_name:D,display_group:D||T,category_number:(N==null?void 0:N.category_number)||"",subcategory_letter:(N==null?void 0:N.subcategory_letter)||""}})),console.log("Loaded",o.length,"results")}catch(n){console.error("Error loading results:",n),l(6,p=n.message||"Failed to load results")}finally{l(5,g=!1)}}function h(){He("/competitions")}return a.$$.update=()=>{a.$$.dirty&1&&l(1,t=o.reduce((i,n)=>{const u=n.display_group;return i[u]||(i[u]=[]),i[u].push(n),i},{})),a.$$.dirty&3&&l(7,s={totalEntries:o.length,placedEntries:o.filter(i=>i.placement&&i.placement!=="").length,categories:Object.keys(t).length,averageScore:o.length>0?Math.round(o.reduce((i,n)=>i+(n.score||0),0)/o.length*10)/10:0})},[o,t,c,r,_,g,p,s,y,h]}class tt extends je{constructor(e){super(),Me(this,e,Qe,Ye,Le,{})}}export{tt as component};
