{"version":3,"file":"userProfile-BJElsKeo.js","sources":["../../../.svelte-kit/adapter-node/chunks/userProfile.js"],"sourcesContent":["import { w as writable } from \"./index.js\";\nimport { B as BROWSER } from \"./false.js\";\nimport { s as supabase } from \"./supabaseClient.js\";\nconst browser = BROWSER;\nconst userProfile = writable(null);\nconst isLoadingProfile = writable(false);\nlet lastLoaded = 0;\nconst CACHE_MS = 1e4;\nasync function loadUserProfile(force = false) {\n  if (!force && Date.now() - lastLoaded < CACHE_MS) return;\n  isLoadingProfile.set(true);\n  try {\n    const {\n      data: { user },\n      error: authError\n    } = await supabase.auth.getUser();\n    if (authError || !user) {\n      console.error(\"User not logged in or failed to retrieve auth user:\", authError);\n      userProfile.set(null);\n      return;\n    }\n    const { data, error } = await supabase.from(\"members\").select(\"*\").eq(\"id\", user.id).single();\n    if (error) {\n      console.error(\"Failed to load user profile:\", error);\n      userProfile.set(null);\n    } else {\n      if (browser) ;\n      else {\n        userProfile.set(data);\n        lastLoaded = Date.now();\n      }\n    }\n  } catch (err) {\n    console.error(\"âŒ Failed to load user profile:\", err);\n    userProfile.set(null);\n  } finally {\n    isLoadingProfile.set(false);\n  }\n}\nexport {\n  isLoadingProfile as i,\n  loadUserProfile as l,\n  userProfile as u\n};\n"],"names":[],"mappings":";;;;AAGA,MAAM,OAAO,GAAG,OAAO;AAClB,MAAC,WAAW,GAAG,QAAQ,CAAC,IAAI;AAC5B,MAAC,gBAAgB,GAAG,QAAQ,CAAC,KAAK;AACvC,IAAI,UAAU,GAAG,CAAC;AAClB,MAAM,QAAQ,GAAG,GAAG;AACpB,eAAe,eAAe,CAAC,KAAK,GAAG,KAAK,EAAE;AAC9C,EAAE,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,GAAG,EAAE,GAAG,UAAU,GAAG,QAAQ,EAAE;AACpD,EAAE,gBAAgB,CAAC,GAAG,CAAC,IAAI,CAAC;AAC5B,EAAE,IAAI;AACN,IAAI,MAAM;AACV,MAAM,IAAI,EAAE,EAAE,IAAI,EAAE;AACpB,MAAM,KAAK,EAAE;AACb,KAAK,GAAG,MAAM,QAAQ,CAAC,IAAI,CAAC,OAAO,EAAE;AACrC,IAAI,IAAI,SAAS,IAAI,CAAC,IAAI,EAAE;AAC5B,MAAM,OAAO,CAAC,KAAK,CAAC,qDAAqD,EAAE,SAAS,CAAC;AACrF,MAAM,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC;AAC3B,MAAM;AACN;AACA,IAAI,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,IAAI,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC,MAAM,EAAE;AACjG,IAAI,IAAI,KAAK,EAAE;AACf,MAAM,OAAO,CAAC,KAAK,CAAC,8BAA8B,EAAE,KAAK,CAAC;AAC1D,MAAM,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC;AAC3B,KAAK,MAAM;AACX,MAAM,IAAI,OAAO,EAAE;AACnB,WAAW;AACX,QAAQ,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC;AAC7B,QAAQ,UAAU,GAAG,IAAI,CAAC,GAAG,EAAE;AAC/B;AACA;AACA,GAAG,CAAC,OAAO,GAAG,EAAE;AAChB,IAAI,OAAO,CAAC,KAAK,CAAC,gCAAgC,EAAE,GAAG,CAAC;AACxD,IAAI,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC;AACzB,GAAG,SAAS;AACZ,IAAI,gBAAgB,CAAC,GAAG,CAAC,KAAK,CAAC;AAC/B;AACA;;;;"}