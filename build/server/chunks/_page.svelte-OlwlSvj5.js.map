{"version":3,"file":"_page.svelte-OlwlSvj5.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/officers/manage-competitions/results/_id_/_page.svelte.js"],"sourcesContent":["import { c as create_ssr_component, h as subscribe, o as onDestroy, v as validate_component } from \"../../../../../../chunks/ssr.js\";\nimport { g as goto } from \"../../../../../../chunks/client.js\";\nimport { p as page } from \"../../../../../../chunks/stores.js\";\nimport { u as userProfile } from \"../../../../../../chunks/userProfile.js\";\nimport \"../../../../../../chunks/supabaseClient.js\";\nimport { H as Hero } from \"../../../../../../chunks/Hero.js\";\nimport { C as Container } from \"../../../../../../chunks/Container.js\";\nimport { L as LoadingSpinner } from \"../../../../../../chunks/LoadingSpinner.js\";\n/* empty css                                                                */\n/* empty css                                                               */\nconst css = {\n  code: \".competition-info.svelte-rlsnlr.svelte-rlsnlr{background:white;padding:1.5rem;border-radius:6px;box-shadow:0 2px 4px rgba(0, 0, 0, 0.1);border-left:4px solid #ff3e00;margin-bottom:2rem}.competition-info.svelte-rlsnlr h2.svelte-rlsnlr{margin:0 0 1rem 0;color:#333;text-transform:none;font-size:1.5rem;font-weight:600}.info-grid.svelte-rlsnlr.svelte-rlsnlr{display:grid;grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));gap:1rem}.info-item.svelte-rlsnlr.svelte-rlsnlr{display:flex;flex-direction:column}.info-label.svelte-rlsnlr.svelte-rlsnlr{font-size:0.875rem;color:#666;margin-bottom:0.25rem}.info-value.svelte-rlsnlr.svelte-rlsnlr{font-size:1.1rem;font-weight:600;color:#333}.status-badge.svelte-rlsnlr.svelte-rlsnlr{display:inline-block;padding:0.25rem 0.75rem;border-radius:12px;font-size:0.875rem;font-weight:500}.status-completed.svelte-rlsnlr.svelte-rlsnlr{background:#dcfce7;color:#166534}.status-judging.svelte-rlsnlr.svelte-rlsnlr{background:#fef3c7;color:#92400e}.status-open.svelte-rlsnlr.svelte-rlsnlr{background:#dbeafe;color:#1d4ed8}.controls.svelte-rlsnlr.svelte-rlsnlr{display:flex;gap:1rem;margin-bottom:2rem;flex-wrap:wrap;align-items:center}.search-input.svelte-rlsnlr.svelte-rlsnlr,.filter-select.svelte-rlsnlr.svelte-rlsnlr{padding:0.75rem;border:1px solid #ddd;border-radius:6px;font-size:1rem;background:white}.search-input.svelte-rlsnlr.svelte-rlsnlr{flex:1;min-width:250px}.filter-select.svelte-rlsnlr.svelte-rlsnlr{min-width:150px}.results-table.svelte-rlsnlr.svelte-rlsnlr{background:white;border-radius:6px;overflow:hidden;box-shadow:0 2px 4px rgba(0, 0, 0, 0.1)}table.svelte-rlsnlr.svelte-rlsnlr{width:100%;border-collapse:collapse}th.svelte-rlsnlr.svelte-rlsnlr{background:#f5f5f5;padding:1rem;text-align:left;font-weight:600;color:#333;border-bottom:2px solid #ddd}td.svelte-rlsnlr.svelte-rlsnlr{padding:1rem;border-bottom:1px solid #eee;vertical-align:top}tr.svelte-rlsnlr.svelte-rlsnlr:hover{background:#f9f9f9}.entry-number.svelte-rlsnlr.svelte-rlsnlr{font-weight:600;color:#ff3e00}.category-badge.svelte-rlsnlr.svelte-rlsnlr{display:inline-block;padding:0.25rem 0.5rem;background:#e5e7eb;border-radius:4px;font-size:0.875rem;font-weight:500}.score-input.svelte-rlsnlr.svelte-rlsnlr{padding:0.5rem;border:1px solid #ddd;border-radius:4px;font-size:0.9rem;width:80px}.placement-select.svelte-rlsnlr.svelte-rlsnlr{padding:0.5rem;border:1px solid #ddd;border-radius:4px;font-size:0.9rem;background:white;width:120px}.notes-input.svelte-rlsnlr.svelte-rlsnlr{width:100%;min-height:60px;padding:0.5rem;border:1px solid #ddd;border-radius:4px;font-size:0.9rem;resize:vertical;font-family:inherit}.status-complete.svelte-rlsnlr.svelte-rlsnlr{color:#059669}.status-pending.svelte-rlsnlr.svelte-rlsnlr{color:#dc2626}.unsaved-indicator.svelte-rlsnlr.svelte-rlsnlr{color:#dc2626;font-size:0.75rem;margin-left:0.5rem}.entry-cards.svelte-rlsnlr.svelte-rlsnlr{display:none}.entry-card.svelte-rlsnlr.svelte-rlsnlr{background:white;border-radius:6px;padding:1.5rem;margin-bottom:1rem;box-shadow:0 2px 4px rgba(0, 0, 0, 0.1);border-left:4px solid #ff3e00}.entry-header.svelte-rlsnlr.svelte-rlsnlr{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.results-inputs.svelte-rlsnlr.svelte-rlsnlr{display:grid;grid-template-columns:1fr 1fr;gap:0.75rem;margin-top:0.75rem}@media(max-width: 768px){.controls.svelte-rlsnlr.svelte-rlsnlr{flex-direction:column;align-items:stretch}.search-input.svelte-rlsnlr.svelte-rlsnlr,.filter-select.svelte-rlsnlr.svelte-rlsnlr{width:100%}.results-table.svelte-rlsnlr.svelte-rlsnlr{display:none}.entry-cards.svelte-rlsnlr.svelte-rlsnlr{display:block}.results-inputs.svelte-rlsnlr.svelte-rlsnlr{grid-template-columns:1fr}.info-grid.svelte-rlsnlr.svelte-rlsnlr{grid-template-columns:1fr}}@media(max-width: 480px){}.brewer-name-hidden.svelte-rlsnlr.svelte-rlsnlr{color:#999;font-style:italic;font-weight:normal}\",\n  map: `{\"version\":3,\"file\":\"+page.svelte\",\"sources\":[\"+page.svelte\"],\"sourcesContent\":[\"<!-- src/routes/officers/manage-competitions/results/[id]/+page.svelte -->\\\\n<script>\\\\n  import { onMount, onDestroy } from 'svelte';\\\\n  import { goto } from '$app/navigation';\\\\n  import { page } from '$app/stores';\\\\n  import { userProfile } from '$lib/stores/userProfile';\\\\n  import { supabase } from '$lib/supabaseClient';\\\\n  import Hero from \\\\\"$lib/components/ui/Hero.svelte\\\\\";\\\\n  import Container from \\\\\"$lib/components/ui/Container.svelte\\\\\";\\\\n  import LoadingSpinner from \\\\\"$lib/components/ui/LoadingSpinner.svelte\\\\\";\\\\n  import EmptyState from \\\\\"$lib/components/ui/EmptyState.svelte\\\\\";\\\\n  import Button from \\\\\"$lib/components/ui/Button.svelte\\\\\";\\\\n  \\\\n  // Check officer status\\\\n  $: if ($userProfile && !$userProfile.is_officer) {\\\\n    goto('/');\\\\n  }\\\\n\\\\n  // Get competition ID from URL\\\\n  $: competitionId = $page.params.id;\\\\n\\\\n  let competition = null;\\\\n  let entries = [];\\\\n  let filteredEntries = [];\\\\n  let categories = [];\\\\n  let isLoading = true;\\\\n  let isSaving = false;\\\\n  let searchQuery = '';\\\\n  let categoryFilter = 'all';\\\\n  let statusFilter = 'all';\\\\n  let unsavedChanges = new Set();\\\\n\\\\n  // Results tracking\\\\n  let resultsData = new Map();\\\\n\\\\n  // Check if current user is Comp Director for displaying brewer names\\\\n  $: isCompDirector = $userProfile?.role === 'competition_director';\\\\n\\\\n  // Helper function to get brewer name display\\\\n  function getBrewerNameDisplay(brewerName) {\\\\n    if (isCompDirector) {\\\\n      return brewerName || 'Unknown';\\\\n    }\\\\n    return 'Hidden'; // Hidden for non-Comp Directors\\\\n  }\\\\n\\\\n  // Helper function to get brewer email display\\\\n  function getBrewerEmailDisplay(brewerEmail) {\\\\n    if (isCompDirector) {\\\\n      return brewerEmail || '';\\\\n    }\\\\n    return 'Hidden'; // Hidden for non-Comp Directors\\\\n  }\\\\n\\\\n  // Helper function to get CSS class for brewer name\\\\n  function getBrewerNameClass() {\\\\n    return isCompDirector ? '' : 'brewer-name-hidden';\\\\n  }\\\\n\\\\n  // Helper function to get beer name display\\\\n  function getBeerNameDisplay(beerName) {\\\\n    if (isCompDirector) {\\\\n      return beerName || 'Unknown Beer';\\\\n    }\\\\n    return 'Hidden'; // Hidden for non-Comp Directors\\\\n  }\\\\n\\\\n  // Helper functions for ranking points calculation\\\\n  function getPointsForRanking(rankPosition) {\\\\n    // Point system: 1st=3pts, 2nd=2pts, 3rd=1pt, others=0pts\\\\n    switch (rankPosition) {\\\\n      case 1: return 3;\\\\n      case 2: return 2;\\\\n      case 3: return 1;\\\\n      default: return 0;\\\\n    }\\\\n  }\\\\n\\\\n  function calculateEntryPoints(entryId, categoryId, rankings, rankingGroups) {\\\\n    // Get all rankings for this entry from all judges\\\\n    let entryRankings = [];\\\\n    \\\\n    // Check if entry belongs to a custom ranking group\\\\n    let groupId = null;\\\\n    for (const group of rankingGroups) {\\\\n      let categoryIds;\\\\n      try {\\\\n        categoryIds = Array.isArray(group.bjcp_category_ids) \\\\n          ? group.bjcp_category_ids \\\\n          : JSON.parse(group.bjcp_category_ids);\\\\n      } catch (e) {\\\\n        console.warn('Failed to parse bjcp_category_ids for group:', group.id);\\\\n        continue;\\\\n      }\\\\n      \\\\n      if (categoryIds.includes(categoryId)) {\\\\n        groupId = group.id;\\\\n        break;\\\\n      }\\\\n    }\\\\n    \\\\n    if (groupId) {\\\\n      // For custom ranking groups\\\\n      entryRankings = rankings.filter(r => \\\\n        r.entry_id === entryId && r.ranking_group_id === groupId\\\\n      );\\\\n    } else {\\\\n      // For individual categories\\\\n      entryRankings = rankings.filter(r => \\\\n        r.entry_id === entryId && r.bjcp_category_id === categoryId\\\\n      );\\\\n    }\\\\n\\\\n    // Calculate total points from all judges\\\\n    const totalPoints = entryRankings.reduce((sum, ranking) => {\\\\n      return sum + getPointsForRanking(ranking.rank_position);\\\\n    }, 0);\\\\n\\\\n    return {\\\\n      totalPoints,\\\\n      judgeCount: entryRankings.length,\\\\n      rankings: entryRankings\\\\n    };\\\\n  }\\\\n\\\\n  onMount(() => {\\\\n    loadCompetitionAndEntries();\\\\n    setupEventHandlers();\\\\n  });\\\\n\\\\n  // Removed tab switching reload - causes issues with Supabase tab switching\\\\n  function setupEventHandlers() {\\\\n    // Tab visibility handling removed for better Supabase compatibility\\\\n    return () => {\\\\n      // No cleanup needed now\\\\n    };\\\\n  }\\\\n\\\\n  onDestroy(() => {\\\\n    // Cleanup handled by setupEventHandlers return\\\\n  });\\\\n\\\\n  // Load competition and entries data\\\\n  async function loadCompetitionAndEntries() {\\\\n    isLoading = true;\\\\n    \\\\n    try {\\\\n      // Load competition details\\\\n      const { data: compData, error: compError } = await supabase\\\\n        .from('competitions')\\\\n        .select('*')\\\\n        .eq('id', competitionId)\\\\n        .single();\\\\n      \\\\n      if (compError) throw compError;\\\\n      competition = compData;\\\\n\\\\n      // Load entries with separate queries to avoid schema cache issues\\\\n      const { data: entriesData, error: entriesError } = await supabase\\\\n        .from('competition_entries')\\\\n        .select('*')\\\\n        .eq('competition_id', competitionId)\\\\n        .order('entry_number');\\\\n      \\\\n      if (entriesError) throw entriesError;\\\\n\\\\n      if (!entriesData || entriesData.length === 0) {\\\\n        entries = [];\\\\n        filteredEntries = [];\\\\n        isLoading = false;\\\\n        return;\\\\n      }\\\\n\\\\n      // Get member data\\\\n      const memberIds = [...new Set(entriesData.map(entry => entry.member_id))];\\\\n      const { data: membersData } = await supabase\\\\n        .from('members')\\\\n        .select('id, name, email')\\\\n        .in('id', memberIds);\\\\n\\\\n      // Get category data  \\\\n      const categoryIds = [...new Set(entriesData.map(entry => entry.bjcp_category_id).filter(Boolean))];\\\\n      const { data: categoriesData } = await supabase\\\\n        .from('bjcp_categories')\\\\n        .select('id, category_name, category_number, subcategory_letter, subcategory_name')\\\\n        .in('id', categoryIds);\\\\n\\\\n      // Get existing results\\\\n      const { data: resultsData, error: resultsError } = await supabase\\\\n        .from('competition_results')\\\\n        .select('*')\\\\n        .eq('competition_id', competitionId);\\\\n\\\\n      if (resultsError) {\\\\n        console.warn('No existing results found:', resultsError);\\\\n      }\\\\n\\\\n      // Load rankings data\\\\n      const { data: rankingsData, error: rankingsError } = await supabase\\\\n        .from('competition_rankings')\\\\n        .select(\\`\\\\n          *,\\\\n          entry:competition_entries!inner(id, entry_number, beer_name),\\\\n          judge:members!competition_rankings_judge_id_fkey(id, name),\\\\n          category:bjcp_categories(category_name, category_number, subcategory_letter),\\\\n          ranking_group:competition_ranking_groups(id, group_name, group_description)\\\\n        \\`)\\\\n        .eq('competition_id', competitionId)\\\\n        .order('bjcp_category_id')\\\\n        .order('rank_position');\\\\n\\\\n      const rankings = rankingsData || [];\\\\n\\\\n      // Load ranking groups for custom category system\\\\n      const { data: groupsData, error: groupsError } = await supabase\\\\n        .from('competition_ranking_groups')\\\\n        .select('*')\\\\n        .eq('competition_id', competitionId)\\\\n        .order('group_order');\\\\n\\\\n      const rankingGroups = groupsData || [];\\\\n\\\\n      // Combine all data manually\\\\n      entries = entriesData.map(entry => {\\\\n        const member = membersData?.find(m => m.id === entry.member_id);\\\\n        const category = categoriesData?.find(c => c.id === entry.bjcp_category_id);\\\\n        const result = resultsData?.find(r => r.entry_id === entry.id);\\\\n\\\\n        // Calculate ranking points for this entry\\\\n        const rankingPoints = calculateEntryPoints(entry.id, entry.bjcp_category_id, rankings, rankingGroups);\\\\n\\\\n        return {\\\\n          ...entry,\\\\n          member_name: member?.name || 'Unknown',\\\\n          member_email: member?.email || '',\\\\n          category_name: category?.category_name || 'Unknown Category',\\\\n          category_number: category?.category_number || '',\\\\n          subcategory_letter: category?.subcategory_letter || '',\\\\n          subcategory_name: category?.subcategory_name || '',\\\\n          category_display: category \\\\n            ? \\`\\${category.category_number}\\${category.subcategory_letter || ''} - \\${category.category_name}\\`\\\\n            : 'Unknown Category',\\\\n          // Results data\\\\n          score: result?.score || '',\\\\n          placement: result?.placement || '',\\\\n          judge_notes: result?.judge_notes || '',\\\\n          has_results: !!result,\\\\n          // Ranking points\\\\n          ranking_points: rankingPoints.totalPoints,\\\\n          judge_count: rankingPoints.judgeCount\\\\n        };\\\\n      });\\\\n\\\\n      // Extract unique categories for filter\\\\n      categories = [...new Set(entries.map(e => ({\\\\n        value: \\`\\${e.category_number}\\${e.subcategory_letter}\\`,\\\\n        label: e.category_display\\\\n      }))).values()].sort((a, b) => a.value.localeCompare(b.value));\\\\n\\\\n      filterEntries();\\\\n      \\\\n    } catch (err) {\\\\n      console.error('Error loading data:', err);\\\\n      alert('Failed to load competition entries');\\\\n      goto('/officers/manage-competitions');\\\\n    } finally {\\\\n      isLoading = false;\\\\n    }\\\\n  }\\\\n\\\\n  // Filter entries based on search and filters\\\\n  function filterEntries() {\\\\n    let filtered = [...entries];\\\\n    \\\\n    // Apply search filter\\\\n    if (searchQuery.trim()) {\\\\n      const query = searchQuery.toLowerCase();\\\\n      const currentUserProfile = $userProfile;\\\\n      const isCompDirector = currentUserProfile?.role === 'competition_director';\\\\n\\\\n      filtered = filtered.filter(entry =>\\\\n        entry.entry_number?.toLowerCase().includes(query) ||\\\\n        entry.category_display?.toLowerCase().includes(query) ||\\\\n        // Only allow member name/email/beer name search for Competition Directors\\\\n        (isCompDirector && (\\\\n          entry.member_name?.toLowerCase().includes(query) ||\\\\n          entry.member_email?.toLowerCase().includes(query) ||\\\\n          entry.beer_name?.toLowerCase().includes(query)\\\\n        ))\\\\n      );\\\\n    }\\\\n    \\\\n    // Apply category filter\\\\n    if (categoryFilter !== 'all') {\\\\n      filtered = filtered.filter(entry => \\\\n        \\`\\${entry.category_number}\\${entry.subcategory_letter}\\` === categoryFilter\\\\n      );\\\\n    }\\\\n\\\\n    // Apply status filter\\\\n    if (statusFilter !== 'all') {\\\\n      if (statusFilter === 'complete') {\\\\n        filtered = filtered.filter(entry => entry.has_results && entry.score);\\\\n      } else if (statusFilter === 'pending') {\\\\n        filtered = filtered.filter(entry => !entry.has_results || !entry.score);\\\\n      }\\\\n    }\\\\n    \\\\n    filteredEntries = filtered;\\\\n  }\\\\n\\\\n  // Update entry results\\\\n  function updateEntryResults(entryId, field, value) {\\\\n    const entry = entries.find(e => e.id === entryId);\\\\n    if (entry) {\\\\n      entry[field] = value;\\\\n      unsavedChanges.add(entryId);\\\\n      // Trigger Svelte reactivity for Set\\\\n      unsavedChanges = unsavedChanges;\\\\n      \\\\n      // Update has_results status\\\\n      entry.has_results = entry.score && entry.score > 0;\\\\n      \\\\n      // Re-filter to update status indicators\\\\n      filterEntries();\\\\n    }\\\\n  }\\\\n\\\\n  // Save individual entry results\\\\n  async function saveEntryResults(entryId, skipToast = false) {\\\\n    const entry = entries.find(e => e.id === entryId);\\\\n    if (!entry) {\\\\n      throw new Error(\\`Entry with ID \\${entryId} not found\\`);\\\\n    }\\\\n\\\\n    const wasCalledFromSaveAll = skipToast;\\\\n    if (!wasCalledFromSaveAll) {\\\\n      isSaving = true;\\\\n    }\\\\n\\\\n    try {\\\\n      const resultData = {\\\\n        competition_id: competitionId,\\\\n        entry_id: entryId,\\\\n        score: entry.score || null,\\\\n        placement: entry.placement || null,\\\\n        judge_notes: entry.judge_notes || null,\\\\n        updated_at: new Date().toISOString()\\\\n      };\\\\n\\\\n      // Check if result exists\\\\n      const { data: existingResult } = await supabase\\\\n        .from('competition_results')\\\\n        .select('id')\\\\n        .eq('competition_id', competitionId)\\\\n        .eq('entry_id', entryId)\\\\n        .single();\\\\n\\\\n      let error;\\\\n      if (existingResult) {\\\\n        // Update existing result\\\\n        const result = await supabase\\\\n          .from('competition_results')\\\\n          .update(resultData)\\\\n          .eq('id', existingResult.id);\\\\n        error = result.error;\\\\n      } else {\\\\n        // Insert new result\\\\n        const result = await supabase\\\\n          .from('competition_results')\\\\n          .insert([resultData]);\\\\n        error = result.error;\\\\n      }\\\\n\\\\n      if (error) throw error;\\\\n\\\\n      unsavedChanges.delete(entryId);\\\\n      // Trigger Svelte reactivity for Set\\\\n      unsavedChanges = unsavedChanges;\\\\n      entry.has_results = true;\\\\n      \\\\n      // Show success feedback only for individual saves\\\\n      if (!skipToast) {\\\\n        showToast('Results saved successfully', 'success');\\\\n      }\\\\n\\\\n    } catch (err) {\\\\n      console.error('Error saving results:', err);\\\\n      if (!skipToast) {\\\\n        alert('Failed to save results');\\\\n      }\\\\n      throw err; // Re-throw for saveAllResults to handle\\\\n    } finally {\\\\n      if (!wasCalledFromSaveAll) {\\\\n        isSaving = false;\\\\n      }\\\\n    }\\\\n  }\\\\n\\\\n  // Save all results\\\\n  async function saveAllResults() {\\\\n    if (unsavedChanges.size === 0) {\\\\n      alert('No unsaved changes to save');\\\\n      return;\\\\n    }\\\\n\\\\n    try {\\\\n      isSaving = true;\\\\n      let successCount = 0;\\\\n      let errorCount = 0;\\\\n      \\\\n      // Process each entry sequentially to avoid race conditions\\\\n      for (const entryId of Array.from(unsavedChanges)) {\\\\n        try {\\\\n          await saveEntryResults(entryId, true);\\\\n          successCount++;\\\\n        } catch (err) {\\\\n          console.error(\\`Error saving entry \\${entryId}:\\`, err);\\\\n          errorCount++;\\\\n        }\\\\n      }\\\\n      \\\\n      if (errorCount === 0) {\\\\n        showToast(\\`All \\${successCount} results saved successfully\\`, 'success');\\\\n      } else {\\\\n        showToast(\\`\\${successCount} results saved, \\${errorCount} failed\\`, errorCount > successCount ? 'error' : 'success');\\\\n      }\\\\n    } catch (err) {\\\\n      console.error('Error saving all results:', err);\\\\n      alert('Failed to save all results');\\\\n    } finally {\\\\n      isSaving = false;\\\\n    }\\\\n  }\\\\n\\\\n  // Publish results (make them visible to public)\\\\n  async function publishResults() {\\\\n    if (!confirm('Are you sure you want to publish these results? This will make them visible to all members.')) {\\\\n      return;\\\\n    }\\\\n\\\\n    try {\\\\n      isSaving = true;\\\\n\\\\n      const { error } = await supabase\\\\n        .from('competitions')\\\\n        .update({ \\\\n          results_published: true,\\\\n          updated_at: new Date().toISOString()\\\\n        })\\\\n        .eq('id', competitionId);\\\\n\\\\n      if (error) throw error;\\\\n\\\\n      competition.results_published = true;\\\\n      showToast('Results published successfully', 'success');\\\\n\\\\n    } catch (err) {\\\\n      console.error('Error publishing results:', err);\\\\n      alert('Failed to publish results');\\\\n    } finally {\\\\n      isSaving = false;\\\\n    }\\\\n  }\\\\n\\\\n  // Simple toast notification\\\\n  function showToast(message, type = 'info') {\\\\n    // Create toast element\\\\n    const toast = document.createElement('div');\\\\n    toast.textContent = message;\\\\n    toast.style.cssText = \\`\\\\n      position: fixed;\\\\n      top: 20px;\\\\n      right: 20px;\\\\n      padding: 1rem 1.5rem;\\\\n      border-radius: 6px;\\\\n      color: white;\\\\n      font-weight: 500;\\\\n      z-index: 1000;\\\\n      background: \\${type === 'success' ? '#059669' : type === 'error' ? '#dc2626' : '#6b7280'};\\\\n      box-shadow: 0 4px 12px rgba(0,0,0,0.15);\\\\n    \\`;\\\\n\\\\n    document.body.appendChild(toast);\\\\n\\\\n    // Remove after 3 seconds\\\\n    setTimeout(() => {\\\\n      document.body.removeChild(toast);\\\\n    }, 3000);\\\\n  }\\\\n\\\\n  // Get completion stats\\\\n  $: completionStats = {\\\\n    total: entries.length,\\\\n    completed: entries.filter(e => e.has_results && e.score).length,\\\\n    get percentage() {\\\\n      return this.total > 0 ? Math.round((this.completed / this.total) * 100) : 0;\\\\n    }\\\\n  };\\\\n\\\\n  // Reactive statements\\\\n  $: filterEntries(), searchQuery, categoryFilter, statusFilter;\\\\n<\\/script>\\\\n\\\\n<style>\\\\n\\\\n  .competition-info {\\\\n    background: white;\\\\n    padding: 1.5rem;\\\\n    border-radius: 6px;\\\\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\\\\n    border-left: 4px solid #ff3e00;\\\\n    margin-bottom: 2rem;\\\\n  }\\\\n\\\\n  .competition-info h2 {\\\\n    margin: 0 0 1rem 0;\\\\n    color: #333;\\\\n    text-transform: none;\\\\n    font-size: 1.5rem;\\\\n    font-weight: 600;\\\\n  }\\\\n\\\\n  .info-grid {\\\\n    display: grid;\\\\n    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\\\\n    gap: 1rem;\\\\n  }\\\\n\\\\n  .info-item {\\\\n    display: flex;\\\\n    flex-direction: column;\\\\n  }\\\\n\\\\n  .info-label {\\\\n    font-size: 0.875rem;\\\\n    color: #666;\\\\n    margin-bottom: 0.25rem;\\\\n  }\\\\n\\\\n  .info-value {\\\\n    font-size: 1.1rem;\\\\n    font-weight: 600;\\\\n    color: #333;\\\\n  }\\\\n\\\\n  .status-badge {\\\\n    display: inline-block;\\\\n    padding: 0.25rem 0.75rem;\\\\n    border-radius: 12px;\\\\n    font-size: 0.875rem;\\\\n    font-weight: 500;\\\\n  }\\\\n\\\\n  .status-completed {\\\\n    background: #dcfce7;\\\\n    color: #166534;\\\\n  }\\\\n\\\\n  .status-judging {\\\\n    background: #fef3c7;\\\\n    color: #92400e;\\\\n  }\\\\n\\\\n  .status-open {\\\\n    background: #dbeafe;\\\\n    color: #1d4ed8;\\\\n  }\\\\n\\\\n  .controls {\\\\n    display: flex;\\\\n    gap: 1rem;\\\\n    margin-bottom: 2rem;\\\\n    flex-wrap: wrap;\\\\n    align-items: center;\\\\n  }\\\\n\\\\n  .search-input, .filter-select {\\\\n    padding: 0.75rem;\\\\n    border: 1px solid #ddd;\\\\n    border-radius: 6px;\\\\n    font-size: 1rem;\\\\n    background: white;\\\\n  }\\\\n\\\\n  .search-input {\\\\n    flex: 1;\\\\n    min-width: 250px;\\\\n  }\\\\n\\\\n  .filter-select {\\\\n    min-width: 150px;\\\\n  }\\\\n\\\\n\\\\n  .results-table {\\\\n    background: white;\\\\n    border-radius: 6px;\\\\n    overflow: hidden;\\\\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\\\\n  }\\\\n\\\\n  table {\\\\n    width: 100%;\\\\n    border-collapse: collapse;\\\\n  }\\\\n\\\\n  th {\\\\n    background: #f5f5f5;\\\\n    padding: 1rem;\\\\n    text-align: left;\\\\n    font-weight: 600;\\\\n    color: #333;\\\\n    border-bottom: 2px solid #ddd;\\\\n  }\\\\n\\\\n  td {\\\\n    padding: 1rem;\\\\n    border-bottom: 1px solid #eee;\\\\n    vertical-align: top;\\\\n  }\\\\n\\\\n  tr:hover {\\\\n    background: #f9f9f9;\\\\n  }\\\\n\\\\n  .entry-number {\\\\n    font-weight: 600;\\\\n    color: #ff3e00;\\\\n  }\\\\n\\\\n  .category-badge {\\\\n    display: inline-block;\\\\n    padding: 0.25rem 0.5rem;\\\\n    background: #e5e7eb;\\\\n    border-radius: 4px;\\\\n    font-size: 0.875rem;\\\\n    font-weight: 500;\\\\n  }\\\\n\\\\n  .score-input {\\\\n    padding: 0.5rem;\\\\n    border: 1px solid #ddd;\\\\n    border-radius: 4px;\\\\n    font-size: 0.9rem;\\\\n    width: 80px;\\\\n  }\\\\n\\\\n  .placement-select {\\\\n    padding: 0.5rem;\\\\n    border: 1px solid #ddd;\\\\n    border-radius: 4px;\\\\n    font-size: 0.9rem;\\\\n    background: white;\\\\n    width: 120px;\\\\n  }\\\\n\\\\n  .notes-input {\\\\n    width: 100%;\\\\n    min-height: 60px;\\\\n    padding: 0.5rem;\\\\n    border: 1px solid #ddd;\\\\n    border-radius: 4px;\\\\n    font-size: 0.9rem;\\\\n    resize: vertical;\\\\n    font-family: inherit;\\\\n  }\\\\n\\\\n  .status-complete {\\\\n    color: #059669;\\\\n  }\\\\n\\\\n  .status-pending {\\\\n    color: #dc2626;\\\\n  }\\\\n\\\\n  .unsaved-indicator {\\\\n    color: #dc2626;\\\\n    font-size: 0.75rem;\\\\n    margin-left: 0.5rem;\\\\n  }\\\\n\\\\n\\\\n  /* Entry cards for mobile */\\\\n  .entry-cards {\\\\n    display: none;\\\\n  }\\\\n\\\\n  .entry-card {\\\\n    background: white;\\\\n    border-radius: 6px;\\\\n    padding: 1.5rem;\\\\n    margin-bottom: 1rem;\\\\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\\\\n    border-left: 4px solid #ff3e00;\\\\n  }\\\\n\\\\n  .entry-header {\\\\n    display: flex;\\\\n    justify-content: space-between;\\\\n    align-items: center;\\\\n    margin-bottom: 1rem;\\\\n  }\\\\n\\\\n  .results-inputs {\\\\n    display: grid;\\\\n    grid-template-columns: 1fr 1fr;\\\\n    gap: 0.75rem;\\\\n    margin-top: 0.75rem;\\\\n  }\\\\n\\\\n  /* Mobile responsiveness */\\\\n  @media (max-width: 768px) {\\\\n    .controls {\\\\n      flex-direction: column;\\\\n      align-items: stretch;\\\\n    }\\\\n\\\\n    .search-input, .filter-select {\\\\n      width: 100%;\\\\n    }\\\\n\\\\n    .results-table {\\\\n      display: none;\\\\n    }\\\\n\\\\n    .entry-cards {\\\\n      display: block;\\\\n    }\\\\n\\\\n    .results-inputs {\\\\n      grid-template-columns: 1fr;\\\\n    }\\\\n\\\\n    .info-grid {\\\\n      grid-template-columns: 1fr;\\\\n    }\\\\n  }\\\\n\\\\n  @media (max-width: 480px) {\\\\n  }\\\\n\\\\n  /* Brewer name privacy styles */\\\\n  .brewer-name-hidden {\\\\n    color: #999;\\\\n    font-style: italic;\\\\n    font-weight: normal;\\\\n  }\\\\n</style>\\\\n\\\\n<Container size=\\\\\"xl\\\\\">\\\\n  <Hero title=\\\\\"Enter Results\\\\\" subtitle=\\\\\"Record judging scores and placements\\\\\" icon=\\\\\"🏆\\\\\" center={true} />\\\\n\\\\n  {#if isLoading}\\\\n    <LoadingSpinner message=\\\\\"Loading competition entries...\\\\\" />\\\\n  {:else if competition}\\\\n    <!-- Competition Info -->\\\\n    <div class=\\\\\"competition-info\\\\\">\\\\n      <h2>{competition.name}</h2>\\\\n      <div class=\\\\\"info-grid\\\\\">\\\\n        <div class=\\\\\"info-item\\\\\">\\\\n          <span class=\\\\\"info-label\\\\\">Status</span>\\\\n          <span class=\\\\\"info-value\\\\\">\\\\n            <span class=\\\\\"status-badge {competition.results_published ? 'status-completed' : 'status-judging'}\\\\\">\\\\n              {competition.results_published ? 'Results Published' : 'Judging In Progress'}\\\\n            </span>\\\\n          </span>\\\\n        </div>\\\\n        <div class=\\\\\"info-item\\\\\">\\\\n          <span class=\\\\\"info-label\\\\\">Total Entries</span>\\\\n          <span class=\\\\\"info-value\\\\\">{completionStats.total}</span>\\\\n        </div>\\\\n        <div class=\\\\\"info-item\\\\\">\\\\n          <span class=\\\\\"info-label\\\\\">Results Entered</span>\\\\n          <span class=\\\\\"info-value\\\\\">{completionStats.completed} of {completionStats.total} ({completionStats.percentage}%)</span>\\\\n        </div>\\\\n        <div class=\\\\\"info-item\\\\\">\\\\n          <span class=\\\\\"info-label\\\\\">Unsaved Changes</span>\\\\n          <span class=\\\\\"info-value {unsavedChanges.size > 0 ? 'status-pending' : 'status-complete'}\\\\\">{unsavedChanges.size}</span>\\\\n        </div>\\\\n      </div>\\\\n    </div>\\\\n\\\\n    <!-- Controls -->\\\\n    <div class=\\\\\"controls\\\\\">\\\\n      <input\\\\n        type=\\\\\"text\\\\\"\\\\n        class=\\\\\"search-input\\\\\"\\\\n        placeholder={isCompDirector ? \\\\\"Search by entry number, member, or beer name...\\\\\" : \\\\\"Search by entry number or category...\\\\\"}\\\\n        bind:value={searchQuery}\\\\n      />\\\\n      <select class=\\\\\"filter-select\\\\\" bind:value={categoryFilter}>\\\\n        <option value=\\\\\"all\\\\\">All Categories</option>\\\\n        {#each categories as category}\\\\n          <option value={category.value}>{category.label}</option>\\\\n        {/each}\\\\n      </select>\\\\n      <select class=\\\\\"filter-select\\\\\" bind:value={statusFilter}>\\\\n        <option value=\\\\\"all\\\\\">All Status</option>\\\\n        <option value=\\\\\"pending\\\\\">Results Pending</option>\\\\n        <option value=\\\\\"complete\\\\\">Results Complete</option>\\\\n      </select>\\\\n      <Button\\\\n        variant=\\\\\"success\\\\\"\\\\n        on:click={saveAllResults}\\\\n        disabled={isSaving || unsavedChanges.size === 0}\\\\n      >\\\\n        {isSaving ? 'Saving...' : \\`Save All Results \\${unsavedChanges.size > 0 ? \\`(\\${unsavedChanges.size})\\` : ''}\\`}\\\\n      </Button>\\\\n      <Button\\\\n        variant=\\\\\"primary\\\\\"\\\\n        on:click={publishResults}\\\\n        disabled={isSaving || competition.results_published}\\\\n      >\\\\n        {competition.results_published ? 'Results Published' : 'Publish Results'}\\\\n      </Button>\\\\n      <Button variant=\\\\\"secondary\\\\\" on:click={() => goto('/officers/manage-competitions')}>\\\\n        Back\\\\n      </Button>\\\\n    </div>\\\\n\\\\n    {#if filteredEntries.length === 0}\\\\n      <EmptyState\\\\n        icon=\\\\\"🏆\\\\\"\\\\n        title=\\\\\"No entries found\\\\\"\\\\n        message={searchQuery || categoryFilter !== 'all' || statusFilter !== 'all' ? 'Try adjusting your search or filters' : 'No entries have been submitted yet'}\\\\n      />\\\\n    {:else}\\\\n      <!-- Desktop Table View -->\\\\n      <div class=\\\\\"results-table\\\\\">\\\\n        <table>\\\\n          <thead>\\\\n            <tr>\\\\n              <th>Entry #</th>\\\\n              <th>Member</th>\\\\n              <th>Beer Name</th>\\\\n              <th>Category</th>\\\\n              <th>Ranking Points</th>\\\\n              <th>Score</th>\\\\n              <th>Placement</th>\\\\n              <th>Status</th>\\\\n              <th>Actions</th>\\\\n            </tr>\\\\n          </thead>\\\\n          <tbody>\\\\n            {#each filteredEntries as entry}\\\\n              <tr>\\\\n                <td><span class=\\\\\"entry-number\\\\\">{entry.entry_number}</span></td>\\\\n                <td>\\\\n                  <div class=\\\\\"{getBrewerNameClass()}\\\\\">{getBrewerNameDisplay(entry.member_name)}</div>\\\\n                  <small class=\\\\\"{getBrewerNameClass()}\\\\\">{getBrewerEmailDisplay(entry.member_email)}</small>\\\\n                </td>\\\\n                <td class=\\\\\"{getBrewerNameClass()}\\\\\">{getBeerNameDisplay(entry.beer_name)}</td>\\\\n                <td><span class=\\\\\"category-badge\\\\\">{entry.category_display}</span></td>\\\\n                <td>\\\\n                  <span style=\\\\\"font-weight: 600; color: {entry.ranking_points > 0 ? '#059669' : '#666'};\\\\\">\\\\n                    {entry.ranking_points} {entry.ranking_points === 1 ? 'pt' : 'pts'}\\\\n                  </span>\\\\n                  {#if entry.judge_count > 0}\\\\n                    <br><small style=\\\\\"color: #666;\\\\\">{entry.judge_count} judge{entry.judge_count === 1 ? '' : 's'}</small>\\\\n                  {/if}\\\\n                </td>\\\\n                <td>\\\\n                  <input\\\\n                    type=\\\\\"number\\\\\"\\\\n                    class=\\\\\"score-input\\\\\"\\\\n                    placeholder=\\\\\"0-50\\\\\"\\\\n                    min=\\\\\"0\\\\\"\\\\n                    max=\\\\\"50\\\\\"\\\\n                    bind:value={entry.score}\\\\n                    on:input={() => updateEntryResults(entry.id, 'score', entry.score)}\\\\n                  />\\\\n                </td>\\\\n                <td>\\\\n                  <select \\\\n                    class=\\\\\"placement-select\\\\\"\\\\n                    bind:value={entry.placement}\\\\n                    on:change={() => updateEntryResults(entry.id, 'placement', entry.placement)}\\\\n                  >\\\\n                    <option value=\\\\\"\\\\\">No Placement</option>\\\\n                    <option value=\\\\\"1\\\\\">1st Place</option>\\\\n                    <option value=\\\\\"2\\\\\">2nd Place</option>\\\\n                    <option value=\\\\\"3\\\\\">3rd Place</option>\\\\n                    <option value=\\\\\"HM\\\\\">Honorable Mention</option>\\\\n                  </select>\\\\n                </td>\\\\n                <td>\\\\n                  <span class=\\\\\"{entry.has_results && entry.score ? 'status-complete' : 'status-pending'}\\\\\">\\\\n                    {entry.has_results && entry.score ? '✅ Complete' : '❌ Pending'}\\\\n                  </span>\\\\n                  {#if unsavedChanges.has(entry.id)}\\\\n                    <span class=\\\\\"unsaved-indicator\\\\\">*</span>\\\\n                  {/if}\\\\n                </td>\\\\n                <td>\\\\n                  <button \\\\n                    class=\\\\\"btn btn-primary\\\\\" \\\\n                    style=\\\\\"padding: 0.4rem 0.8rem; font-size: 0.85rem;\\\\\"\\\\n                    on:click={() => saveEntryResults(entry.id)}\\\\n                    disabled={isSaving}\\\\n                  >\\\\n                    {isSaving ? 'Saving...' : 'Save'}\\\\n                  </button>\\\\n                </td>\\\\n              </tr>\\\\n            {/each}\\\\n          </tbody>\\\\n        </table>\\\\n      </div>\\\\n\\\\n      <!-- Mobile Card View -->\\\\n      <div class=\\\\\"entry-cards\\\\\">\\\\n        {#each filteredEntries as entry}\\\\n          <div class=\\\\\"entry-card\\\\\">\\\\n            <div class=\\\\\"entry-header\\\\\">\\\\n              <span class=\\\\\"entry-number\\\\\">Entry #{entry.entry_number}</span>\\\\n              <span class=\\\\\"{entry.has_results && entry.score ? 'status-complete' : 'status-pending'}\\\\\">\\\\n                {entry.has_results && entry.score ? '✅ Complete' : '❌ Pending'}\\\\n                {#if unsavedChanges.has(entry.id)}\\\\n                  <span class=\\\\\"unsaved-indicator\\\\\">*</span>\\\\n                {/if}\\\\n              </span>\\\\n            </div>\\\\n            <div style=\\\\\"margin-bottom: 1rem;\\\\\">\\\\n              <div class=\\\\\"{getBrewerNameClass()}\\\\\"><strong>{getBrewerNameDisplay(entry.member_name)}</strong></div>\\\\n              <div class=\\\\\"{getBrewerNameClass()}\\\\\">{getBeerNameDisplay(entry.beer_name)}</div>\\\\n              <span class=\\\\\"category-badge\\\\\">{entry.category_display}</span>\\\\n              <div style=\\\\\"margin-top: 0.5rem;\\\\\">\\\\n                <span style=\\\\\"font-size: 0.875rem; color: #666;\\\\\">Ranking Points: </span>\\\\n                <span style=\\\\\"font-weight: 600; color: {entry.ranking_points > 0 ? '#059669' : '#666'};\\\\\">\\\\n                  {entry.ranking_points} {entry.ranking_points === 1 ? 'pt' : 'pts'}\\\\n                </span>\\\\n                {#if entry.judge_count > 0}\\\\n                  <span style=\\\\\"font-size: 0.875rem; color: #666;\\\\\"> ({entry.judge_count} judge{entry.judge_count === 1 ? '' : 's'})</span>\\\\n                {/if}\\\\n              </div>\\\\n            </div>\\\\n            <div class=\\\\\"results-inputs\\\\\">\\\\n              <div>\\\\n                <label style=\\\\\"display: block; font-size: 0.875rem; margin-bottom: 0.25rem; color: #666;\\\\\">Score (0-50)</label>\\\\n                <input\\\\n                  type=\\\\\"number\\\\\"\\\\n                  class=\\\\\"score-input\\\\\"\\\\n                  placeholder=\\\\\"Enter score\\\\\"\\\\n                  min=\\\\\"0\\\\\"\\\\n                  max=\\\\\"50\\\\\"\\\\n                  style=\\\\\"width: 100%;\\\\\"\\\\n                  bind:value={entry.score}\\\\n                  on:input={() => updateEntryResults(entry.id, 'score', entry.score)}\\\\n                />\\\\n              </div>\\\\n              <div>\\\\n                <label style=\\\\\"display: block; font-size: 0.875rem; margin-bottom: 0.25rem; color: #666;\\\\\">Placement</label>\\\\n                <select \\\\n                  class=\\\\\"placement-select\\\\\" \\\\n                  style=\\\\\"width: 100%;\\\\\"\\\\n                  bind:value={entry.placement}\\\\n                  on:change={() => updateEntryResults(entry.id, 'placement', entry.placement)}\\\\n                >\\\\n                  <option value=\\\\\"\\\\\">No Placement</option>\\\\n                  <option value=\\\\\"1\\\\\">1st Place</option>\\\\n                  <option value=\\\\\"2\\\\\">2nd Place</option>\\\\n                  <option value=\\\\\"3\\\\\">3rd Place</option>\\\\n                  <option value=\\\\\"HM\\\\\">Honorable Mention</option>\\\\n                </select>\\\\n              </div>\\\\n            </div>\\\\n            <div style=\\\\\"margin-top: 1rem;\\\\\">\\\\n              <label style=\\\\\"display: block; font-size: 0.875rem; margin-bottom: 0.25rem; color: #666;\\\\\">Judge Notes</label>\\\\n              <textarea\\\\n                class=\\\\\"notes-input\\\\\"\\\\n                placeholder=\\\\\"Optional judging notes...\\\\\"\\\\n                bind:value={entry.judge_notes}\\\\n                on:input={() => updateEntryResults(entry.id, 'judge_notes', entry.judge_notes)}\\\\n              ></textarea>\\\\n            </div>\\\\n            <button \\\\n              class=\\\\\"btn btn-primary\\\\\" \\\\n              style=\\\\\"margin-top: 1rem; width: 100%;\\\\\"\\\\n              on:click={() => saveEntryResults(entry.id)}\\\\n              disabled={isSaving}\\\\n            >\\\\n              {isSaving ? 'Saving Results...' : 'Save Results'}\\\\n            </button>\\\\n          </div>\\\\n        {/each}\\\\n      </div>\\\\n    {/if}\\\\n  {/if}\\\\n</Container>\"],\"names\":[],\"mappings\":\"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\"}`\n};\nconst Page = create_ssr_component(($$result, $$props, $$bindings, slots) => {\n  let $userProfile, $$unsubscribe_userProfile;\n  let $page, $$unsubscribe_page;\n  $$unsubscribe_userProfile = subscribe(userProfile, (value) => $userProfile = value);\n  $$unsubscribe_page = subscribe(page, (value) => $page = value);\n  let entries = [];\n  let searchQuery = \"\";\n  onDestroy(() => {\n  });\n  function filterEntries() {\n    let filtered = [...entries];\n    if (searchQuery.trim()) {\n      const query = searchQuery.toLowerCase();\n      const currentUserProfile = $userProfile;\n      const isCompDirector = currentUserProfile?.role === \"competition_director\";\n      filtered = filtered.filter((entry) => entry.entry_number?.toLowerCase().includes(query) || entry.category_display?.toLowerCase().includes(query) || // Only allow member name/email/beer name search for Competition Directors\n      isCompDirector && (entry.member_name?.toLowerCase().includes(query) || entry.member_email?.toLowerCase().includes(query) || entry.beer_name?.toLowerCase().includes(query)));\n    }\n  }\n  $$result.css.add(css);\n  {\n    if ($userProfile && !$userProfile.is_officer) {\n      goto();\n    }\n  }\n  $page.params.id;\n  $userProfile?.role === \"competition_director\";\n  ({\n    total: entries.length,\n    completed: entries.filter((e) => e.has_results && e.score).length,\n    get percentage() {\n      return this.total > 0 ? Math.round(this.completed / this.total * 100) : 0;\n    }\n  });\n  {\n    filterEntries();\n  }\n  $$unsubscribe_userProfile();\n  $$unsubscribe_page();\n  return `   ${validate_component(Container, \"Container\").$$render($$result, { size: \"xl\" }, {}, {\n    default: () => {\n      return `${validate_component(Hero, \"Hero\").$$render(\n        $$result,\n        {\n          title: \"Enter Results\",\n          subtitle: \"Record judging scores and placements\",\n          icon: \"🏆\",\n          center: true\n        },\n        {},\n        {}\n      )} ${`${validate_component(LoadingSpinner, \"LoadingSpinner\").$$render(\n        $$result,\n        {\n          message: \"Loading competition entries...\"\n        },\n        {},\n        {}\n      )}`}`;\n    }\n  })}`;\n});\nexport {\n  Page as default\n};\n"],"names":[],"mappings":"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"}