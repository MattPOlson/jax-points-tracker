{"version":3,"file":"approvalsStore-A-SAdsVP.js","sources":["../../../.svelte-kit/adapter-node/chunks/approvalsStore.js"],"sourcesContent":["import { w as writable } from \"./index.js\";\nimport { s as supabase } from \"./supabaseClient.js\";\nconst approvals = writable([]);\nconst message = writable(\"\");\nconst loading = writable(false);\nlet lastLoaded = 0;\nconst CACHE_MS = 1e4;\nasync function loadApprovals(force = false) {\n  if (!force && Date.now() - lastLoaded < CACHE_MS) return;\n  loading.set(true);\n  const { data, error } = await supabase.from(\"point_submissions\").select(`\n      id,\n      category,\n      description,\n      points,\n      event_date,\n      submitted_at,\n      member_id,\n      member:member_id ( name )\n    `).eq(\"approved\", false).order(\"event_date\", { ascending: false });\n  lastLoaded = Date.now();\n  if (error) {\n    console.error(\"Supabase query error:\", error);\n    message.set(`Failed to load submissions: ${error.message}`);\n    approvals.set([]);\n    loading.set(false);\n    return;\n  }\n  approvals.set(data);\n  message.set(data.length === 0 ? \"No pending submissions found to review.\" : \"\");\n  loading.set(false);\n}\nexport {\n  approvals as a,\n  loading as b,\n  loadApprovals as l,\n  message as m\n};\n"],"names":[],"mappings":";;;AAEK,MAAC,SAAS,GAAG,QAAQ,CAAC,EAAE;AACxB,MAAC,OAAO,GAAG,QAAQ,CAAC,EAAE;AACtB,MAAC,OAAO,GAAG,QAAQ,CAAC,KAAK;AAC9B,IAAI,UAAU,GAAG,CAAC;AAClB,MAAM,QAAQ,GAAG,GAAG;AACpB,eAAe,aAAa,CAAC,KAAK,GAAG,KAAK,EAAE;AAC5C,EAAE,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,GAAG,EAAE,GAAG,UAAU,GAAG,QAAQ,EAAE;AACpD,EAAE,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC;AACnB,EAAE,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,QAAQ,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,MAAM,CAAC;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC,KAAK,CAAC,YAAY,EAAE,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;AACtE,EAAE,UAAU,GAAG,IAAI,CAAC,GAAG,EAAE;AACzB,EAAE,IAAI,KAAK,EAAE;AACb,IAAI,OAAO,CAAC,KAAK,CAAC,uBAAuB,EAAE,KAAK,CAAC;AACjD,IAAI,OAAO,CAAC,GAAG,CAAC,CAAC,4BAA4B,EAAE,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;AAC/D,IAAI,SAAS,CAAC,GAAG,CAAC,EAAE,CAAC;AACrB,IAAI,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC;AACtB,IAAI;AACJ;AACA,EAAE,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC;AACrB,EAAE,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,KAAK,CAAC,GAAG,yCAAyC,GAAG,EAAE,CAAC;AACjF,EAAE,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC;AACpB;;;;"}