{"version":3,"file":"mySubmissionsStore-fjtplp0E.js","sources":["../../../.svelte-kit/adapter-node/chunks/mySubmissionsStore.js"],"sourcesContent":["import { w as writable } from \"./index.js\";\nimport { s as supabase } from \"./supabaseClient.js\";\nconst allSubmissions = writable([]);\nconst message = writable(\"\");\nconst loading = writable(false);\nlet lastLoaded = 0;\nconst CACHE_MS = 1e4;\nasync function loadMySubmissions(userId, sortColumn = \"event_date\", sortDirection = \"desc\", force = false) {\n  if (!userId) {\n    message.set(\"Please log in to view your submissions.\");\n    allSubmissions.set([]);\n    return;\n  }\n  if (!force && Date.now() - lastLoaded < CACHE_MS) return;\n  loading.set(true);\n  const { data, error } = await supabase.from(\"point_submissions\").select(`id, category, description, points, event_date, approved, rejection_reason`).eq(\"member_id\", userId).order(sortColumn, { ascending: sortDirection === \"asc\" });\n  lastLoaded = Date.now();\n  if (error) {\n    console.error(\"Error loading submissions:\", error);\n    message.set(\"Error loading your submissions.\");\n    allSubmissions.set([]);\n    loading.set(false);\n    return;\n  }\n  allSubmissions.set(data);\n  message.set(\"\");\n  loading.set(false);\n}\nexport {\n  allSubmissions as a,\n  loading as b,\n  loadMySubmissions as l,\n  message as m\n};\n"],"names":[],"mappings":";;;AAEK,MAAC,cAAc,GAAG,QAAQ,CAAC,EAAE;AAC7B,MAAC,OAAO,GAAG,QAAQ,CAAC,EAAE;AACtB,MAAC,OAAO,GAAG,QAAQ,CAAC,KAAK;AAC9B,IAAI,UAAU,GAAG,CAAC;AAClB,MAAM,QAAQ,GAAG,GAAG;AACpB,eAAe,iBAAiB,CAAC,MAAM,EAAE,UAAU,GAAG,YAAY,EAAE,aAAa,GAAG,MAAM,EAAE,KAAK,GAAG,KAAK,EAAE;AAC3G,EAAE,IAAI,CAAC,MAAM,EAAE;AACf,IAAI,OAAO,CAAC,GAAG,CAAC,yCAAyC,CAAC;AAC1D,IAAI,cAAc,CAAC,GAAG,CAAC,EAAE,CAAC;AAC1B,IAAI;AACJ;AACA,EAAE,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,GAAG,EAAE,GAAG,UAAU,GAAG,QAAQ,EAAE;AACpD,EAAE,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC;AACnB,EAAE,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,QAAQ,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,MAAM,CAAC,CAAC,yEAAyE,CAAC,CAAC,CAAC,EAAE,CAAC,WAAW,EAAE,MAAM,CAAC,CAAC,KAAK,CAAC,UAAU,EAAE,EAAE,SAAS,EAAE,aAAa,KAAK,KAAK,EAAE,CAAC;AACxO,EAAE,UAAU,GAAG,IAAI,CAAC,GAAG,EAAE;AACzB,EAAE,IAAI,KAAK,EAAE;AACb,IAAI,OAAO,CAAC,KAAK,CAAC,4BAA4B,EAAE,KAAK,CAAC;AACtD,IAAI,OAAO,CAAC,GAAG,CAAC,iCAAiC,CAAC;AAClD,IAAI,cAAc,CAAC,GAAG,CAAC,EAAE,CAAC;AAC1B,IAAI,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC;AACtB,IAAI;AACJ;AACA,EAAE,cAAc,CAAC,GAAG,CAAC,IAAI,CAAC;AAC1B,EAAE,OAAO,CAAC,GAAG,CAAC,EAAE,CAAC;AACjB,EAAE,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC;AACpB;;;;"}